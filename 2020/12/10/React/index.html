<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>React | Wang</title><meta name="description" content="一、React简介1.是什么？  发送请求获取数据 处理数据(过滤整理格式等) 操作DOM呈现页面  react是一个将数据渲染为HTML视图的开源JavaScript库。 2.为什么要学React？1.原生JavaScript操作DOM繁琐、效率低( DOM-API操作UI)。2.使用JavaScript直接操作DOM,浏览器会进行大量的重绘重排。3.原生JavaScript没有组件化编码方案，"><meta name="keywords" content="React"><meta name="author" content="小小王,1442243445@qq.com"><meta name="copyright" content="小小王"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/Banq-1.ico"><link rel="canonical" href="http://yoursite.com/2020/12/10/React/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="React"><meta property="og:url" content="http://yoursite.com/2020/12/10/React/"><meta property="og:site_name" content="Wang"><meta property="og:description" content="一、React简介1.是什么？  发送请求获取数据 处理数据(过滤整理格式等) 操作DOM呈现页面  react是一个将数据渲染为HTML视图的开源JavaScript库。 2.为什么要学React？1.原生JavaScript操作DOM繁琐、效率低( DOM-API操作UI)。2.使用JavaScript直接操作DOM,浏览器会进行大量的重绘重排。3.原生JavaScript没有组件化编码方案，"><meta property="og:image" content="http://yoursite.com/img/bg6.jpg"><meta property="article:published_time" content="2020-12-10T01:28:24.000Z"><meta property="article:modified_time" content="2021-06-27T03:25:13.140Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="交互" href="http://yoursite.com/2020/12/16/interaction/"><link rel="next" title="绘制图形组件库" href="http://yoursite.com/2020/12/05/Draw/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="/css/move_mouse/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/iconfont.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/pool.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">58</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">53</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">38</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一、React简介"><span class="toc-number">1.</span> <span class="toc-text">一、React简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-是什么？"><span class="toc-number">1.1.</span> <span class="toc-text">1.是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-为什么要学React？"><span class="toc-number">1.2.</span> <span class="toc-text">2.为什么要学React？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-React的特点"><span class="toc-number">1.3.</span> <span class="toc-text">3.React的特点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二、React入门"><span class="toc-number">2.</span> <span class="toc-text">二、React入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-HelloWord"><span class="toc-number">2.1.</span> <span class="toc-text">1. HelloWord</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-关于虚拟DOM："><span class="toc-number">2.2.</span> <span class="toc-text">2.关于虚拟DOM：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-jsx语法规则："><span class="toc-number">2.3.</span> <span class="toc-text">3.jsx语法规则：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-模块-组件"><span class="toc-number">2.4.</span> <span class="toc-text">4.模块&#x2F;组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#模块"><span class="toc-number">2.4.0.0.1.</span> <span class="toc-text">模块</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#组件"><span class="toc-number">2.4.0.0.2.</span> <span class="toc-text">组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#模块化"><span class="toc-number">2.4.0.0.3.</span> <span class="toc-text">模块化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#组件化"><span class="toc-number">2.4.0.0.4.</span> <span class="toc-text">组件化</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-React面向组件编程"><span class="toc-number">2.5.</span> <span class="toc-text">5.React面向组件编程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#函数式组件"><span class="toc-number">2.5.0.1.</span> <span class="toc-text">函数式组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#类式组件："><span class="toc-number">2.5.0.2.</span> <span class="toc-text">类式组件：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-组件三大核心属性"><span class="toc-number">2.6.</span> <span class="toc-text">6.组件三大核心属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#state"><span class="toc-number">2.6.0.1.</span> <span class="toc-text">state</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#props"><span class="toc-number">2.6.0.2.</span> <span class="toc-text">props</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#函数式组件使用props"><span class="toc-number">2.6.0.2.0.1.</span> <span class="toc-text">函数式组件使用props</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#refs"><span class="toc-number">2.6.0.3.</span> <span class="toc-text">refs</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-事件处理"><span class="toc-number">2.7.</span> <span class="toc-text">7.事件处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-生命周期"><span class="toc-number">2.8.</span> <span class="toc-text">8.生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#React的生命周期钩子函数"><span class="toc-number">2.8.0.0.1.</span> <span class="toc-text">React的生命周期钩子函数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#旧版本"><span class="toc-number">2.8.0.0.1.1.</span> <span class="toc-text">旧版本</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#新版本"><span class="toc-number">2.8.0.0.1.2.</span> <span class="toc-text">新版本</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#重要的勾子"><span class="toc-number">2.8.0.0.1.3.</span> <span class="toc-text">重要的勾子</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-虚拟DOM与DOM-Diffing算法"><span class="toc-number">2.9.</span> <span class="toc-text">9.虚拟DOM与DOM Diffing算法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三、React应用-基于React脚手架"><span class="toc-number">3.</span> <span class="toc-text">三、React应用(基于React脚手架)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-创建项目并启动"><span class="toc-number">3.1.</span> <span class="toc-text">1.创建项目并启动</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#（1全局安装：npm-i-g-create-react-app"><span class="toc-number">3.1.0.0.0.1.</span> <span class="toc-text">（1全局安装：npm i -g create-react-app</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#（2-切换到想创项目的目录，使用命令：create-react-app-XXXXX"><span class="toc-number">3.1.0.0.0.2.</span> <span class="toc-text">（2)切换到想创项目的目录，使用命令：create-react-app XXXXX</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#（3-第三步，进入项目文件夹：cd-hello-react"><span class="toc-number">3.1.0.0.0.3.</span> <span class="toc-text">（3)第三步，进入项目文件夹：cd hello-react</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#（4-第四步，启动项目：npm-start-yarn-start"><span class="toc-number">3.1.0.0.0.4.</span> <span class="toc-text">（4) 第四步，启动项目：npm start&#x2F;yarn start</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-react脚手架项目结构"><span class="toc-number">3.2.</span> <span class="toc-text">2.react脚手架项目结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-样式的模块化"><span class="toc-number">3.3.</span> <span class="toc-text">3. 样式的模块化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-功能界面的组件化编码流程（通用）"><span class="toc-number">3.4.</span> <span class="toc-text">4. 功能界面的组件化编码流程（通用）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#todoList案例相关知识点"><span class="toc-number">3.4.1.</span> <span class="toc-text">todoList案例相关知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四、React-ajax"><span class="toc-number">4.</span> <span class="toc-text">四、React ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-前置说明"><span class="toc-number">4.0.1.</span> <span class="toc-text">1. 前置说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-常用的ajax请求库"><span class="toc-number">4.0.2.</span> <span class="toc-text">2. 常用的ajax请求库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-axios文档"><span class="toc-number">4.0.3.</span> <span class="toc-text">3.axios文档</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五、react脚手架配置代理总结"><span class="toc-number">5.</span> <span class="toc-text">五、react脚手架配置代理总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#方法一"><span class="toc-number">5.1.</span> <span class="toc-text">方法一</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方法二"><span class="toc-number">5.2.</span> <span class="toc-text">方法二</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#六、消息订阅-发布机制"><span class="toc-number">6.</span> <span class="toc-text">六、消息订阅-发布机制</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#七、扩展：Fetch"><span class="toc-number">7.</span> <span class="toc-text">七、扩展：Fetch</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#github搜索案例相关知识点"><span class="toc-number">7.0.1.</span> <span class="toc-text">github搜索案例相关知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#八、-关于的路由笔记"><span class="toc-number">8.</span> <span class="toc-text">八、  关于的路由笔记</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#九、redux"><span class="toc-number">9.</span> <span class="toc-text">九、redux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-redux理解"><span class="toc-number">9.0.1.</span> <span class="toc-text">1.redux理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-redux的三个核心概念"><span class="toc-number">9.0.2.</span> <span class="toc-text">2. redux的三个核心概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-redux的核心API"><span class="toc-number">9.0.3.</span> <span class="toc-text">3.redux的核心API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-求和案例-redux精简版"><span class="toc-number">9.1.</span> <span class="toc-text">1.求和案例_redux精简版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-求和案例-redux完整版"><span class="toc-number">9.2.</span> <span class="toc-text">2.求和案例_redux完整版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-求和案例-redux异步action版"><span class="toc-number">9.3.</span> <span class="toc-text">3.求和案例_redux异步action版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-求和案例-react-redux基本使用"><span class="toc-number">9.4.</span> <span class="toc-text">4.求和案例_react-redux基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-求和案例-react-redux优化"><span class="toc-number">9.5.</span> <span class="toc-text">5.求和案例_react-redux优化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-求和案例-react-redux数据共享版"><span class="toc-number">9.6.</span> <span class="toc-text">6.求和案例_react-redux数据共享版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-求和案例-react-redux开发者工具的使用"><span class="toc-number">9.7.</span> <span class="toc-text">7.求和案例_react-redux开发者工具的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-求和案例-react-redux最终版"><span class="toc-number">9.8.</span> <span class="toc-text">8.求和案例_react-redux最终版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-react-redux使用hooks替代connect"><span class="toc-number">9.9.</span> <span class="toc-text">9. react-redux使用hooks替代connect</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#十-react-拓展"><span class="toc-number">10.</span> <span class="toc-text">十.react-拓展</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#umi"><span class="toc-number">11.</span> <span class="toc-text">umi</span></a></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/bg6.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Wang</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">React</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-12-10 09:28:24"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-12-10</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2021-06-27 11:25:13"><i class="fas fa-history fa-fw"></i> 更新于 2021-06-27</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/React/">React</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="一、React简介"><a href="#一、React简介" class="headerlink" title="一、React简介"></a>一、React简介</h1><h2 id="1-是什么？"><a href="#1-是什么？" class="headerlink" title="1.是什么？"></a>1.是什么？</h2><p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210122152556572.png" alt="在这里插入图片描述"></p>
<ol>
<li>发送请求获取数据</li>
<li>处理数据(过滤整理格式等)</li>
<li><code>操作DOM呈现页面</code></li>
</ol>
<p><strong>react是一个将数据渲染为HTML视图的开源JavaScript库。</strong></p>
<h2 id="2-为什么要学React？"><a href="#2-为什么要学React？" class="headerlink" title="2.为什么要学React？"></a>2.为什么要学React？</h2><p>1.原生JavaScript操作DOM繁琐、效率低( <code>DOM-API操作UI</code>)。<br>2.使用JavaScript直接操作DOM,浏览器会进行大量的<code>重绘重排</code>。<br>3.原生JavaScript没有<code>组件</code>化编码方案，代码复用率低。</p>
<h2 id="3-React的特点"><a href="#3-React的特点" class="headerlink" title="3.React的特点"></a>3.React的特点</h2><ol>
<li>采用<code>组件化</code>模式、<code>声明式编码</code>，提高开发效率及组件复用率。</li>
<li>在React Native中可以使用React语法进行<code>移动端开发</code>。</li>
<li>使用<code>虚拟DOM</code>+优秀的<code>Diffing算法</code>，尽量减少与真实DOM的交互。<br>原生js实现数据变动<br><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/202101221532596.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>React实现：<br><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210122153346757.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><h1 id="二、React入门"><a href="#二、React入门" class="headerlink" title="二、React入门"></a>二、React入门</h1><h2 id="1-HelloWord"><a href="#1-HelloWord" class="headerlink" title="1. HelloWord"></a>1. HelloWord</h2></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span> /&gt;</span><br><span class="line">    &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>head&gt;</span><br><span class="line">  &lt;!-- 引入react核心库 --&gt;</span><br><span class="line">  &lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"../js/react.development.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">  &lt;!-- 引入react-dom，用于支持react操作DOM --&gt;</span></span><br><span class="line"><span class="regexp">  &lt;script type="text/</span>javascript<span class="string">" src="</span>../js/react-dom.development.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">  &lt;!-- 引入babel，用于将jsx转为js --&gt;</span></span><br><span class="line"><span class="string">  &lt;script type="</span>text/javascript<span class="string">" src="</span>../js/babel.min.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">  &lt;body&gt;</span></span><br><span class="line"><span class="string">    &lt;!-- 准备好一个容器 --&gt;</span></span><br><span class="line"><span class="string">    &lt;div id="</span>test<span class="string">"&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">  &lt;/body&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &lt;script type="</span>text/babel<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    /* 此处一定要写babel */</span></span><br><span class="line"><span class="string">    //1.创建虚拟DOM</span></span><br><span class="line"><span class="string">    const VDOM = &lt;h1&gt;Hello,React&lt;/h1&gt;; /* 此处一定不要写引号，因为不是字符串 */</span></span><br><span class="line"><span class="string">    //2.渲染虚拟DOM到页面</span></span><br><span class="line"><span class="string">    ReactDOM.render(VDOM, document.getElementById("</span>test<span class="string">"));</span></span><br><span class="line"><span class="string">  &lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-关于虚拟DOM："><a href="#2-关于虚拟DOM：" class="headerlink" title="2.关于虚拟DOM："></a>2.关于虚拟DOM：</h2><ol>
<li>本质是Object类型的对象（一般对象）</li>
<li>虚拟DOM比较“轻”，真实DOM比较“重”，因为虚拟DOM是React内部在用，无需真实DOM上那么多的属性。</li>
<li>虚拟DOM最终会被React转化为真实DOM，呈现在页面上。<h2 id="3-jsx语法规则："><a href="#3-jsx语法规则：" class="headerlink" title="3.jsx语法规则："></a>3.jsx语法规则：</h2></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>定义虚拟DOM时，不要写引号。</span><br><span class="line"><span class="number">2.</span>标签中混入JS表达式时要用&#123;&#125;。</span><br><span class="line"><span class="number">3.</span>样式的类名指定不要用<span class="class"><span class="keyword">class</span>，要用<span class="title">className</span>。</span></span><br><span class="line"><span class="class">4.内联样式，要用<span class="title">style</span></span>=&#123;&#123;<span class="attr">key</span>:value&#125;&#125;的形式去写。</span><br><span class="line"><span class="number">5.</span>只有一个根标签 (用div包起来)</span><br><span class="line"><span class="number">6.</span>标签必须闭合</span><br><span class="line"><span class="number">7.</span>标签首字母</span><br><span class="line">     (<span class="number">1</span>).若小写字母开头，则将该标签转为html中同名元素，若html中无该标签对应的同名元素，则报错。</span><br><span class="line">     (<span class="number">2</span>).若大写字母开头，react就去渲染对应的组件，若组件没有定义，则报错。</span><br></pre></td></tr></table></figure>
<p>jsx语法规则小Demo</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">	.title&#123;</span><br><span class="line">		background-color: orange;</span><br><span class="line">		width: <span class="number">200</span>px;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp"> &lt;/</span>head&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line">   &lt;!-- 准备好一个“容器” --&gt;</span><br><span class="line">   &lt;div id=<span class="string">"test"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">   &lt;script type="text/</span>babel<span class="string">"&gt;</span></span><br><span class="line"><span class="string">     /* 此处一定要写babel */</span></span><br><span class="line"><span class="string">     const myId = 'wjy'</span></span><br><span class="line"><span class="string">     const myData = 'Hello,React'</span></span><br><span class="line"><span class="string">     //1.创建虚拟DOM</span></span><br><span class="line"><span class="string">     const VDON = (</span></span><br><span class="line"><span class="string">       &lt;h2 style=&#123;&#123;color:"</span>red<span class="string">"&#125;&#125; className='title' id=&#123;myId.toUpperCase()&#125;&gt;</span></span><br><span class="line"><span class="string">         &lt;span&gt;&#123;myData&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">       &lt;/h2&gt;</span></span><br><span class="line"><span class="string">     );</span></span><br><span class="line"><span class="string">     //2.渲染虚拟DOM到页面</span></span><br><span class="line"><span class="string">     ReactDOM.render(VDON, document.getElementById("</span>test<span class="string">"));</span></span><br><span class="line"><span class="string">   &lt;/script&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-模块-组件"><a href="#4-模块-组件" class="headerlink" title="4.模块/组件"></a>4.模块/组件</h2><h5 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h5><ol>
<li>理解：向外提供特定功能的js程序, 一般就是一个js文件</li>
<li>为什么要拆成模块：随着业务逻辑增加，代码越来越多且复杂。</li>
<li>作用：复用js, 简化js的编写, 提高js运行效率</li>
</ol>
<h5 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h5><ol>
<li>理解：用来实现局部功能效果的代码和资源的集合(html/css/js/image等等)</li>
<li>为什么要用组件： 一个界面的功能更复杂</li>
<li>作用：复用编码, 简化项目编码, 提高运行效率</li>
</ol>
<h5 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h5><p>当应用的js都以模块来编写的, 这个应用就是一个模块化的应用</p>
<h5 id="组件化"><a href="#组件化" class="headerlink" title="组件化"></a>组件化</h5><p>当应用是以多组件的方式实现, 这个应用就是一个组件化的应用</p>
<h2 id="5-React面向组件编程"><a href="#5-React面向组件编程" class="headerlink" title="5.React面向组件编程"></a>5.React面向组件编程</h2><h4 id="函数式组件"><a href="#函数式组件" class="headerlink" title="函数式组件"></a>函数式组件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;!-- 准备好一个“容器” --&gt;</span><br><span class="line">	&lt;div id=<span class="string">"test"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">	&lt;script type="text/</span>babel<span class="string">"&gt;</span></span><br><span class="line"><span class="string">		//1.创建函数式组件</span></span><br><span class="line"><span class="string">		function MyComponent()&#123;</span></span><br><span class="line"><span class="string">			console.log(this); //此处的this是undefined，因为babel编译后开启了严格模式</span></span><br><span class="line"><span class="string">			return &lt;h2&gt;我是用函数定义的组件(适用于【简单组件】的定义)&lt;/h2&gt;</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">		//2.渲染组件到页面</span></span><br><span class="line"><span class="string">		ReactDOM.render(&lt;MyComponent/&gt;,document.getElementById('test'))</span></span><br><span class="line"><span class="string">		/* </span></span><br><span class="line"><span class="string">	    执行了ReactDOM.render(&lt;MyComponent/&gt;.......之后，发生了什么？</span></span><br><span class="line"><span class="string">		1.React解析组件标签，找到了MyComponent组件。</span></span><br><span class="line"><span class="string">		2.发现组件是使用函数定义的，随后调用该函数，将返回的虚拟DOM转为真实DOM，随后呈现在页面中。</span></span><br><span class="line"><span class="string">		*/</span></span><br><span class="line"><span class="string">	&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="类式组件："><a href="#类式组件：" class="headerlink" title="类式组件："></a>类式组件：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">	&lt;div id=<span class="string">"test"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;script type=<span class="string">"text/babel"</span>&gt;</span><br><span class="line">    <span class="comment">//1.创建类式组件</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">        render()&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是用类定义的组件（适用于复杂组件）<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//2.渲染虚拟DOM到页面</span></span><br><span class="line">	ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">MyComponent</span>/&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'test'</span>))</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-组件三大核心属性"><a href="#6-组件三大核心属性" class="headerlink" title="6.组件三大核心属性"></a>6.组件三大核心属性</h2><h4 id="state"><a href="#state" class="headerlink" title="state"></a><code>state</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.	state是组件对象最重要的属性, 值是对象(可以包含多个key-value的组合)</span><br><span class="line">2.	组件被称为&quot;状态机&quot;, 通过更新组件的state来更新对应的页面显示(重新渲染组件)</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong><br><code>this的指向问题：必须是实例调用才能指向原型，否则undefined（因为类中自动开启严格模式）</code></p>
<blockquote>
<ol>
<li>组件中render方法中的this为组件实例对象</li>
<li>组件自定义的方法中this为undefined，如何解决？<br>a)    强制绑定this: 通过函数对象的bind()<br>b)    箭头函数（<code>推荐</code>）</li>
<li>状态数据，不能直接修改或更新</li>
</ol>
</blockquote>
<h4 id="props"><a href="#props" class="headerlink" title="props"></a><code>props</code></h4><ol>
<li>基本使用（<code>组件内部不能修改props数据</code>）</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/babel"</span>&gt;</span><br><span class="line">		<span class="comment">//创建组件</span></span><br><span class="line">		<span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">			render()&#123;</span><br><span class="line">				<span class="comment">// console.log(this);</span></span><br><span class="line">				<span class="keyword">const</span> &#123;name,age,sex&#125; = <span class="keyword">this</span>.props</span><br><span class="line">				<span class="keyword">return</span> (</span><br><span class="line">					&lt;ul&gt;</span><br><span class="line">						&lt;li&gt;姓名：&#123;name&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">						&lt;li&gt;性别：&#123;sex&#125;&lt;/</span>li&gt;</span><br><span class="line">						&lt;li&gt;年龄：&#123;age+<span class="number">1</span>&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">					&lt;/u</span>l&gt;</span><br><span class="line">				)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//渲染组件到页面</span></span><br><span class="line">		ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">"jerry"</span> <span class="attr">age</span>=<span class="string">&#123;19&#125;</span>  <span class="attr">sex</span>=<span class="string">"男"</span>/&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'test1'</span>))</span><br><span class="line">		ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">"tom"</span> <span class="attr">age</span>=<span class="string">&#123;18&#125;</span> <span class="attr">sex</span>=<span class="string">"女"</span>/&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'test2'</span>))</span><br><span class="line"></span><br><span class="line">		<span class="keyword">const</span> p = &#123;<span class="attr">name</span>:<span class="string">'老刘'</span>,<span class="attr">age</span>:<span class="number">18</span>,<span class="attr">sex</span>:<span class="string">'女'</span>&#125;</span><br><span class="line">		<span class="comment">// console.log('@',...p);</span></span><br><span class="line">		<span class="comment">// ReactDOM.render(&lt;Person name=&#123;p.name&#125; age=&#123;p.age&#125; sex=&#123;p.sex&#125;/&gt;,document.getElementById('test3'))</span></span><br><span class="line">		ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Person</span> &#123;<span class="attr">...p</span>&#125;/&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'test3'</span>))</span><br><span class="line">	&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>对标签属性进行类型、必要性的限制<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">	name:PropTypes.string.isRequired, <span class="comment">//限制name必传，且为字符串</span></span><br><span class="line">	sex:PropTypes.string,<span class="comment">//限制sex为字符串</span></span><br><span class="line">	age:PropTypes.number,<span class="comment">//限制age为数值</span></span><br><span class="line">	speak:PropTypes.func,<span class="comment">//限制speak为函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//指定默认标签属性值</span></span><br><span class="line"><span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">	sex:<span class="string">'男'</span>,<span class="comment">//sex默认值为男</span></span><br><span class="line">	age:<span class="number">18</span> <span class="comment">//age默认值为18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="函数式组件使用props"><a href="#函数式组件使用props" class="headerlink" title="函数式组件使用props"></a>函数式组件使用props</h6></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/babel"</span>&gt;</span><br><span class="line">    <span class="comment">//创建组件</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">props</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;name,age,sex&#125; = props</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &lt;li&gt;姓名：&#123;name&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;li&gt;性别：&#123;sex&#125;&lt;/</span>li&gt;</span><br><span class="line">                    &lt;li&gt;年龄：&#123;age&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/u</span>l&gt;</span><br><span class="line">            )</span><br><span class="line">    &#125;</span><br><span class="line">    Person.propTypes = &#123;</span><br><span class="line">        name:PropTypes.string.isRequired, <span class="comment">//限制name必传，且为字符串</span></span><br><span class="line">        sex:PropTypes.string,<span class="comment">//限制sex为字符串</span></span><br><span class="line">        age:PropTypes.number,<span class="comment">//限制age为数值</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//指定默认标签属性值</span></span><br><span class="line">    Person.defaultProps = &#123;</span><br><span class="line">        sex:<span class="string">'男'</span>,<span class="comment">//sex默认值为男</span></span><br><span class="line">        age:<span class="number">18</span> <span class="comment">//age默认值为18</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//渲染组件到页面</span></span><br><span class="line">    ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">"jerry"</span>/&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'test1'</span>))</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="refs"><a href="#refs" class="headerlink" title="refs"></a>refs</h4><p><code>组件内的标签可以定义ref属性来标识自己</code></p>
<ol>
<li><p>String类型的Refs（<strong>已经过时</strong>，尽量避免使用）</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例如 <span class="string">"&lt;input ref="</span>input1<span class="string">" type="</span>text<span class="string">"/&gt;"</span>。你可以通过 <span class="keyword">this</span>.refs.textInput 来访问 DOM 节点</span><br></pre></td></tr></table></figure>
</li>
<li><p>回调形式的ref</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input ref=&#123;(c)=&gt;&#123;<span class="keyword">this</span>.input1 = c&#125;&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>createRef创建ref容器·（<strong>专人专用</strong>，<code>推荐使用</code>）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myRef = React.createRef() </span><br><span class="line">&lt;input ref=&#123;<span class="keyword">this</span>.myRef&#125;/&gt;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h2 id="7-事件处理"><a href="#7-事件处理" class="headerlink" title="7.事件处理"></a>7.事件处理</h2><ol>
<li><strong>React中的事件</strong><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>).通过onXxx属性指定事件处理函数(注意大小写)</span><br><span class="line">	a.React使用的是自定义(合成)事件, 而不是使用的原生DOM事件 —————— 为了更好的兼容性</span><br><span class="line">	b.React中的事件是通过事件委托方式处理的(委托给组件最外层的元素) ————————为了的高效</span><br><span class="line">(<span class="number">2</span>).通过event.target得到发生事件的DOM元素对象 ——————————不要过度使用ref</span><br></pre></td></tr></table></figure></li>
<li><strong>包含表单的组件分类</strong></li>
</ol>
<ul>
<li><strong>受控组件（将值保存到state中）</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/babel"</span>&gt;</span><br><span class="line">	<span class="comment">//1.创建组件</span></span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">Login</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//初始化状态</span></span><br><span class="line">        state = &#123;</span><br><span class="line">            username : <span class="string">''</span>,</span><br><span class="line">            password : <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        handleSubmit = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">//组织表单提交</span></span><br><span class="line">            event.preventDefault() </span><br><span class="line">            <span class="keyword">const</span> &#123;username,password&#125; = <span class="keyword">this</span>.state</span><br><span class="line">            alert(<span class="string">`你输入的用户名是：<span class="subst">$&#123;username&#125;</span>,你输入的密码是：<span class="subst">$&#123;password&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        saveUsername = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.setState(&#123;<span class="attr">username</span> : event.target.value&#125;)  <span class="comment">//保存用户名到状态中</span></span><br><span class="line">        &#125;</span><br><span class="line">        savePassword = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.setState(&#123;<span class="attr">password</span> : event.target.value&#125;)  <span class="comment">//保存密码到状态中</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		render()&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">			<span class="keyword">return</span> (</span><br><span class="line">                &lt;form action=<span class="string">"http://www.atguigu.com2"</span> onSubmit=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;</span><br><span class="line">                    用户名：&lt;input onChange=&#123;<span class="keyword">this</span>.saveUsername&#125;  type=<span class="string">"text"</span> name=<span class="string">"username"</span> /&gt;<span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line">                    密码：  &lt;input onChange=&#123;<span class="keyword">this</span>.savePassword&#125;  type=<span class="string">"password"</span> name=<span class="string">"password"</span> /&gt;</span><br><span class="line">                    &lt;button&gt;登陆&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>form&gt;</span><br><span class="line">            )</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//2.渲染虚拟DOM到页面</span></span><br><span class="line">	ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Login</span>/&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'test'</span>))</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>非受控组件</strong></li>
</ul>
<ol start="3">
<li><strong>高阶函数</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">高阶函数：如果一个函数符合下面<span class="number">2</span>个规范中的任何一个，那该函数就是高阶函数。</span><br><span class="line">      <span class="number">1.</span>若A函数，接收的参数是一个函数，那么A就可以称之为高阶函数。</span><br><span class="line">      <span class="number">2.</span>若A函数，调用的返回值依然是一个函数，那么A就可以称之为高阶函数。</span><br><span class="line">      常见的高阶函数有：<span class="built_in">Promise</span>、setTimeout、arr.map()等等</span><br><span class="line"></span><br><span class="line">函数的柯里化：通过函数调用继续返回函数的方式，实现多次接收参数最后统一处理的函数编码形式。</span><br><span class="line"> 函数的柯里化eg：</span><br><span class="line">		&lt;script type=<span class="string">"text/javascript"</span> &gt;	</span><br><span class="line">			<span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">return</span><span class="function">(<span class="params">b</span>)=&gt;</span>&#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="function">(<span class="params">c</span>)=&gt;</span>&#123;</span><br><span class="line">						<span class="keyword">return</span> a+b+c</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">const</span> result = sum(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)</span><br><span class="line">			<span class="built_in">console</span>.log(result);</span><br><span class="line">		&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>


<h2 id="8-生命周期"><a href="#8-生命周期" class="headerlink" title="8.生命周期"></a>8.生命周期</h2><ol>
<li>组件从创建到死亡它会经历一些特定的阶段。</li>
<li>React组件中包含一系列勾子函数(生命周期回调函数), 会在特定的时刻调用。</li>
<li>我们在定义组件时，会在特定的生命周期回调函数中，做特定的工作。<h5 id="React的生命周期钩子函数"><a href="#React的生命周期钩子函数" class="headerlink" title="React的生命周期钩子函数"></a>React的生命周期钩子函数</h5><h6 id="旧版本"><a href="#旧版本" class="headerlink" title="旧版本"></a><code>旧版本</code></h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 初始化阶段: 由ReactDOM.render()触发---初次渲染</span><br><span class="line">	<span class="number">1.</span>	<span class="keyword">constructor</span>()</span><br><span class="line">	2.	componentWillMount()</span><br><span class="line">	3.	render()</span><br><span class="line">	4.	componentDidMount() =====&gt; 常用</span><br><span class="line">							一般在这个钩子中做一些初始化的事，例如：开启定时器、发送网络请求、订阅消息</span><br><span class="line">2. 更新阶段: 由组件内部this.setSate()或父组件render触发</span><br><span class="line">	1.	shouldComponentUpdate()</span><br><span class="line">	2.	componentWillUpdate()</span><br><span class="line">	3.	render() =====&gt; 必须使用的一个</span><br><span class="line">	4.	componentDidUpdate()</span><br><span class="line">3. 卸载组件: 由ReactDOM.unmountComponentAtNode()触发</span><br><span class="line">	1.	componentWillUnmount()  =====&gt; 常用</span><br><span class="line">							 一般在这个钩子中做一些收尾的事，例如：关闭定时器、取消订阅消息</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210125122330708.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/babel"</span>&gt;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建组件</span></span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">Count</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//构造器</span></span><br><span class="line">		<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Count---constructor'</span>);</span><br><span class="line">			<span class="keyword">super</span>(props)</span><br><span class="line">			<span class="comment">//初始化状态</span></span><br><span class="line">			<span class="keyword">this</span>.state = &#123;<span class="attr">count</span>:<span class="number">0</span>&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//加1按钮的回调</span></span><br><span class="line">		add = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">			<span class="comment">//获取原状态</span></span><br><span class="line">			<span class="keyword">const</span> &#123;count&#125; = <span class="keyword">this</span>.state</span><br><span class="line">			<span class="comment">//更新状态</span></span><br><span class="line">			<span class="keyword">this</span>.setState(&#123;<span class="attr">count</span>:count+<span class="number">1</span>&#125;)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//卸载组件按钮的回调</span></span><br><span class="line">		death = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">			ReactDOM.unmountComponentAtNode(<span class="built_in">document</span>.getElementById(<span class="string">'test'</span>))</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//强制更新按钮的回调</span></span><br><span class="line">		force = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.forceUpdate()</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//组件将要挂载的钩子</span></span><br><span class="line">		componentWillMount()&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Count---componentWillMount'</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//组件挂载完毕的钩子</span></span><br><span class="line">		componentDidMount()&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Count---componentDidMount'</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//组件将要卸载的钩子</span></span><br><span class="line">		componentWillUnmount()&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Count---componentWillUnmount'</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//控制组件更新的“阀门”</span></span><br><span class="line">		shouldComponentUpdate()&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Count---shouldComponentUpdate'</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//组件将要更新的钩子</span></span><br><span class="line">		componentWillUpdate()&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Count---componentWillUpdate'</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//组件更新完毕的钩子</span></span><br><span class="line">		componentDidUpdate()&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Count---componentDidUpdate'</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		render()&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Count---render'</span>);</span><br><span class="line">			<span class="keyword">const</span> &#123;count&#125; = <span class="keyword">this</span>.state</span><br><span class="line">			<span class="keyword">return</span>(</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&lt;h2&gt;当前求和为：&#123;count&#125;&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">					&lt;button onClick=&#123;this.add&#125;&gt;点我+1&lt;/</span>button&gt;</span><br><span class="line">					&lt;button onClick=&#123;<span class="keyword">this</span>.death&#125;&gt;卸载组件&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">					&lt;button onClick=&#123;this.force&#125;&gt;不更改任何状态中的数据，强制更新一下&lt;/</span>button&gt;</span><br><span class="line">				&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">			)</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">	</span></span><br><span class="line"><span class="regexp">	/</span><span class="regexp">/父组件A</span></span><br><span class="line"><span class="regexp">	class A extends React.Component&#123;</span></span><br><span class="line"><span class="regexp">		/</span><span class="regexp">/初始化状态</span></span><br><span class="line"><span class="regexp">		state = &#123;carName:'奔驰'&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">		changeCar = ()=&gt;&#123;</span></span><br><span class="line"><span class="regexp">			this.setState(&#123;carName:'奥拓'&#125;)</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">		render()&#123;</span></span><br><span class="line"><span class="regexp">			return(</span></span><br><span class="line"><span class="regexp">				&lt;div&gt;</span></span><br><span class="line"><span class="regexp">					&lt;div&gt;我是A组件&lt;/</span>div&gt;</span><br><span class="line">					&lt;button onClick=&#123;<span class="keyword">this</span>.changeCar&#125;&gt;换车&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">					&lt;B carName=&#123;this.state.carName&#125;/</span>&gt;</span><br><span class="line">				&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">			)</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">	</span></span><br><span class="line"><span class="regexp">	/</span><span class="regexp">/子组件B</span></span><br><span class="line"><span class="regexp">	class B extends React.Component&#123;</span></span><br><span class="line"><span class="regexp">		/</span><span class="regexp">/组件将要接收新的props的钩子</span></span><br><span class="line"><span class="regexp">		componentWillReceiveProps(props)&#123;</span></span><br><span class="line"><span class="regexp">			console.log('B---componentWillReceiveProps',props);</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">		/</span><span class="regexp">/控制组件更新的“阀门”</span></span><br><span class="line"><span class="regexp">		shouldComponentUpdate()&#123;</span></span><br><span class="line"><span class="regexp">			console.log('B---shouldComponentUpdate');</span></span><br><span class="line"><span class="regexp">			return true</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		/</span><span class="regexp">/组件将要更新的钩子</span></span><br><span class="line"><span class="regexp">		componentWillUpdate()&#123;</span></span><br><span class="line"><span class="regexp">			console.log('B---componentWillUpdate');</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">		/</span><span class="regexp">/组件更新完毕的钩子</span></span><br><span class="line"><span class="regexp">		componentDidUpdate()&#123;</span></span><br><span class="line"><span class="regexp">			console.log('B---componentDidUpdate');</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">		render()&#123;</span></span><br><span class="line"><span class="regexp">			console.log('B---render');</span></span><br><span class="line"><span class="regexp">			return(</span></span><br><span class="line"><span class="regexp">				&lt;div&gt;我是B组件，接收到的车是:&#123;this.props.carName&#125;&lt;/</span>div&gt;</span><br><span class="line">			)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//渲染组件</span></span><br><span class="line">	ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Count</span>/&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'test'</span>))</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="新版本"><a href="#新版本" class="headerlink" title="新版本"></a><code>新版本</code></h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 初始化阶段: 由ReactDOM.render()触发---初次渲染</span><br><span class="line">	<span class="number">1.</span><span class="keyword">constructor</span>()</span><br><span class="line">	2.getDerivedStateFromProps </span><br><span class="line">	3.render()</span><br><span class="line">	4.componentDidMount()</span><br><span class="line">2. 更新阶段: 由组件内部this.setSate()或父组件重新render触发</span><br><span class="line">	1.getDerivedStateFromProps</span><br><span class="line">	2.shouldComponentUpdate()</span><br><span class="line">	3.render()</span><br><span class="line">	4.getSnapshotBeforeUpdate</span><br><span class="line">3. 卸载组件: 由ReactDOM.unmountComponentAtNode()触发</span><br><span class="line">    1.componentWillUnmount()</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210125123505974.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h6 id="重要的勾子"><a href="#重要的勾子" class="headerlink" title="重要的勾子"></a>重要的勾子</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>render：初始化渲染或更新渲染调用</span><br><span class="line"><span class="number">2.</span>componentDidMount：开启监听, 发送ajax请求</span><br><span class="line"><span class="number">3.</span>componentWillUnmount：做一些收尾工作, 如: 清理定时器</span><br></pre></td></tr></table></figure>

<h2 id="9-虚拟DOM与DOM-Diffing算法"><a href="#9-虚拟DOM与DOM-Diffing算法" class="headerlink" title="9.虚拟DOM与DOM Diffing算法"></a>9.虚拟DOM与DOM Diffing算法</h2><p><strong><code>1.react/vue中的key有什么作用？（key的内部原理是什么？）</code></strong><br><strong><code>2.为什么遍历列表时，key最好不要用index?</code></strong></p>
<ol>
<li>虚拟DOM中key的作用：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>). 简单的说: key是虚拟DOM对象的标识, 在更新显示时key起着极其重要的作用。</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>). 详细的说: 当状态中的数据发生变化时，react会根据【新数据】生成【新的虚拟DOM】, </span><br><span class="line">							随后React进行【新虚拟DOM】与【旧虚拟DOM】的diff比较，比较规则如下：</span><br><span class="line"></span><br><span class="line">			a. 旧虚拟DOM中找到了与新虚拟DOM相同的key：</span><br><span class="line">						(<span class="number">1</span>).若虚拟DOM中内容没变, 直接使用之前的真实DOM</span><br><span class="line">						(<span class="number">2</span>).若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM</span><br><span class="line"></span><br><span class="line">			b. 旧虚拟DOM中未找到与新虚拟DOM相同的key</span><br><span class="line">						根据数据创建新的真实DOM，随后渲染到到页面</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>用index作为key可能会引发的问题：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 若对数据进行：逆序添加、逆序删除等破坏顺序操作:</span><br><span class="line">				会产生没有必要的真实DOM更新 ==&gt; 界面效果没问题, 但效率低。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 如果结构中还包含输入类的DOM：</span><br><span class="line">				会产生错误DOM更新 ==&gt; 界面有问题。</span><br><span class="line">				</span><br><span class="line"><span class="number">3.</span> 注意！如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，</span><br><span class="line">	仅用于渲染列表用于展示，使用index作为key是没有问题的。</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>开发中如何选择key?:</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>最好使用每条数据的唯一标识作为key, 比如id、手机号、身份证号、学号等唯一值。</span><br><span class="line"><span class="number">2.</span>如果确定只是简单的展示数据，用index也是可以的。</span><br></pre></td></tr></table></figure>


<h1 id="三、React应用-基于React脚手架"><a href="#三、React应用-基于React脚手架" class="headerlink" title="三、React应用(基于React脚手架)"></a>三、React应用(基于React脚手架)</h1><blockquote>
<p>1.xxx脚手架: 用来帮助程序员快速创建一个基于xxx库的模板项目</p>
<blockquote>
<ol>
<li>包含了所有需要的配置（语法检查、jsx编译、devServer…）</li>
<li>下载好了所有相关的依赖</li>
<li>可以直接运行一个简单效果</li>
</ol>
</blockquote>
<p>2.react提供了一个用于创建react项目的脚手架库: create-react-app<br>3.项目的整体技术架构为:  react + webpack + es6 + eslint<br>4.使用脚手架开发的项目的特点: 模块化, 组件化, 工程化</p>
</blockquote>
<h2 id="1-创建项目并启动"><a href="#1-创建项目并启动" class="headerlink" title="1.创建项目并启动"></a>1.创建项目并启动</h2><h6 id="（1全局安装：npm-i-g-create-react-app"><a href="#（1全局安装：npm-i-g-create-react-app" class="headerlink" title="（1全局安装：npm i -g create-react-app"></a>（1全局安装：<code>npm i -g create-react-app</code></h6><h6 id="（2-切换到想创项目的目录，使用命令：create-react-app-XXXXX"><a href="#（2-切换到想创项目的目录，使用命令：create-react-app-XXXXX" class="headerlink" title="（2)切换到想创项目的目录，使用命令：create-react-app XXXXX"></a>（2)切换到想创项目的目录，使用命令：<code>create-react-app XXXXX</code></h6><h6 id="（3-第三步，进入项目文件夹：cd-hello-react"><a href="#（3-第三步，进入项目文件夹：cd-hello-react" class="headerlink" title="（3)第三步，进入项目文件夹：cd hello-react"></a>（3)第三步，进入项目文件夹：<code>cd hello-react</code></h6><h6 id="（4-第四步，启动项目：npm-start-yarn-start"><a href="#（4-第四步，启动项目：npm-start-yarn-start" class="headerlink" title="（4) 第四步，启动项目：npm start/yarn start"></a>（4) 第四步，启动项目：<code>npm start/yarn start</code></h6><h2 id="2-react脚手架项目结构"><a href="#2-react脚手架项目结构" class="headerlink" title="2.react脚手架项目结构"></a>2.react脚手架项目结构</h2><blockquote>
<pre><code>public ---- 静态资源文件夹</code></pre><blockquote>
<p>rfavicon.icon —— 网站页签图标<br>        <strong><code>index.html -------- 主页面</code></strong><br>        logo192.png ——- logo图<br>        logo512.png ——- logo图<br>        manifest.json —– 应用加壳的配置文件<br>        obots.txt ——– 爬虫协议文件</p>
</blockquote>
<p>src —- 源码文件夹</p>
<blockquote>
<p>App.css ——– App组件的样式<br>        <strong><code>App.js --------- App组件</code></strong><br>        App.test.js —- 用于给App做测试<br>        index.css —— 样式<br>        <strong><code>index.js ------- 入口文件</code></strong><br>        logo.svg ——- logo图<br>        reportWebVitals.js<br>            — 页面性能分析文件(需要web-vitals库的支持)<br>        setupTests.js<br>            —- 组件单元测试的文件(需要jest-dom库的支持)</p>
</blockquote>
</blockquote>
<h2 id="3-样式的模块化"><a href="#3-样式的模块化" class="headerlink" title="3. 样式的模块化"></a>3. 样式的模块化</h2><p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210126091550670.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>一般不用，用less编写一般不会冲突<br>安装：ES7 React/Redux/GraphQL/React-Native snippets</p>
<h2 id="4-功能界面的组件化编码流程（通用）"><a href="#4-功能界面的组件化编码流程（通用）" class="headerlink" title="4. 功能界面的组件化编码流程（通用）"></a>4. 功能界面的组件化编码流程（通用）</h2><ol>
<li>拆分组件: 拆分界面,抽取组件</li>
<li>实现静态组件: 使用组件实现静态页面效果</li>
<li>实现动态组件<ul>
<li>动态显示初始化数据<ul>
<li>数据类型</li>
<li>数据名称</li>
<li>保存在哪个组件?</li>
<li>交互(从绑定事件监听开始)</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="todoList案例相关知识点"><a href="#todoList案例相关知识点" class="headerlink" title="todoList案例相关知识点"></a><code>todoList案例相关知识点</code></h3><pre><code>1.拆分组件、实现静态组件，注意：className、style的写法
2.动态初始化列表，如何确定将数据放在哪个组件的state中？
            ——某个组件使用：放在其自身的state中
            ——某些组件使用：放在他们共同的父组件state中（官方称此操作为：状态提升）
3.关于父子之间通信：
        1.【父组件】给【子组件】传递数据：通过props传递
        2.【子组件】给【父组件】传递数据：通过props传递，要求父提前给子传递一个函数
4.注意defaultChecked 和 checked的区别，类似的还有：defaultValue 和 value
5.状态在哪里，操作状态的方法就在哪里</code></pre><h1 id="四、React-ajax"><a href="#四、React-ajax" class="headerlink" title="四、React ajax"></a>四、React ajax</h1><h3 id="1-前置说明"><a href="#1-前置说明" class="headerlink" title="1. 前置说明"></a>1. 前置说明</h3><ol>
<li>React本身只关注于界面, 并不包含发送ajax请求的代码</li>
<li>前端应用需要通过ajax请求与后台进行交互(json数据)</li>
<li>react应用中需要集成第三方ajax库(或自己封装)</li>
</ol>
<h3 id="2-常用的ajax请求库"><a href="#2-常用的ajax请求库" class="headerlink" title="2. 常用的ajax请求库"></a>2. 常用的ajax请求库</h3><ol>
<li>jQuery: 比较重, 如果需要另外引入不建议使用</li>
<li>axios: 轻量级, 建议使用<ul>
<li>封装XmlHttpRequest对象的ajax</li>
<li>promise风格</li>
<li>可以用在浏览器端和node服务器端</li>
</ul>
</li>
</ol>
<h3 id="3-axios文档"><a href="#3-axios文档" class="headerlink" title="3.axios文档"></a>3.<a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios文档</a></h3><h1 id="五、react脚手架配置代理总结"><a href="#五、react脚手架配置代理总结" class="headerlink" title="五、react脚手架配置代理总结"></a>五、react脚手架配置代理总结</h1><h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><blockquote>
<p>在package.json中追加如下配置</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"proxy":"http://localhost:5000"</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li>优点：配置简单，前端请求资源时可以不加任何前缀。</li>
<li>缺点：不能配置多个代理。</li>
<li>工作方式：上述方式配置代理，当请求了3000不存在的资源时，那么该请求会转发给5000 （优先匹配前端资源）</li>
</ol>
<h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><ol>
<li><p>第一步：创建代理配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在src下创建配置文件：src&#x2F;setupProxy.js</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写setupProxy.js配置具体代理规则：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">'http-proxy-middleware'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">app</span>) </span>&#123;</span><br><span class="line">  app.use(</span><br><span class="line">    proxy(<span class="string">'/api1'</span>, &#123;  <span class="comment">//api1是需要转发的请求(所有带有/api1前缀的请求都会转发给5000)</span></span><br><span class="line">      target: <span class="string">'http://localhost:5000'</span>, <span class="comment">//配置转发目标地址(能返回数据的服务器地址)</span></span><br><span class="line">      changeOrigin: <span class="literal">true</span>, <span class="comment">//控制服务器接收到的请求头中host字段的值</span></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">      	changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000</span></span><br><span class="line"><span class="comment">      	changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:3000</span></span><br><span class="line"><span class="comment">      	changeOrigin默认值为false，但我们一般将changeOrigin值设为true</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      pathRewrite: &#123;<span class="string">'^/api1'</span>: <span class="string">''</span>&#125; <span class="comment">//去除请求前缀，保证交给后台服务器的是正常请求地址(必须配置)</span></span><br><span class="line">    &#125;),</span><br><span class="line">    proxy(<span class="string">'/api2'</span>, &#123; </span><br><span class="line">      target: <span class="string">'http://localhost:5001'</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      pathRewrite: &#123;<span class="string">'^/api2'</span>: <span class="string">''</span>&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>说明：</p>
<ol>
<li><strong>优点</strong>：可以配置多个代理，可以灵活的控制请求是否走代理。</li>
<li><strong>缺点</strong>：配置繁琐，前端请求资源时必须加前缀。</li>
</ol>
<h1 id="六、消息订阅-发布机制"><a href="#六、消息订阅-发布机制" class="headerlink" title="六、消息订阅-发布机制"></a>六、消息订阅-发布机制</h1><ol>
<li>工具库: PubSubJS</li>
<li>下载: npm install pubsub-js –save</li>
<li>使用: </li>
</ol>
<p>— 1)import PubSub from ‘pubsub-js’ //引入<br>— 2)PubSub.subscribe(‘delete’, function(data){ }); //订阅<br>— 3)PubSub.publish(‘delete’, data) //发布消息</p>
<h1 id="七、扩展：Fetch"><a href="#七、扩展：Fetch" class="headerlink" title="七、扩展：Fetch"></a>七、扩展：Fetch</h1><p><strong>特点</strong></p>
<ol>
<li>fetch: 原生函数，不再使用XmlHttpRequest对象提交ajax请求</li>
<li>老版本浏览器可能不支持<h3 id="github搜索案例相关知识点"><a href="#github搜索案例相关知识点" class="headerlink" title="github搜索案例相关知识点"></a><code>github搜索案例相关知识点</code></h3><pre><code>1.设计状态时要考虑全面，例如带有网络请求的组件，要考虑请求失败怎么办。
2.ES6小知识点：解构赋值+重命名
            let obj = {a:{b:1}}
            const {a} = obj; //传统解构赋值
            const {a:{b}} = obj; //连续解构赋值
            const {a:{b:value}} = obj; //连续解构赋值+重命名
3.消息订阅与发布机制
            1.先订阅，再发布（理解：有一种隔空对话的感觉）
            2.适用于任意组件间通信
            3.要在组件的componentWillUnmount中取消订阅
4.fetch发送请求（关注分离的设计思想）
            try {
                const response= await fetch(`/api1/search/users2?q=${keyWord}`)
                const data = await response.json()
                console.log(data);
            } catch (error) {
                console.log(&apos;请求出错&apos;,error);
            }</code></pre></li>
</ol>
<h1 id="八、-关于的路由笔记"><a href="#八、-关于的路由笔记" class="headerlink" title="八、  关于的路由笔记"></a>八、  <a href="https://blog.csdn.net/qq_43817164/article/details/113359800" target="_blank" rel="noopener">关于的路由笔记</a></h1><h1 id="九、redux"><a href="#九、redux" class="headerlink" title="九、redux"></a>九、redux</h1><h3 id="1-redux理解"><a href="#1-redux理解" class="headerlink" title="1.redux理解"></a>1.redux理解</h3><ol>
<li>学习文档<ul>
<li><a href="https://redux.js.org/" target="_blank" rel="noopener">英文文档</a></li>
<li><a href="http://www.redux.org.cn/" target="_blank" rel="noopener">中文文档</a></li>
<li><a href="https://github.com/reactjs/redux" target="_blank" rel="noopener">Github</a></li>
</ul>
</li>
<li>redux是什么<ol>
<li>redux是一个专门用于做状态管理的JS库(不是react插件库)。</li>
<li>它可以用在react, angular, vue等项目中, 但基本与react配合使用。</li>
<li>作用: 集中式管理react应用中多个组件共享的状态。</li>
</ol>
</li>
<li>什么情况下需要使用redux<ol>
<li>某个组件的状态，需要让其他组件可以随时拿到（共享）。</li>
<li>一个组件需要改变另一个组件的状态（通信）。</li>
<li>总体原则：能不用就不用, 如果不用比较吃力才考虑使用。</li>
</ol>
</li>
<li>redux工作流程<br><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210129222045253.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><h3 id="2-redux的三个核心概念"><a href="#2-redux的三个核心概念" class="headerlink" title="2. redux的三个核心概念"></a>2. redux的三个核心概念</h3></li>
<li><strong>action</strong> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>	动作的对象</span><br><span class="line"><span class="number">2.</span>	包含<span class="number">2</span>个属性</span><br></pre></td></tr></table></figure>
    type：标识属性, 值为字符串, 唯一, 必要属性<br>    data：数据属性, 值类型任意, 可选属性</li>
<li>例子：{ type: ‘ADD_STUDENT’,data:{name: ‘tom’,age:18} }</li>
<li><strong>reducer</strong></li>
<li>用于初始化状态、加工状态。</li>
<li>加工时，根据旧的state和action， 产生新的state的纯函数。</li>
<li><strong>store</strong> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>	将state、action、reducer联系在一起的对象</span><br><span class="line"><span class="number">2.</span>	如何得到此对象?</span><br><span class="line">    <span class="number">1</span>)	<span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line">    <span class="number">2</span>)	<span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducers'</span></span><br><span class="line">    <span class="number">3</span>)	<span class="keyword">const</span> store = createStore(reducer)</span><br><span class="line"><span class="number">3.</span>	此对象的功能?</span><br><span class="line">    <span class="number">1</span>)	getState(): 得到state</span><br><span class="line">    <span class="number">2</span>)	dispatch(action): 分发action, 触发reducer调用, 产生新的state</span><br><span class="line">    <span class="number">3</span>)	subscribe(listener): 注册监听, 当产生了新的state时, 自动调用</span><br></pre></td></tr></table></figure>
<h3 id="3-redux的核心API"><a href="#3-redux的核心API" class="headerlink" title="3.redux的核心API"></a>3.redux的核心API</h3></li>
<li><strong>createstore()</strong><br> 作用：创建包含指定reducer的store对象</li>
<li><strong>store对象</strong></li>
</ol>
<ul>
<li>作用: redux库最核心的管理对象</li>
<li>它内部维护着:<blockquote>
<p>   state<br>   reducer</p>
</blockquote>
</li>
</ul>
<ol start="3">
<li>核心方法:<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;	getState()</span><br><span class="line">&gt;	dispatch(action)</span><br><span class="line">&gt;	subscribe(listener)</span><br></pre></td></tr></table></figure></li>
<li><strong>具体编码:</strong><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">store.getState()</span><br><span class="line">store.dispatch(&#123;<span class="attr">type</span>:<span class="string">'INCREMENT'</span>, number&#125;)</span><br><span class="line">    store.subscribe(render)</span><br></pre></td></tr></table></figure></li>
<li><strong>applyMiddleware()</strong><pre><code>`作用：应用上基于redux的中间件(插件库)`</code></pre></li>
<li><strong>combineReducers()</strong><pre><code>`作用：合并多个reducer函数`</code></pre></li>
</ol>
<h2 id="1-求和案例-redux精简版"><a href="#1-求和案例-redux精简版" class="headerlink" title="1.求和案例_redux精简版"></a>1.求和案例_redux精简版</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>).去除Count组件自身的状态</span><br><span class="line">(<span class="number">2</span>).src下建立:</span><br><span class="line">                -redux</span><br><span class="line">                    -store.js</span><br><span class="line">                    -count_reducer.js</span><br><span class="line"></span><br><span class="line">(<span class="number">3</span>).store.js：</span><br><span class="line">            <span class="number">1</span>).引入redux中的createStore函数，创建一个store</span><br><span class="line">            <span class="number">2</span>).createStore调用时要传入一个为其服务的reducer</span><br><span class="line">            <span class="number">3</span>).记得暴露store对象</span><br><span class="line"></span><br><span class="line">(<span class="number">4</span>).count_reducer.js：</span><br><span class="line">            <span class="number">1</span>).reducer的本质是一个函数，接收：preState,action，返回加工后的状态</span><br><span class="line">            <span class="number">2</span>).reducer有两个作用：初始化状态，加工状态</span><br><span class="line">            <span class="number">3</span>).reducer被第一次调用时，是store自动触发的，</span><br><span class="line">                            传递的preState是<span class="literal">undefined</span>,</span><br><span class="line">                            传递的action是:&#123;<span class="attr">type</span>:<span class="string">'@@REDUX/INIT_a.2.b.4&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(5).在index.js中监测store中状态的改变，一旦发生改变重新渲染&lt;App/&gt;</span></span><br><span class="line"><span class="string">        备注：redux只负责管理状态，至于状态的改变驱动着页面的展示，要靠我们自己写。</span></span><br></pre></td></tr></table></figure>

<h2 id="2-求和案例-redux完整版"><a href="#2-求和案例-redux完整版" class="headerlink" title="2.求和案例_redux完整版"></a>2.求和案例_redux完整版</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">新增文件：</span><br><span class="line">    <span class="number">1.</span>count_action.js 专门用于创建action对象</span><br><span class="line">    <span class="number">2.</span>constant.js 放置容易写错的type值</span><br></pre></td></tr></table></figure>

<h2 id="3-求和案例-redux异步action版"><a href="#3-求和案例-redux异步action版" class="headerlink" title="3.求和案例_redux异步action版"></a>3.求和案例_redux异步action版</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>).明确：延迟的动作不想交给组件自身，想交给action</span><br><span class="line">(<span class="number">2</span>).何时需要异步action：想要对状态进行操作，但是具体的数据靠异步任务返回。</span><br><span class="line">(<span class="number">3</span>).具体编码：</span><br><span class="line">        <span class="number">1</span>).yarn add redux-thunk，并配置在store中</span><br><span class="line">        <span class="number">2</span>).创建action的函数不再返回一般对象，而是一个函数，该函数中写异步任务。</span><br><span class="line">        <span class="number">3</span>).异步任务有结果后，分发一个同步的action去真正操作数据。</span><br><span class="line">(<span class="number">4</span>).备注：异步action不是必须要写的，完全可以自己等待异步任务的结果了再去分发同步action。</span><br></pre></td></tr></table></figure>



<h2 id="4-求和案例-react-redux基本使用"><a href="#4-求和案例-react-redux基本使用" class="headerlink" title="4.求和案例_react-redux基本使用"></a>4.求和案例_react-redux基本使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>).明确两个概念：</span><br><span class="line">            <span class="number">1</span>).UI组件:不能使用任何redux的api，只负责页面的呈现、交互等。</span><br><span class="line">            <span class="number">2</span>).容器组件：负责和redux通信，将结果交给UI组件。</span><br><span class="line">(<span class="number">2</span>).如何创建一个容器组件————靠react-redux 的 connect函数</span><br><span class="line">                connect(mapStateToProps,mapDispatchToProps)(UI组件)</span><br><span class="line">                    -mapStateToProps:映射状态，返回值是一个对象</span><br><span class="line">                    -mapDispatchToProps:映射操作状态的方法，返回值是一个对象</span><br><span class="line">(<span class="number">3</span>).备注<span class="number">1</span>：容器组件中的store是靠props传进去的，而不是在容器组件中直接引入</span><br><span class="line">(<span class="number">4</span>).备注<span class="number">2</span>：mapDispatchToProps，也可以是一个对象</span><br></pre></td></tr></table></figure>

<h2 id="5-求和案例-react-redux优化"><a href="#5-求和案例-react-redux优化" class="headerlink" title="5.求和案例_react-redux优化"></a>5.求和案例_react-redux优化</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>).容器组件和UI组件整合一个文件</span><br><span class="line">(<span class="number">2</span>).无需自己给容器组件传递store，给&lt;App/&gt;包裹一个&lt;Provider store=&#123;store&#125;&gt;即可。</span><br><span class="line">(<span class="number">3</span>).使用了react-redux后也不用再自己检测redux中状态的改变了，容器组件可以自动完成这个工作。</span><br><span class="line">(<span class="number">4</span>).mapDispatchToProps也可以简单的写成一个对象</span><br><span class="line">(<span class="number">5</span>).一个组件要和redux“打交道”要经过哪几步？</span><br><span class="line">        (<span class="number">1</span>).定义好UI组件---不暴露</span><br><span class="line">        (<span class="number">2</span>).引入connect生成一个容器组件，并暴露，写法如下：</span><br><span class="line">                connect(</span><br><span class="line">                    state =&gt; (&#123;<span class="attr">key</span>:value&#125;), <span class="comment">//映射状态</span></span><br><span class="line">                    &#123;<span class="attr">key</span>:xxxxxAction&#125; <span class="comment">//映射操作状态的方法</span></span><br><span class="line">                )(UI组件)</span><br><span class="line">        (<span class="number">4</span>).在UI组件中通过<span class="keyword">this</span>.props.xxxxxxx读取和操作状态</span><br></pre></td></tr></table></figure>


<h2 id="6-求和案例-react-redux数据共享版"><a href="#6-求和案例-react-redux数据共享版" class="headerlink" title="6.求和案例_react-redux数据共享版"></a>6.求和案例_react-redux数据共享版</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>).定义一个Pserson组件，和Count组件通过redux共享数据。</span><br><span class="line">(<span class="number">2</span>).为Person组件编写：reducer、action，配置constant常量。</span><br><span class="line">(<span class="number">3</span>).重点：Person的reducer和Count的Reducer要使用combineReducers进行合并，</span><br><span class="line">        合并后的总状态是一个对象！！！</span><br><span class="line">(<span class="number">4</span>).交给store的是总reducer，最后注意在组件中取出状态的时候，记得“取到位”。</span><br></pre></td></tr></table></figure>
<h2 id="7-求和案例-react-redux开发者工具的使用"><a href="#7-求和案例-react-redux开发者工具的使用" class="headerlink" title="7.求和案例_react-redux开发者工具的使用"></a>7.求和案例_react-redux开发者工具的使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>).yarn add redux-devtools-extension</span><br><span class="line">(<span class="number">2</span>).store中进行配置</span><br><span class="line">        <span class="keyword">import</span> &#123;composeWithDevTools&#125; <span class="keyword">from</span> <span class="string">'redux-devtools-extension'</span></span><br><span class="line">        <span class="keyword">const</span> store = createStore(allReducer,composeWithDevTools(applyMiddleware(thunk)))</span><br></pre></td></tr></table></figure>
<h2 id="8-求和案例-react-redux最终版"><a href="#8-求和案例-react-redux最终版" class="headerlink" title="8.求和案例_react-redux最终版"></a>8.求和案例_react-redux最终版</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>).所有变量名字要规范，尽量触发对象的简写形式。</span><br><span class="line">(<span class="number">2</span>).reducers文件夹中，编写index.js专门用于汇总并暴露所有的reducer</span><br></pre></td></tr></table></figure>
<h2 id="9-react-redux使用hooks替代connect"><a href="#9-react-redux使用hooks替代connect" class="headerlink" title="9. react-redux使用hooks替代connect"></a>9. <a href="https://blog.csdn.net/waillyer/article/details/116479890?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-0&spm=1001.2101.3001.4242" target="_blank" rel="noopener">react-redux使用hooks替代connect</a></h2><h1 id="十-react-拓展"><a href="#十-react-拓展" class="headerlink" title="十.react-拓展"></a>十.<a href="https://blog.csdn.net/qq_43817164/article/details/113885317" target="_blank" rel="noopener">react-拓展</a></h1><h1 id="umi"><a href="#umi" class="headerlink" title="umi"></a>umi</h1><p><a href="https://umijs.org/zh-CN" target="_blank" rel="noopener">官网</a><br><a href="https://my.oschina.net/u/4447095/blog/3160700" target="_blank" rel="noopener">umi的connect用法</a></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:1442243445@qq.com">小小王</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/12/10/React/">http://yoursite.com/2020/12/10/React/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">Wang</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/React/">React</a></div><div class="post_share"><div class="social-share" data-image="/img/bg4.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/12/16/interaction/"><img class="prev-cover" data-src="/img/bg4.jpg" onerror="onerror=null;src='/'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">交互</div></div></a></div><div class="next-post pull-right"><a href="/2020/12/05/Draw/"><img class="next-cover" data-src="/img/bg5.jpg" onerror="onerror=null;src='/'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">绘制图形组件库</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 小小王</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>粤ICP备20054751</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><script src="js/move_mouse/script.js"></script><script src="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/js/pool.min.js"></script><script src="/js/down_mouse/love.js"></script></body></html>