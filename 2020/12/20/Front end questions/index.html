<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>前端面试题 | Wang</title><meta name="description" content="前端学科面试题1：HTML页面进行重绘和重排(回流)1.1 问题分析​    该问题主要考核  html中的优化 与 重点概念 1.2 核心问题讲解浏览器的运行机制： 构建DOM树（parse）：渲染引擎解析HTML文档，首先将标签转换成DOM树中的DOM node（包括js生成的标签）生成内容树（Content Tree&#x2F;DOM Tree）； 构建渲染树（construct）：解析对应的CSS样"><meta name="keywords" content="Front end questions"><meta name="author" content="小小王,1442243445@qq.com"><meta name="copyright" content="小小王"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/Banq-1.ico"><link rel="canonical" href="http://yoursite.com/2020/12/20/Front%20end%20questions/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="前端面试题"><meta property="og:url" content="http://yoursite.com/2020/12/20/Front%20end%20questions/"><meta property="og:site_name" content="Wang"><meta property="og:description" content="前端学科面试题1：HTML页面进行重绘和重排(回流)1.1 问题分析​    该问题主要考核  html中的优化 与 重点概念 1.2 核心问题讲解浏览器的运行机制： 构建DOM树（parse）：渲染引擎解析HTML文档，首先将标签转换成DOM树中的DOM node（包括js生成的标签）生成内容树（Content Tree&#x2F;DOM Tree）； 构建渲染树（construct）：解析对应的CSS样"><meta property="og:image" content="http://yoursite.com/img/bg4.jpg"><meta property="article:published_time" content="2020-12-20T01:28:24.000Z"><meta property="article:modified_time" content="2021-06-27T03:28:22.000Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="KOA" href="http://yoursite.com/2020/12/25/KOA/"><link rel="next" title="交互" href="http://yoursite.com/2020/12/16/interaction/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="/css/move_mouse/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/iconfont.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/pool.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">73</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">66</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">51</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前端学科面试题"><span class="toc-number">1.</span> <span class="toc-text">前端学科面试题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1：HTML页面进行重绘和重排-回流"><span class="toc-number">1.0.1.</span> <span class="toc-text">1：HTML页面进行重绘和重排(回流)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-问题分析"><span class="toc-number">1.0.1.1.</span> <span class="toc-text">1.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-核心问题讲解"><span class="toc-number">1.0.1.2.</span> <span class="toc-text">1.2 核心问题讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#浏览器的运行机制："><span class="toc-number">1.0.1.2.1.</span> <span class="toc-text">浏览器的运行机制：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-问题扩展"><span class="toc-number">1.0.1.3.</span> <span class="toc-text">1.3 问题扩展</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-结合项目中使用"><span class="toc-number">1.0.1.4.</span> <span class="toc-text">1.4 结合项目中使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2：网页验证码的作用-网页中几种常见验证码-介绍-技术"><span class="toc-number">1.0.2.</span> <span class="toc-text">2：网页验证码的作用 *网页中几种常见验证码(介绍+技术)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-问题分析"><span class="toc-number">1.0.2.1.</span> <span class="toc-text">2.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-核心问题讲解"><span class="toc-number">1.0.2.2.</span> <span class="toc-text">2. 2 核心问题讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-问题扩展"><span class="toc-number">1.0.2.3.</span> <span class="toc-text">2.3 问题扩展</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-结合项目中使用"><span class="toc-number">1.0.2.4.</span> <span class="toc-text">2.4  结合项目中使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3：ES6的类Class"><span class="toc-number">1.0.3.</span> <span class="toc-text">3：ES6的类Class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4：对async、await的理解，内部原理"><span class="toc-number">1.0.4.</span> <span class="toc-text">4：对async、await的理解，内部原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-问题分析"><span class="toc-number">1.0.4.1.</span> <span class="toc-text">4.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-核心问题讲解-有代码"><span class="toc-number">1.0.4.2.</span> <span class="toc-text">4. 2 核心问题讲解-有代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-问题扩展"><span class="toc-number">1.0.4.3.</span> <span class="toc-text">4.3 问题扩展</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-结合项目中使用"><span class="toc-number">1.0.4.4.</span> <span class="toc-text">4.4  结合项目中使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5：TS在项目中的使用"><span class="toc-number">1.0.5.</span> <span class="toc-text">5：TS在项目中的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-问题分析"><span class="toc-number">1.0.5.1.</span> <span class="toc-text">5.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-核心问题讲解"><span class="toc-number">1.0.5.2.</span> <span class="toc-text">5. 2 核心问题讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-问题扩展"><span class="toc-number">1.0.5.3.</span> <span class="toc-text">5.3 问题扩展</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-结合项目中使用"><span class="toc-number">1.0.5.4.</span> <span class="toc-text">5.4  结合项目中使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6：ES6装饰器的使用"><span class="toc-number">1.0.6.</span> <span class="toc-text">6：ES6装饰器的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-问题分析"><span class="toc-number">1.0.6.1.</span> <span class="toc-text">6.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-核心问题讲解"><span class="toc-number">1.0.6.2.</span> <span class="toc-text">6. 2 核心问题讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-问题扩展"><span class="toc-number">1.0.6.3.</span> <span class="toc-text">6.3 问题扩展</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-结合项目中使用"><span class="toc-number">1.0.6.4.</span> <span class="toc-text">6.4  结合项目中使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7：事件执行的机制-eventLoop"><span class="toc-number">1.0.7.</span> <span class="toc-text">7：事件执行的机制(eventLoop)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-问题分析"><span class="toc-number">1.0.7.1.</span> <span class="toc-text">7.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-核心问题讲解"><span class="toc-number">1.0.7.2.</span> <span class="toc-text">7. 2 核心问题讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-1-Js-代码执行机制"><span class="toc-number">1.0.7.2.1.</span> <span class="toc-text">7.2.1 Js 代码执行机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-2-宏任务与微任务"><span class="toc-number">1.0.7.2.2.</span> <span class="toc-text">7.2.2 宏任务与微任务</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-问题扩展"><span class="toc-number">1.0.7.3.</span> <span class="toc-text">7.3 问题扩展</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-4-结合项目中使用"><span class="toc-number">1.0.7.4.</span> <span class="toc-text">7.4  结合项目中使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8：flex布局"><span class="toc-number">1.0.8.</span> <span class="toc-text">8：flex布局</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-问题分析-1"><span class="toc-number">1.0.8.1.</span> <span class="toc-text">2.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-核心问题讲解-1"><span class="toc-number">1.0.8.2.</span> <span class="toc-text">2. 2 核心问题讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-问题扩展-1"><span class="toc-number">1.0.8.3.</span> <span class="toc-text">2.3 问题扩展</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-结合项目中使用-1"><span class="toc-number">1.0.8.4.</span> <span class="toc-text">2.4  结合项目中使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9：移动端部署–网站部署"><span class="toc-number">1.0.9.</span> <span class="toc-text">9：移动端部署–网站部署</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-问题分析"><span class="toc-number">1.0.9.1.</span> <span class="toc-text">9.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-核心问题讲解"><span class="toc-number">1.0.9.2.</span> <span class="toc-text">9. 2 核心问题讲解</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10：cookie"><span class="toc-number">1.0.10.</span> <span class="toc-text">10：cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-问题分析-2"><span class="toc-number">1.0.10.1.</span> <span class="toc-text">2.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-核心问题讲解-2"><span class="toc-number">1.0.10.2.</span> <span class="toc-text">2. 2 核心问题讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-问题扩展-2"><span class="toc-number">1.0.10.3.</span> <span class="toc-text">2.3 问题扩展</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11：浏览器缓存原理"><span class="toc-number">1.0.11.</span> <span class="toc-text">11：浏览器缓存原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-问题分析-3"><span class="toc-number">1.0.11.1.</span> <span class="toc-text">2.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-核心问题讲解-3"><span class="toc-number">1.0.11.2.</span> <span class="toc-text">2. 2 核心问题讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-问题扩展-3"><span class="toc-number">1.0.11.3.</span> <span class="toc-text">2.3 问题扩展</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12：h5离线存储-manifest"><span class="toc-number">1.0.12.</span> <span class="toc-text">12：h5离线存储 manifest</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#12-1-问题分析"><span class="toc-number">1.0.12.1.</span> <span class="toc-text">12.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-2-核心问题讲解"><span class="toc-number">1.0.12.2.</span> <span class="toc-text">12. 2 核心问题讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-3-问题扩展"><span class="toc-number">1.0.12.3.</span> <span class="toc-text">12.3 问题扩展</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13：websocket实现原理"><span class="toc-number">1.0.13.</span> <span class="toc-text">13：websocket实现原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#13-1-问题分析"><span class="toc-number">1.0.13.1.</span> <span class="toc-text">13.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-2-核心问题讲解"><span class="toc-number">1.0.13.2.</span> <span class="toc-text">13. 2 核心问题讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-3-问题扩展"><span class="toc-number">1.0.13.3.</span> <span class="toc-text">13.3 问题扩展</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14：移动端的兼容（安卓和iOS手机）"><span class="toc-number">1.0.14.</span> <span class="toc-text">14：移动端的兼容（安卓和iOS手机）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15：Hybrid项目开发流程"><span class="toc-number">1.0.15.</span> <span class="toc-text">15：Hybrid项目开发流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、混合开发概述"><span class="toc-number">1.0.15.1.</span> <span class="toc-text">1、混合开发概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2、移动应用开发的三种方式比较"><span class="toc-number">1.0.15.2.</span> <span class="toc-text">2、移动应用开发的三种方式比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3、混合开发应用场景"><span class="toc-number">1.0.15.3.</span> <span class="toc-text">3、混合开发应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16：uni-app框架–看笔记"><span class="toc-number">1.0.16.</span> <span class="toc-text">16：uni-app框架–看笔记</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17：H5和原生APP的交互"><span class="toc-number">1.0.17.</span> <span class="toc-text">17：H5和原生APP的交互</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-问题分析-4"><span class="toc-number">1.0.17.1.</span> <span class="toc-text">2.1 问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-核心问题讲解-4"><span class="toc-number">1.0.17.2.</span> <span class="toc-text">2. 2 核心问题讲解</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue部分相关的面试题"><span class="toc-number">2.</span> <span class="toc-text">Vue部分相关的面试题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vuex怎么合理规范管理数据-及mutations和actions区别"><span class="toc-number">2.1.</span> <span class="toc-text">vuex怎么合理规范管理数据,及mutations和actions区别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mutations和-actions-的区别"><span class="toc-number">2.1.1.</span> <span class="toc-text">mutations和 actions 的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vuex模块化module管理-使用的时候有注意事项"><span class="toc-number">2.2.</span> <span class="toc-text">vuex模块化module管理,使用的时候有注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#封装Vue组件的步骤"><span class="toc-number">2.3.</span> <span class="toc-text">封装Vue组件的步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue中的data是以函数的形式还是对象的形式表示"><span class="toc-number">2.4.</span> <span class="toc-text">Vue中的data是以函数的形式还是对象的形式表示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用Proxy代理跨域"><span class="toc-number">2.5.</span> <span class="toc-text">使用Proxy代理跨域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue中的watch如何深度监听某个对象"><span class="toc-number">2.6.</span> <span class="toc-text">Vue中的watch如何深度监听某个对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-keep-alive使用"><span class="toc-number">2.7.</span> <span class="toc-text">Vue keep-alive使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue的双向数据绑定原理是什么"><span class="toc-number">2.8.</span> <span class="toc-text">vue的双向数据绑定原理是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#页面刷新了之后vuex中的数据消失怎么解决"><span class="toc-number">2.9.</span> <span class="toc-text">页面刷新了之后vuex中的数据消失怎么解决</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue做服务端渲染"><span class="toc-number">2.10.</span> <span class="toc-text">vue做服务端渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#为什么使用nuxt-js"><span class="toc-number">2.10.0.0.1.</span> <span class="toc-text">为什么使用nuxt.js?</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-router传参"><span class="toc-number">2.11.</span> <span class="toc-text">vue-router传参</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#前端鉴权一般思路"><span class="toc-number">2.12.</span> <span class="toc-text">前端鉴权一般思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue数据流-和-react数据流"><span class="toc-number">2.13.</span> <span class="toc-text">vue数据流 和 react数据流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#如何在组件中监听Vuex的数据变化"><span class="toc-number">2.14.</span> <span class="toc-text">如何在组件中监听Vuex的数据变化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue单页面和多页面的使用"><span class="toc-number">2.15.</span> <span class="toc-text">Vue单页面和多页面的使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#项目必知必会"><span class="toc-number">3.</span> <span class="toc-text">项目必知必会</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#问题列表"><span class="toc-number">4.</span> <span class="toc-text">问题列表</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#面试题详解"><span class="toc-number">5.</span> <span class="toc-text">面试题详解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#理解promise"><span class="toc-number">5.1.</span> <span class="toc-text">理解promise</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#promise-实践"><span class="toc-number">5.2.</span> <span class="toc-text">promise 实践</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#如何实现链式调用"><span class="toc-number">5.3.</span> <span class="toc-text">如何实现链式调用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#promise-单元测试"><span class="toc-number">5.4.</span> <span class="toc-text">promise 单元测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#promise-源码"><span class="toc-number">5.5.</span> <span class="toc-text">promise 源码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目api-请求模块封装"><span class="toc-number">5.6.</span> <span class="toc-text">项目api 请求模块封装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#公司角色及职责"><span class="toc-number">5.7.</span> <span class="toc-text">公司角色及职责</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目缺陷管理"><span class="toc-number">5.8.</span> <span class="toc-text">项目缺陷管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码管理"><span class="toc-number">5.9.</span> <span class="toc-text">代码管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目打包"><span class="toc-number">5.10.</span> <span class="toc-text">项目打包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常规登录流程"><span class="toc-number">5.11.</span> <span class="toc-text">常规登录流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目中权限管理"><span class="toc-number">5.12.</span> <span class="toc-text">项目中权限管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#根据数组构建树"><span class="toc-number">5.13.</span> <span class="toc-text">根据数组构建树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#树的遍历"><span class="toc-number">5.14.</span> <span class="toc-text">树的遍历</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#如何限制接口访问频次"><span class="toc-number">5.15.</span> <span class="toc-text">如何限制接口访问频次</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#前后端联调注意事项"><span class="toc-number">5.16.</span> <span class="toc-text">前后端联调注意事项</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#React-串讲"><span class="toc-number">6.</span> <span class="toc-text">React 串讲</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#问题列表-1"><span class="toc-number">6.1.</span> <span class="toc-text">问题列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#学习目标"><span class="toc-number">6.2.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题详解"><span class="toc-number">6.3.</span> <span class="toc-text">问题详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Redux-是如何将-State-注入到-React-组件上去"><span class="toc-number">6.3.1.</span> <span class="toc-text">1. Redux 是如何将 State 注入到 React 组件上去</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#问题分析"><span class="toc-number">6.3.1.1.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#问题详解-1"><span class="toc-number">6.3.1.2.</span> <span class="toc-text">问题详解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#答题思路"><span class="toc-number">6.3.1.3.</span> <span class="toc-text">答题思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#问题分析-1"><span class="toc-number">6.3.1.4.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#答题思路-1"><span class="toc-number">6.3.1.5.</span> <span class="toc-text">答题思路</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/bg4.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Wang</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">前端面试题</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-12-20 09:28:24"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-12-20</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2021-06-27 11:28:22"><i class="fas fa-history fa-fw"></i> 更新于 2021-06-27</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/Front-end-questions/">Front end questions</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="前端学科面试题"><a href="#前端学科面试题" class="headerlink" title="前端学科面试题"></a>前端学科面试题</h1><h3 id="1：HTML页面进行重绘和重排-回流"><a href="#1：HTML页面进行重绘和重排-回流" class="headerlink" title="1：HTML页面进行重绘和重排(回流)"></a>1：HTML页面进行重绘和重排(回流)</h3><h4 id="1-1-问题分析"><a href="#1-1-问题分析" class="headerlink" title="1.1 问题分析"></a>1.1 问题分析</h4><p>​    该问题主要考核  html中的优化 与 重点概念</p>
<h4 id="1-2-核心问题讲解"><a href="#1-2-核心问题讲解" class="headerlink" title="1.2 核心问题讲解"></a>1.2 核心问题讲解</h4><h5 id="浏览器的运行机制："><a href="#浏览器的运行机制：" class="headerlink" title="浏览器的运行机制："></a><strong>浏览器的运行机制：</strong></h5><ol>
<li>构建DOM树（parse）：渲染引擎解析HTML文档，首先将标签转换成DOM树中的DOM node（包括js生成的标签）<strong>生成内容树</strong>（Content Tree/DOM Tree）；</li>
<li>构建渲染树（construct）：解析对应的CSS样式文件信息（包括js生成的样式和外部css文件），而这些文件信息以及HTML中可见的指令（如<b></b>）<strong>，构建渲染树</strong>（Rendering Tree/Frame Tree）；render tree中每个NODE都有自己的style，而且render tree不包含隐藏的节点(比如display:none的节点，还有head节点)，因为这些节点不会用于呈现</li>
<li>布局渲染树（reflow/layout）：从根节点递归调用，计算每一个元素的大小、位置等，给出每个节点所应该在屏幕上出现的精确坐标；</li>
<li>绘制渲染树（paint/repaint）：遍历渲染树，使用UI 层来绘制每个节点。</li>
</ol>
<p><strong>重绘（repaint或redraw）</strong>：</p>
<p>​    当盒子的位置、大小以及其他属性，例如颜色、字体大小等都确定下来之后，浏览器便把这些原色都按照各自的特性绘制一遍，将内容呈现在页面上。</p>
<p><strong>重绘是指一个元素外观的改变</strong>所触发的浏览器行为，浏览器会根据元素的新属性重新绘制，使元素呈现新的外观。</p>
<p> 　　<strong>触发重绘的条件：改变元素外观属性。如：color，background-color等。****</strong></p>
<p><strong>注意：</strong>table及其内部元素可能需要多次计算才能确定好其在渲染树中节点的属性值，比同等元素要多花两倍时间，这就是我们尽量避免使用table布局页面的原因之一。</p>
<p><strong>重排（重构/回流/reflow）：</strong>当渲染树中的一部分(或全部)因为元素的<strong>规模尺寸，布局，隐藏等改变而需要重新构建, 这就称为回流(reflow)</strong>。每个页面至少需要一次回流，就是在页面第一次加载的时候。</p>
<p><strong>重绘和重排的关系</strong>：在回流的时候，浏览器会使渲染树中受到影响的部分失效，并重新构造这部分渲染树，完成回流后，浏览器会重新绘制受影响的部分到屏幕中，该过程称为重绘。</p>
<p>　　　　　　　　　　所以，<strong>重排必定会引发重绘</strong>，但重绘不一定会引发重排。</p>
<p> 　　<strong>触发重排的条件：任何页面布局和几何属性的改变都会触发重排，比如：</strong></p>
<p>　　1、页面渲染初始化；(无法避免)</p>
<p>　　2、添加或删除可见的DOM元素；</p>
<p>　　3、元素位置的改变，或者使用动画；</p>
<p>　　4、元素尺寸的改变——大小，外边距，边框；</p>
<p>　　5、浏览器窗口尺寸的变化（resize事件发生时）；</p>
<p>　　6、填充内容的改变，比如文本的改变或图片大小改变而引起的计算值宽度和高度的改变；</p>
<p>　　7、读取某些元素属性：（offsetLeft/Top/Height/Width,　clientTop/Left/Width/Height,　scrollTop/Left/Width/Height,　width/height,　getComputedStyle(),　currentStyle(IE)　)</p>
<p><strong>重绘重排的代价：耗时，导致浏览器卡慢。****</strong></p>
<h4 id="1-3-问题扩展"><a href="#1-3-问题扩展" class="headerlink" title="1.3 问题扩展"></a>1.3 问题扩展</h4><p><strong>优化：</strong>　　</p>
<p>1、浏览器自己的优化：浏览器会维护1个队列，把所有会引起回流、重绘的操作放入这个队列，等队列中的操作到了一定的数量或者到了一定的时间间隔，浏览器就会flush队列，进行一个批处理。这样就会让多次的回流、重绘变成一次回流重绘。</p>
<p>2、我们要注意的优化：我们要减少重绘和重排就是要减少对渲染树的操作，则我们可以合并多次的DOM和样式的修改。并减少对style样式的请求。</p>
<p>（1）<strong>直接改变元素的className</strong></p>
<p>（2）display：none；先设置元素为display：none；然后进行页面布局等操作；设置完成后将元素设置为display：block；这样的话就只引发两次重绘和重排；</p>
<p>（3）使用cloneNode(true or false) 和 replaceChild 技术，引发一次回流和重绘；</p>
<p>（4）<strong>将需要多次重排的元素，position属性设为absolute或fixed</strong>，元素脱离了文档流，它的变化不会影响到其他元素；</p>
<p>（5）如果需要创建多个DOM节点，可以使用DocumentFragment<strong>创建完后一次性的加入document；</strong></p>
<h4 id="1-4-结合项目中使用"><a href="#1-4-结合项目中使用" class="headerlink" title="1.4 结合项目中使用"></a>1.4 结合项目中使用</h4><p>代码例子</p>
<p><strong>// 举个例子  这么一个思路 建议不要边循环边渲染</strong> </p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> li = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>);</span><br><span class="line"></span><br><span class="line">    li.innerHTML = <span class="string">'apple'</span>+i;</span><br><span class="line"></span><br><span class="line">    fragment.appendChild(li);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'fruit'</span>).appendChild(fragment);</span><br></pre></td></tr></table></figure>

<h3 id="2：网页验证码的作用-网页中几种常见验证码-介绍-技术"><a href="#2：网页验证码的作用-网页中几种常见验证码-介绍-技术" class="headerlink" title="2：网页验证码的作用 *网页中几种常见验证码(介绍+技术)"></a>2：网页验证码的作用 *网页中几种常见验证码(介绍+技术)</h3><h4 id="2-1-问题分析"><a href="#2-1-问题分析" class="headerlink" title="2.1 问题分析"></a>2.1 问题分析</h4><p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210315091420834.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210315091431701.png" alt="在这里插入图片描述"></p>
<h4 id="2-2-核心问题讲解"><a href="#2-2-核心问题讲解" class="headerlink" title="2. 2 核心问题讲解"></a>2. 2 核心问题讲解</h4><p>作用：</p>
<p>1  验证码是目前大多网站所支持并使用于注册登录的。就在于其作用能有效<strong>防止恶意登录注册</strong>，验证码每次都不同,</p>
<p>这就可以排除,用其他病毒或者软件自动申请用户及自动登陆.有效防止这种问题。</p>
<p>2  短信验证码等可以验证用户的合法性</p>
<h4 id="2-3-问题扩展"><a href="#2-3-问题扩展" class="headerlink" title="2.3 问题扩展"></a>2.3 问题扩展</h4><p>   这些功能怎么做呢？</p>
<p>​     1 智能选图  文字点选   短信  滑动 等一般  都是购买的服务</p>
<p>​     2 图片文字验证码  这个 后台可以做 比如 php  java等  当然也可以去购买</p>
<p> 总之：他和后端关系很大  基本 对于前端来说  就是  发送ajax 就行</p>
<h4 id="2-4-结合项目中使用"><a href="#2-4-结合项目中使用" class="headerlink" title="2.4  结合项目中使用"></a>2.4  结合项目中使用</h4><p> 比如 短信  聚合  <a href="https://www.juhe.cn/" target="_blank" rel="noopener">https://www.juhe.cn/</a></p>
<p>​         1 前端 点击发送验证码  提交手机 到后台 </p>
<p>​          2  后台 拿到前端发来的手机  调用购买的  短信接口 就可以发送验证码到手机上了</p>
<p>   比如 滑动验证码 极验  <a href="https://www.geetest.com/Sensebot?utm_campaign=sem%E8%A1%8C%E4%B8%BA%E9%AA%8C%E8%AF%81&bd_vid=9865356497840709924" target="_blank" rel="noopener">文档</a>     <a href="https://docs.geetest.com/install/deploy/client/web" target="_blank" rel="noopener">前端部署</a></p>
<p>​            购买后 前端只需要引入js文件  然后 按照文档 写上就行   </p>
<h3 id="3：ES6的类Class"><a href="#3：ES6的类Class" class="headerlink" title="3：ES6的类Class"></a>3：ES6的类Class</h3><p>​    es相关语法  let const等。。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function Person ()&#123;</span></span><br><span class="line">    <span class="comment">//   this.name='建林'</span></span><br><span class="line">    <span class="comment">//   this.age=18</span></span><br><span class="line">    <span class="comment">//   this.say=function()&#123;</span></span><br><span class="line">    <span class="comment">//     console.log('say方法')</span></span><br><span class="line">    <span class="comment">//   &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>()&#123;</span><br><span class="line">           <span class="keyword">this</span>.name=<span class="string">'建林'</span></span><br><span class="line">           <span class="keyword">this</span>.age=<span class="number">18</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        say() &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'say方法'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>()&#123;</span><br><span class="line">            <span class="keyword">super</span>();<span class="comment">// 继承必须写super 他就是父类 上面的那个 constructor</span></span><br><span class="line">           </span><br><span class="line">            <span class="keyword">this</span>.name=<span class="string">'思聪'</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        eat()&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'eat'</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> t1=<span class="keyword">new</span> Teacher()</span><br><span class="line">    <span class="built_in">console</span>.log(t1)</span><br></pre></td></tr></table></figure>

<h3 id="4：对async、await的理解，内部原理"><a href="#4：对async、await的理解，内部原理" class="headerlink" title="4：对async、await的理解，内部原理"></a>4：对async、await的理解，内部原理</h3><h4 id="4-1-问题分析"><a href="#4-1-问题分析" class="headerlink" title="4.1 问题分析"></a>4.1 问题分析</h4><p>​        考察 地狱回调  Promise  async 与await</p>
<h4 id="4-2-核心问题讲解-有代码"><a href="#4-2-核心问题讲解-有代码" class="headerlink" title="4. 2 核心问题讲解-有代码"></a>4. 2 核心问题讲解-有代码</h4><p><code>async</code>函数返回一个 Promise 对象，可以使用<code>then</code>方法添加回调函数。当函数执行的时候，一旦遇到<code>await</code>就会先返回，等到异步操作完成，再接着执行函数体内后面的语句。</p>
<p><a href="http://es6.ruanyifeng.com/#docs/async" target="_blank" rel="noopener">阮老师文档</a></p>
<h4 id="4-3-问题扩展"><a href="#4-3-问题扩展" class="headerlink" title="4.3 问题扩展"></a>4.3 问题扩展</h4><p><strong>内部原理</strong></p>
<p>async 函数是什么？一句话，<strong>它就是 Generator 函数的语法糖</strong>。</p>
<p>Generator 函数可以返回一系列的值，因为可以有任意多个yield。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> readFile = <span class="function"><span class="keyword">function</span> (<span class="params">fileName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      fs.readFile(fileName, <span class="function"><span class="keyword">function</span>(<span class="params">error, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (error) <span class="keyword">return</span> reject(error);</span><br><span class="line">        resolve(data);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> gen = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> f1 = <span class="keyword">yield</span> readFile(<span class="string">'/etc/fstab'</span>);</span><br><span class="line">    <span class="keyword">const</span> f2 = <span class="keyword">yield</span> readFile(<span class="string">'/etc/shells'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(f1.toString());</span><br><span class="line">    <span class="built_in">console</span>.log(f2.toString());</span><br><span class="line">  &#125;;</span><br><span class="line">  改造</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> asyncReadFile = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> f1 = <span class="keyword">await</span> readFile(<span class="string">'/etc/fstab'</span>);</span><br><span class="line">  <span class="keyword">const</span> f2 = <span class="keyword">await</span> readFile(<span class="string">'/etc/shells'</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(f1.toString());</span><br><span class="line">  <span class="built_in">console</span>.log(f2.toString());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="4-4-结合项目中使用"><a href="#4-4-结合项目中使用" class="headerlink" title="4.4  结合项目中使用"></a>4.4  结合项目中使用</h4><p> axios 请求 配合 async await  拿到数据</p>
<h3 id="5：TS在项目中的使用"><a href="#5：TS在项目中的使用" class="headerlink" title="5：TS在项目中的使用"></a>5：TS在项目中的使用</h3><h4 id="5-1-问题分析"><a href="#5-1-问题分析" class="headerlink" title="5.1 问题分析"></a>5.1 问题分析</h4><p>考察 了解 typescript</p>
<h4 id="5-2-核心问题讲解"><a href="#5-2-核心问题讲解" class="headerlink" title="5. 2 核心问题讲解"></a>5. 2 核心问题讲解</h4><p>TypeScript 是 JavaScript 的一个超集，支持 ECMAScript 6 标准。</p>
<p>TypeScript 由微软开发的自由和开源的编程语言。</p>
<p>TypeScript 设计目标是开发大型应用，它可以编译成纯 JavaScript，编译出来的 JavaScript 可以运行在任何浏览器上。</p>
<p>简单来说：typescript  比 javascript 有更严格的类型要求  </p>
<p><a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener">使用测试ts语法文档</a></p>
<h4 id="5-3-问题扩展"><a href="#5-3-问题扩展" class="headerlink" title="5.3 问题扩展"></a>5.3 问题扩展</h4><p>​    这样做的好处？</p>
<p>​        大家有类型的约束  就不会乱写 不同的值 大型项目中 bug就少</p>
<h4 id="5-4-结合项目中使用"><a href="#5-4-结合项目中使用" class="headerlink" title="5.4  结合项目中使用"></a>5.4  结合项目中使用</h4><pre><code>vue  react中都可以使用   简单看看 vue 项目中的使用 </code></pre><p>vue create脚手架生成 项目的时候 可以选择 typescript 那么你写代码 就要 严格限制类型了</p>
<pre><code>component/HellowWord.vue 组件  **msg!: string;**  确定msg非空       **msg?: string;**  msg可有可没有</code></pre> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, Prop, Vue &#125; <span class="keyword">from</span> <span class="string">'vue-property-decorator'</span>;</span><br><span class="line"><span class="keyword">import</span> Add <span class="keyword">from</span> <span class="string">'@/components/Add'</span></span><br><span class="line">@Component(&#123;</span><br><span class="line">  components:&#123;Add&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span><br><span class="line">  @Prop() private msg!: string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6：ES6装饰器的使用"><a href="#6：ES6装饰器的使用" class="headerlink" title="6：ES6装饰器的使用"></a>6：ES6装饰器的使用</h3><h4 id="6-1-问题分析"><a href="#6-1-问题分析" class="headerlink" title="6.1 问题分析"></a>6.1 问题分析</h4><p>  考察es6  比较抽象的 语法  </p>
<h4 id="6-2-核心问题讲解"><a href="#6-2-核心问题讲解" class="headerlink" title="6. 2 核心问题讲解"></a>6. 2 核心问题讲解</h4><p>装饰器  就是相当于 给 人 或者事  多加一些东西  就是 现实中装饰类似的意思 化妆打扮加衣服</p>
<p><strong>装饰器（Decorator）是一种与类（class）相关的语法，用来注释或修改类和类方法与属性。许多面向对象的语言都有这项功能</strong>。<strong>一般和类class相关  普通函数 不要使用</strong></p>
<p><strong>进入代码就会执行完成</strong> </p>
<p>装饰器是一种函数，写成<code>@ + 函数名</code>。它可以放在类和类方法的定义前面。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">装饰类Foo</span><br><span class="line">@frozen </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">  <span class="comment">//装饰method方法</span></span><br><span class="line">  @configurable(<span class="literal">false</span>)</span><br><span class="line">  method() &#123;&#125;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">//装饰yy方法</span></span><br><span class="line">  @throttle(<span class="number">500</span>)</span><br><span class="line">  yy() &#123;&#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-3-问题扩展"><a href="#6-3-问题扩展" class="headerlink" title="6.3 问题扩展"></a>6.3 问题扩展</h4><ol>
<li>修饰类  基本形式</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@decorator</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;&#125;</span><br><span class="line">A = decorator(A);</span><br><span class="line"><span class="comment">// decorator 是一个 函数 相当于调用它 给A 类 可以加上一些其他代码</span></span><br><span class="line"></span><br><span class="line">举例：</span><br><span class="line"></span><br><span class="line">@testable</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTestableClass</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testable</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  target.isTestable = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyTestableClass.isTestable <span class="comment">// true</span></span><br><span class="line"><span class="comment">//为它加上了静态属性isTestable。testable函数的参数target是MyTestableClass类本身。</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修饰的  复杂形式 多套一个函数 返回一个函数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//testable是一个Factory</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testable</span>(<span class="params">isTestable</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">    target.isTestable = isTestable;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@testable(<span class="literal">true</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTestableClass</span> </span>&#123;&#125;</span><br><span class="line">MyTestableClass.isTestable <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">@testable(<span class="literal">false</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;&#125;</span><br><span class="line">MyClass.isTestable <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>修饰 类方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">修饰器</span><br><span class="line">第一个参数是类的原型对象，是Person.prototype，修饰器的本意是要“修饰”类的实例，但是这个时候实例还没生成，	所以只能去修饰原型（这不同于类的修饰，那种情况时target参数指的是类本身）；</span><br><span class="line">第二个参数是所要修饰的属性名，</span><br><span class="line">第三个参数是该属性的描述对象。</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readonly</span>(<span class="params">target, name, descriptor</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// descriptor对象原来的值如下</span></span><br><span class="line">  <span class="comment">// &#123;</span></span><br><span class="line">   configurable:<span class="literal">false</span>,<span class="comment">//能否使用delete、能否需改属性特性、或能否修改访问器属性、，</span></span><br><span class="line">   									<span class="literal">false</span>为不可重新定义，默认值为<span class="literal">true</span></span><br><span class="line">    enumerable:<span class="literal">false</span>,<span class="comment">//对象属性是否可通过for-in循环，flase为不可循环，默认值为true</span></span><br><span class="line">    writable:<span class="literal">false</span>,<span class="comment">//对象属性是否可修改,flase为不可修改，默认值为true</span></span><br><span class="line">    value:<span class="string">'xiaoming'</span> <span class="comment">//对象属性的默认值</span></span><br><span class="line">  <span class="comment">// &#125;;</span></span><br><span class="line">  descriptor.writable = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">return</span> descriptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  @readonly</span><br><span class="line">  abc() &#123; <span class="built_in">console</span>.log(<span class="string">'我是person的abc函数'</span>) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>多个装饰器一起 </p>
<p>同一处的多个装饰器是按照洋葱模型，由外到内进入，再由内到外执行</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dec</span>(<span class="params">id</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'进入'</span>, id);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">target, property, descriptor</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'执行'</span>, id)</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</span><br><span class="line">    @dec(<span class="number">1</span>)</span><br><span class="line">    @dec(<span class="number">2</span>)</span><br><span class="line">    xxx()&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'xxx'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 进入 1</span></span><br><span class="line"><span class="comment">// 进入 2</span></span><br><span class="line"><span class="comment">// 执行 2</span></span><br><span class="line"><span class="comment">// 执行 1</span></span><br></pre></td></tr></table></figure>



<h4 id="6-4-结合项目中使用"><a href="#6-4-结合项目中使用" class="headerlink" title="6.4  结合项目中使用"></a>6.4  结合项目中使用</h4><p> vue  react中都可以使用   简单看看 vue 项目中的使用 </p>
<pre><code>component/Add.vue 组件  与  HelloWord组件</code></pre><h3 id="7：事件执行的机制-eventLoop"><a href="#7：事件执行的机制-eventLoop" class="headerlink" title="7：事件执行的机制(eventLoop)"></a>7：事件执行的机制(eventLoop)</h3><h4 id="7-1-问题分析"><a href="#7-1-问题分析" class="headerlink" title="7.1 问题分析"></a>7.1 问题分析</h4><p>考察  js 代码的执行过程  执行顺序</p>
<h4 id="7-2-核心问题讲解"><a href="#7-2-核心问题讲解" class="headerlink" title="7. 2 核心问题讲解"></a>7. 2 核心问题讲解</h4><p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210315100442538.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-fDwnfzXV-1615770728763)(./images/js事件队列.jpg)\]"></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210315100507118.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-1F3YGmQV-1615770728767)(./images/执行过程.png)\]"></p>
<h5 id="7-2-1-Js-代码执行机制"><a href="#7-2-1-Js-代码执行机制" class="headerlink" title="7.2.1 Js 代码执行机制"></a>7.2.1 Js 代码执行机制</h5><ul>
<li>所有同步任务都在主线程上的栈中执行。</li>
<li>主线程之外，还存在一个”任务队列”（task queue）。只要异步任务有了运行结果，就在”任务队列”之中放置一个事件。</li>
<li>一旦”栈”中的所有同步任务执行完毕，系统就会读取”任务队列”，选择出需要首先执行的任务（由浏览器决定，并不按序）。</li>
</ul>
<h5 id="7-2-2-宏任务与微任务"><a href="#7-2-2-宏任务与微任务" class="headerlink" title="7.2.2 宏任务与微任务"></a>7.2.2 宏任务与微任务</h5><ol>
<li>MacroTask（宏观Task） <strong>setTimeout, setInterval</strong>, , requestAnimationFrame, I/O</li>
<li>MicroTask（微观任务） process.nextTick, <strong>Promise</strong>, Object.observe, MutationObserver</li>
<li><strong>先同步 再取出第一个宏任务执行 所有的相关微任务总会在下一个宏任务之前全部执行完毕   如果遇见 就  先微后宏</strong></li>
</ol>
<h4 id="7-3-问题扩展"><a href="#7-3-问题扩展" class="headerlink" title="7.3 问题扩展"></a>7.3 问题扩展</h4><p>每办理完一个业务，柜员就会问当前的客户，是否还有其他需要办理的业务。<strong>*（检查还有没有微任务需要处理）*</strong><br>而客户明确告知说没有事情以后，柜员就去查看后边还有没有等着办理业务的人。<strong>*（结束本次宏任务、检查还有没有宏任务需要处理）*</strong></p>
<p><strong>题目</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'2'</span>);</span><br><span class="line">      <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'3'</span>);</span><br><span class="line">        resolve();</span><br><span class="line">      &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'4'</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'5'</span>);</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'6'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'7'</span>);</span><br><span class="line">      <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'8'</span>);</span><br><span class="line">        resolve();</span><br><span class="line">      &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'9'</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'10'</span>)</span><br><span class="line">    &#125;,<span class="number">0</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'11'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1 5 11 6 2 3 4 7 8 10 9</span></span><br><span class="line">    <span class="comment">// 第一个setTimeout宏任务结束之后，会去检查队列中是否有微任务存在，如果有的话先执行微任务。（微任务优先级高）</span></span><br></pre></td></tr></table></figure>

<h4 id="7-4-结合项目中使用"><a href="#7-4-结合项目中使用" class="headerlink" title="7.4  结合项目中使用"></a>7.4  结合项目中使用</h4><h3 id="8：flex布局"><a href="#8：flex布局" class="headerlink" title="8：flex布局"></a>8：flex布局</h3><h4 id="2-1-问题分析-1"><a href="#2-1-问题分析-1" class="headerlink" title="2.1 问题分析"></a>2.1 问题分析</h4><p>flex布局考察</p>
<h4 id="2-2-核心问题讲解-1"><a href="#2-2-核心问题讲解-1" class="headerlink" title="2. 2 核心问题讲解"></a>2. 2 核心问题讲解</h4><p>flex相关属性  记住常用的就行</p>
<h4 id="2-3-问题扩展-1"><a href="#2-3-问题扩展-1" class="headerlink" title="2.3 问题扩展"></a>2.3 问题扩展</h4><p>flex属性是flex-grow, flex-shrink 和 flex-basis的简写，默认值为0 1 auto。后两个属性可选。</p>
<p><strong>flex-grow ：</strong>flex-grow属性定义盒子的<strong>放大</strong>比例，默认为0 不放大  其他数字按比例放大</p>
<p><strong>flex-shrink：</strong>如果所有项目的flex-shrink属性都为1，当空间不足时，都将<strong>等比例缩小</strong>。如果一个项目的flex-shrink属性为0，其他项目都为1，则空间不足时，前者<strong>0的不缩小 其他缩小</strong></p>
<p><strong>flex-basis</strong>属性定义了在分配多余空间之前，项目占据的主轴空间（main size）提前写的宽高大小。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为auto，即项目的本来大小。可以写px</p>
<p>.item{</p>
<p>​    flex:none|[&lt;’flex-grow’&gt;&lt;’flex-shrink’&gt;?||&lt;’flex-basis’&gt;]</p>
<p> }</p>
<p>该属性有两个快捷值：auto (1 1 auto) 和 none (0 0 auto)。</p>
<p>建议优先使用这个属性，而不是单独写三个分离的属性，因为浏览器会推算相关值。</p>
<h4 id="2-4-结合项目中使用-1"><a href="#2-4-结合项目中使用-1" class="headerlink" title="2.4  结合项目中使用"></a>2.4  结合项目中使用</h4><p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210315104905353.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p> 盒子 高 125px</p>
<p>图片 35px</p>
<h3 id="9：移动端部署–网站部署"><a href="#9：移动端部署–网站部署" class="headerlink" title="9：移动端部署–网站部署"></a>9：移动端部署–网站部署</h3><h4 id="9-1-问题分析"><a href="#9-1-问题分析" class="headerlink" title="9.1 问题分析"></a>9.1 问题分析</h4><p>​    上线部署问题</p>
<p>   把你在你的电脑写的代码  上传到 公司买的服务器上</p>
<p>其实前端 做的不多</p>
<p>平时开发代码 那个是开发的  要是上线  需要 npm run build  这个生成的代码才是我们要的</p>
<p><strong>我把 我自己build 的代码 复制上传到 我买的服务器特定文件夹 比如www里面</strong></p>
<p>不懂问一下 上线没那么复杂 是大家想多了   去公司两分钟就会</p>
<p><a href="http://122.51.238.153/" target="_blank" rel="noopener">http://122.51.238.153/</a></p>
<h4 id="9-2-核心问题讲解"><a href="#9-2-核心问题讲解" class="headerlink" title="9. 2 核心问题讲解"></a>9. 2 核心问题讲解</h4><ol>
<li><strong>需要购买一台 服务器</strong>   2 <strong>开发完代码 把build的代码 放到服务器 就行</strong><br>​</li>
</ol>
<p>打包后的文件 放到到服务器 需要注意</p>
<pre><code>1 直接把build下的 html css这些放到根路径 直接就行了
2 如果你是放到某个文件夹 不是直接放到根路径 
   那么 一般你需要yarn bulid打包的  配置路径
  文档：https://www.jianshu.com/p/db914c668142</code></pre><p>   如果是linux服务器  可以使用 ssh 或者 ftp 去上传 html css js 到服务器<br>   如果是windows服务器  可以使用 远程桌面连接 或者 ftp  上传到 服务器</p>
<ol start="2">
<li><p>注意： <strong>在公司里面 一般 你只需要</strong> </p>
<p>​         1   把你的代码 git 提交给 老大   老大自己放到服务器</p>
<p>​          2 或者 你build 之后 把 build的代码 发给 后台   后台给你把网址放到服务器</p>
<p>​         3 或者 后台会告诉你一个特定的文件夹  你只需要把代码放到服务器上的对应文件夹就行 比如我的叫www</p>
<p><strong>总结 你在公司里面 一般只管开发 和build  之后 服务器交给后台或者老大就行</strong> 非要弄 就问问后台或老大就行</p>
<p>​</p>
<p><strong>vue react如果 history模式下面  刷新 404 了  就需要服务器配置路由重写 指向index.html才可以</strong> </p>
<p>apache  服务器 配置  .htaccess 文件 设置重写</p>
<p>nginx 也需要配置 服务器</p>
<p>如果有面试官说不是这样的？ 你就被吓住了？每个公司都不一样的 所以你自己怎么做就怎么做的 进去公司不一样的话 我稍微看一下就行了</p>
</li>
</ol>
<h3 id="10：cookie"><a href="#10：cookie" class="headerlink" title="10：cookie"></a>10：cookie</h3><h4 id="2-1-问题分析-2"><a href="#2-1-问题分析-2" class="headerlink" title="2.1 问题分析"></a>2.1 问题分析</h4><p>locastorage  sessionstorage  我们学过存 token</p>
<p>​     考察 cookie存储</p>
<p>​    cookie放哪里，cookie能做的事情和存在的价值</p>
<h4 id="2-2-核心问题讲解-2"><a href="#2-2-核心问题讲解-2" class="headerlink" title="2. 2 核心问题讲解"></a>2. 2 核心问题讲解</h4><p>cookie： cookie机制 客户端浏览器会把Cookie保存起来。当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。</p>
<p>cookie 做什么? 一般用来存储数据  比如 用户的登录状态  不过现在经常用token 和localStorage了</p>
<p><strong>HTTP协议本身是无状态的</strong>。什么是无状态呢，即服务器无法判断用户身份。Cookie实际上是一小段的文本信息（key-value格式）。客户端向服务器发起请求，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个Cookie。客户端浏览器会把Cookie保存起来。当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。<strong>服务器检查该Cookie，以此来辨认用户等状态</strong>。</p>
<h4 id="2-3-问题扩展-2"><a href="#2-3-问题扩展-2" class="headerlink" title="2.3 问题扩展"></a>2.3 问题扩展</h4><p>前端可以直接操作cookie的</p>
<p>设置  document.cookie=’key=value’</p>
<p>获取 document.cookie</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Setcookie</span> (<span class="params">name, value</span>)</span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"> </span><br><span class="line">    <span class="comment">//设置名称为name,值为value的Cookie</span></span><br><span class="line">    <span class="keyword">var</span> expdate = <span class="keyword">new</span> <span class="built_in">Date</span>();   <span class="comment">//初始化时间</span></span><br><span class="line">    expdate.setTime(expdate.getTime() + <span class="number">30</span> * <span class="number">60</span> * <span class="number">1000</span>);   <span class="comment">//时间</span></span><br><span class="line">    <span class="built_in">document</span>.cookie = name+<span class="string">"="</span>+value+<span class="string">";expires="</span>+expdate.toGMTString()+<span class="string">";path=/"</span>;</span><br><span class="line"> </span><br><span class="line">   <span class="comment">//即document.cookie= name+"="+value+";path=/";   时间可以不要，但路径(path)必须要填写，因为JS的默认路径是当前页，如果不填，此cookie只在当前页面生效！~</span></span><br></pre></td></tr></table></figure>

<p>网站怎么优化？1 精灵图 2 懒加载 3 减少http请求….  一定要答 一下 缓存</p>
<p>浏览器有缓存  现在h5 的manifest  也可以存一下 优化网站</p>
<h3 id="11：浏览器缓存原理"><a href="#11：浏览器缓存原理" class="headerlink" title="11：浏览器缓存原理"></a>11：浏览器缓存原理</h3><h4 id="2-1-问题分析-3"><a href="#2-1-问题分析-3" class="headerlink" title="2.1 问题分析"></a>2.1 问题分析</h4><p>浏览器 本身就有 缓存功能  <strong>有时候刷新代码没有生效</strong>  网站优化等等问题</p>
<p>缓存： 浏览器可能会把你上一次的代码 存起来  你再次访问 就没有去拿新代码 而是 直接拿的缓存</p>
<p><strong>强缓存不发请求到服务器 直接拿缓存，**</strong>协商缓存会发请求到服务器 服务器告诉你 去拿缓存 就拿 不拿缓存就拿新的代码。**</p>
<p>后面老师会讲的更详细 </p>
<h4 id="2-2-核心问题讲解-3"><a href="#2-2-核心问题讲解-3" class="headerlink" title="2. 2 核心问题讲解"></a>2. 2 核心问题讲解</h4><p>缓存：<br>  <strong>1 浏览器缓存 ** **可以通过后台设置响应头控制</strong></p>
<pre><code> 浏览器是会有缓存的 
    分别是强制缓存和协商缓存 都可以通过后台设置响应头控制
     1 强缓存：不会向服务器发送请求，直接从缓存中读取资源 每次访问本地缓存直接验证看是否过期
           强缓存可以通过设置两种 HTTP Header 实现：Expires过期时间 和 Cache-Control缓存控制。
           Cache-Control:max-age=300  缓存300秒
     2 协商缓存(Last-Modified / If-Modified-Since和Etag / If-None-Match)
        协商缓存命中，服务器会将这个请求返回，但是不会返回这个资源的数据 而是告诉客户端可以直接从缓存拿

强制缓存优先于协商缓存进行，
  若强制缓存(Expires和Cache-Control)生效则直接使用缓存，

 若不生效则进行后台设置头 协商缓存(Last-Modified / If-Modified-Since和Etag / If-None-Match)，

1、浏览器在加载资源时，先根据这个资源的一些  http header  判断它是否强缓存，强缓存如果命中，浏览器直接从自己的缓存中读取资源，不会发请求到服务器。比如某个css文件，如果浏览器在加载它所在的网页时，这个css文件的缓存配置命中了强缓存，浏览器就直接从缓存中加载这个css，连请求都不会发送到网页所在服务器。

2、当强缓存过期的时候，浏览器一定会发送一个请求到服务器，通过服务器端依据资源的另外一些http header验证这个资源是否命中协商缓存，如果协商缓存命中，服务器会将这个请求返回，但是不会返回这个资源的数据，而是告诉客户端可以直接从缓存中加载这个资源，于是浏览器就又会从自己的缓存中去加载这个资源。 
3 强缓存与协商缓存的共同点是：如果命中，都是从客户端缓存中加载资源，而不是从服务器加载资源数据；区别是：强缓存不发请求到服务器，协商缓存会发请求到服务器。
4 当协商缓存也没有命中的时候，浏览器直接从服务器加载资源数据。

 那么代表该请求的缓存失效，返回200，重新返回资源和缓存标识，

  再存入浏览器缓存中；生效则返回304，继续使用缓存</code></pre><p>  <strong>2 服务器缓存</strong><br>      服务器 可以 主动把 需要缓存的数据或者页面内容 存到 redis(类似数据库 比数据库快) 中<br>          后面可以从里面取  就不去数据库拿了</p>
<p>  <strong>3 html5 有个manifest 也可以缓存 但是不常用</strong></p>
<h4 id="2-3-问题扩展-3"><a href="#2-3-问题扩展-3" class="headerlink" title="2.3 问题扩展"></a>2.3 问题扩展</h4><p><strong>注意</strong></p>
<p>协商缓存跟强缓存不一样，强缓存不发请求到服务器，所以有时候资源更新了浏览器还不知道，但是协商缓存会发请求到服务器，所以资源是否更新，服务器肯定知道。大部分web服务器都默认开启协商缓存</p>
<h3 id="12：h5离线存储-manifest"><a href="#12：h5离线存储-manifest" class="headerlink" title="12：h5离线存储 manifest"></a>12：h5离线存储 manifest</h3><h4 id="12-1-问题分析"><a href="#12-1-问题分析" class="headerlink" title="12.1 问题分析"></a>12.1 问题分析</h4><p>HTML5提出的一个新的特性：离线存储。通过离线存储，我们可以通过把需要离线存储在本地的文件列在一个manifest配置文件中，这样即使在离线的情况下，用户也可以正常看见网页。</p>
<h4 id="12-2-核心问题讲解"><a href="#12-2-核心问题讲解" class="headerlink" title="12. 2 核心问题讲解"></a>12. 2 核心问题讲解</h4><p><strong>查看 在 application  —-  application cache里面可以看见</strong></p>
<p>这个 不是很常用 就是告诉大家 以后见到要认识</p>
<p><strong>使用</strong></p>
<p>1  在需要离线缓存存储的页面 加上  manifest = “cache.manifest”</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html manifest = <span class="string">"cache.manifest"</span>&gt;</span><br><span class="line">...</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>

<p>2 在根目录 新建文件 cache.manifest 并写上对应代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CACHE MANIFEST</span><br><span class="line">#v0.11</span><br><span class="line"></span><br><span class="line">CACHE:</span><br><span class="line"></span><br><span class="line">js/app.js</span><br><span class="line">css/style.css</span><br><span class="line"></span><br><span class="line">NETWORK:</span><br><span class="line">resourse/logo.png</span><br><span class="line"></span><br><span class="line">FALLBACK:</span><br><span class="line">/ <span class="regexp">/offline.html</span></span><br></pre></td></tr></table></figure>

<p>离线存储的manifest一般由三个部分组成:</p>
<ol>
<li>CACHE:表示需要离线存储的资源列表，由于包含manifest文件的页面将被自动离线存储，所以不需要把页面自身也列出来。 <strong>会在当前浏览器存上</strong></li>
<li>NETWORK:表示在它下面列出来的资源只有在在线的情况下才能访问，他们<strong>不会被离线存储</strong>，所以在离线情况下无法使用这些资源。不过，如果在CACHE和NETWORK中有一个相同的资源，那么这个资源还是会被离线存储，也就是说CACHE的优先级更高。</li>
<li>FALLBACK:表示如果访问第一个资源失败，那么就使用第二个资源来替换他，比如上面这个文件表示的就是如果<strong>访问根目录下任何一个资源失败了，那么就去访问offline.html</strong>。</li>
</ol>
<h4 id="12-3-问题扩展"><a href="#12-3-问题扩展" class="headerlink" title="12.3 问题扩展"></a>12.3 问题扩展</h4><p><strong>查看 在 application  —-  application cache里面可以看见</strong></p>
<h3 id="13：websocket实现原理"><a href="#13：websocket实现原理" class="headerlink" title="13：websocket实现原理"></a>13：websocket实现原理</h3><h4 id="13-1-问题分析"><a href="#13-1-问题分析" class="headerlink" title="13.1 问题分析"></a>13.1 问题分析</h4><p>​    <strong>聊天</strong> <strong>客服</strong>  <strong>在线咨询</strong>  <strong>即时通讯 喜欢使用</strong></p>
<p><strong>即时通讯 实现原理有两种</strong>  </p>
<p>1 ajax 轮询    使用定时器 每隔1s时间 发送ajax到后台</p>
<p>2 websocket(常用) 有一个好用的封装的 socket.io<br>  一般 在公司就是直接买一个就行 一般 只需要引入 他的js 就可以了</p>
<h4 id="13-2-核心问题讲解"><a href="#13-2-核心问题讲解" class="headerlink" title="13. 2 核心问题讲解"></a>13. 2 核心问题讲解</h4><p><strong>什么是websocket</strong></p>
<p>Websocket是应用层第七层上的一个应用层协议，WebSocket 的最大特点就是，服务器可以主动向客户端推送信息，客户端也可以主动向服务器发送信息，是真正的双向平等对话。</p>
<p>HTTP 有 1.1 和 1.0 之说，也就是所谓的 keep-alive ，把多个 HTTP 请求合并为一个，但是 Websocket 其实是一个新协议，跟 HTTP 协议基本没有关系，只是为了兼容现有浏览器，所以使用了 HTTP 。</p>
<p>客户端首先会向服务端发送一个 HTTP 请求，包含一个 Upgrade 请求头来告知服务端客户端想要建立一个 WebSocket 连接</p>
<p><strong>WebSocket 的其他特点</strong>：</p>
<ul>
<li>建立在 TCP 协议之上，服务器端的实现比较容易。</li>
<li>与 HTTP 协议有着良好的兼容性。默认端口也是80和443，并且握手阶段采用 HTTP 协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。</li>
<li>数据格式比较轻量，性能开销小，通信高效。</li>
<li>可以发送文本，也可以发送二进制数据。</li>
<li>没有同源限制，客户端可以与任意服务器通信。</li>
<li>协议标识符是ws（如果加密，则为wss），服务器网址就是 URL。</li>
</ul>
<h4 id="13-3-问题扩展"><a href="#13-3-问题扩展" class="headerlink" title="13.3 问题扩展"></a>13.3 问题扩展</h4><p>前端需要 链接websocket   后端也需要链接  两个才可以通讯 所以这个事  必须前后端配合 </p>
<p>一般就直接  买一个就行</p>
<p><a href="https://www.7moor.com/successcasenew" target="_blank" rel="noopener">https://www.7moor.com/successcasenew</a>  七陌 客服  可以试用<br><a href="https://www.easemob.com/product/cs/online" target="_blank" rel="noopener">https://www.easemob.com/product/cs/online</a>  环信客服 可以试用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">前端：  环信客服注册账号  -》登录客服云-》点击右上角管理员模式-&gt;渠道管理-》选中网站之类</span><br><span class="line"></span><br><span class="line">       把那段js复制到页面body里面&gt;</span><br></pre></td></tr></table></figure>

<p>聊天实现  ：       websocket\sockect-io\node-chat&gt;     1 先npm i   2 node .\server.js</p>
<h3 id="14：移动端的兼容（安卓和iOS手机）"><a href="#14：移动端的兼容（安卓和iOS手机）" class="headerlink" title="14：移动端的兼容（安卓和iOS手机）"></a>14：移动端的兼容（安卓和iOS手机）</h3><p>只有少数情况需要判断操作  基本你就正常写就行</p>
<p>兼容问题自己不常见到  大家记住几个 面试问就说一下 如果面试官说的你不懂？我没有遇见这个很正常</p>
<p>兼容问题 有很多版本都不一样 安卓 ios也有不一样 我们遇见了再去百度解决 如果面试 先记住几个</p>
<p>1 怎么判断是安卓还是 ios**</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取浏览器的userAgent,并转化为小写</span></span><br><span class="line"><span class="keyword">var</span> ua = navigator.userAgent.toLowerCase();</span><br><span class="line"><span class="comment">//判断是否是苹果手机，是则是true</span></span><br><span class="line"><span class="keyword">var</span> isIos = (ua.indexOf(<span class="string">'iphone'</span>) != <span class="number">-1</span>) || (ua.indexOf(<span class="string">'ipad'</span>) != <span class="number">-1</span>);</span><br><span class="line"><span class="keyword">if</span>(isIos)&#123;</span><br><span class="line">   做苹果手机兼容</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  做安卓</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2 兼容问题</strong></p>
<p>1.禁止图片点击放大<br>部分安卓手机点击图片会放大，如需要禁止放大，只需要设置css属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">img&#123; </span><br><span class="line">    pointer-events: none; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个会让img标签的点击事件失效，如果想要给图片添加点击事件就要给上面再写一层</p>
<p>2.禁止 iOS 识别长串数字为电话</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=<span class="string">"format-detection"</span> content=<span class="string">"telephone=no"</span>&gt;</span><br></pre></td></tr></table></figure>

<p>3.禁止复制、选中文本</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">设置CSS属性 -webkit-user-select:none</span><br></pre></td></tr></table></figure>

<p>4.一些情况下对非可点击元素如(label,span）监听点击事件，不会在IOS下触发，css增加cursor:pointer就搞定了<br>5.上下拉动滚动条时卡顿、慢</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">-webkit-overflow-scrolling: touch;</span><br><span class="line">overflow-scrolling: touch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Android3+和iOS5+支持CSS3的新属性为overflow-scrolling</p>
<p>6 安卓不会自动播放视频</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">安卓autoplay没效果 需要手动触发一下</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'touchstart'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	audio.play(); <span class="comment">// 需要主动调用一下js 让视频播放</span></span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>7.半透明的遮罩层改为全透明</p>
<p>在ios上，当点击一个链接或者通过js绑定了点击事件的元素时，会出现一个半透明的背景，当手指离开屏幕，该灰色背景消失，出现“闪屏”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">html, body &#123;</span><br><span class="line">    -webkit-tap-highlight-color: rgba(0,0,0,0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="15：Hybrid项目开发流程"><a href="#15：Hybrid项目开发流程" class="headerlink" title="15：Hybrid项目开发流程"></a>15：Hybrid项目开发流程</h3><h4 id="1、混合开发概述"><a href="#1、混合开发概述" class="headerlink" title="1、混合开发概述"></a><strong>1、混合开发概述</strong></h4><p>Hybrid App主要以JS+Native两者相互调用为主，从开发层面实现“一次开发，多处运行”的机制，成为真正适合跨平台的开发。Hybrid App兼具了Native App良好用户体验的优势，也兼具了Web App使用HTML5跨平台开发低成本的优势。</p>
<p>目前已经有众多Hybrid App开发成功应用，比如美团、爱奇艺、微信等知名移动应用，都是采用Hybrid App开发模式。</p>
<h4 id="2、移动应用开发的三种方式比较"><a href="#2、移动应用开发的三种方式比较" class="headerlink" title="2、移动应用开发的三种方式比较"></a><strong>2、移动应用开发的三种方式比较</strong></h4><p>移动应用开发的方式，目前主要有三种：</p>
<ul>
<li>Native App： 本地应用程序（原生App）</li>
<li>Web App：网页应用程序（移动web）</li>
<li>Hybrid App：混合应用程序（混合App）</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/4cfd90d3f018256e469fa957b953d6a9.png" alt="img"> </p>
<p>图1：三种移动应用开发方式</p>
<p>如图1所示，三种移动应用开发方式具体比较如表2所示：</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/170d9edfd4437417a6fe00ff2766dd76.png" alt="img"> </p>
<p>表2：三种移动应用开发方式比较</p>
<h4 id="3、混合开发应用场景"><a href="#3、混合开发应用场景" class="headerlink" title="3、混合开发应用场景"></a><strong>3、混合开发应用场景</strong></h4><p>（1）折中考虑——如果企业使用 Hybrid 开发方法，就能集Native 和web两者之所长。一方面，Native 让开发者可以充分利用现代移动设备所提供的全部不同的特性和功能。另一方面，使用 Web 语言编写的所有代码都可以在不同的移动平台之间共享，使得开发和日常维护过程变得集中式、更简短、更经济高效。</p>
<p>（2）内部技能——许多企业都拥有Web 开发技能。如果选择 Hybrid 开发方法，在合适解决方案的支持下，Web 开发者只要仅仅运用 HTML、CSS 和 JavaScript 等 Web 技能，就能构建 App，同时提供 Native 用户体验。</p>
<p>（3）考虑未来——HTML5的可用性和功能都在迅速改进。许多分析师预测，它可能会成为开发前端 App 的默认技术。如果用 HTML 来编写 App 的大部分代码，并且只有在需要时才使用 Native 代码，公司就能确保他们今天的投入在明天不会变得过时，因为 HTML 功能变得更丰富，可以满足现代企业一系列更广泛的移动要求。</p>
<p><strong>4、混合开发框架和层次结构图</strong></p>
<p><strong>混合开发结构图</strong></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/a4ea5a6ad10cca9dd70ce2e6581d342f.png" alt="img"></p>
<p>1）移动终端web壳（以下简称“壳”）：壳是使用操作系统的 API 来创建嵌入式 HTML的渲染引擎。壳主要功能是定义Android应用程序与网页之间的接口，允许网页中的JavaScript调用Android应用程序，提供基于web的应用程序的Android API，将Web嵌入到Android应用程序中。</p>
<p>2）前端交互js：包括基础功能js和业务功能js。</p>
<p>3）前端适配器：适配不同的终端：Pad、android、ios、wap。</p>
<h3 id="16：uni-app框架–看笔记"><a href="#16：uni-app框架–看笔记" class="headerlink" title="16：uni-app框架–看笔记"></a>16：uni-app框架–看笔记</h3><p>看笔记  新建一个 看图项目  分析一下 代码  运行到浏览器   云打包app</p>
<h3 id="17：H5和原生APP的交互"><a href="#17：H5和原生APP的交互" class="headerlink" title="17：H5和原生APP的交互"></a>17：H5和原生APP的交互</h3><h4 id="2-1-问题分析-4"><a href="#2-1-问题分析-4" class="headerlink" title="2.1 问题分析"></a>2.1 问题分析</h4><p>混合开发  安卓或者ios写一部分   你用html写一部分 然后把html页面给 安卓ios嵌套进去</p>
<p>这时候 会涉及到 有时候  js 需要用到  原生app的一些功能 比如拍照 语音等等</p>
<h4 id="2-2-核心问题讲解-4"><a href="#2-2-核心问题讲解-4" class="headerlink" title="2. 2 核心问题讲解"></a>2. 2 核心问题讲解</h4><p><strong>h5与原生 app 交互的原理</strong></p>
<p>现在移动端 web 应用，很多时候都需要与原生 app 进行交互、沟通（运行在 webview 中），比如微信的 jssdk，通过 window.wx 对象调用一些原生 app 的功能。所以，这次就来捋一捋 h5 与原生 app 交互的原理。</p>
<p>h5 与原生 app 的交互，本质上说，就是两种调用：</p>
<ol>
<li>app 调用 h5 的代码</li>
<li>h5 调用 app 的代码</li>
</ol>
<p><strong>1. app 调用 h5 的代码</strong></p>
<p>因为 app 是宿主，可以直接访问 h5，所以这种调用比较简单，就是在 h5 中曝露一些全局对象（包括方法），然后在原生 app 中调用这些对</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/5cd2602e57d01652b4a985fd7aeb93a3.png" alt="img"></p>
<p><strong>javascript</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.sdk = &#123;</span><br><span class="line"></span><br><span class="line"><span class="string">``</span>double = <span class="function"><span class="params">value</span> =&gt;</span> value * <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line"><span class="string">``</span>triple = <span class="function"><span class="params">value</span> =&gt;</span> value * <span class="number">3</span>,</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>android：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">webview.evaluateJavascript(<span class="string">``</span><span class="string">'window.sdk.double(10)'</span><span class="string">``</span>, <span class="string">``</span><span class="keyword">new</span> ValueCallback&lt;<span class="built_in">String</span>&gt;() &#123;</span><br><span class="line"></span><br><span class="line"><span class="string">``</span>@Override</span><br><span class="line"></span><br><span class="line"><span class="string">``</span>public <span class="keyword">void</span> onReceiveValue(<span class="built_in">String</span> s) &#123;</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="string">``</span>&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>ios：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSString *func = @<span class="string">``</span><span class="string">"window.sdk.double(10)"</span><span class="string">``</span>;</span><br><span class="line"></span><br><span class="line">NSString *str = [webview stringByEvaluatingJavaScriptFromString:func]; <span class="string">``</span><span class="comment">// 20</span></span><br></pre></td></tr></table></figure>



<p><strong>2. h5 调用 app 的代码</strong></p>
<p>因为 h5 不能直接访问宿主 app，所以这种调用就相对复杂一点。</p>
<p>这种调用常用有两种方式：</p>
<ol>
<li>由app向h5注入一个全局js对象，然后在h5直接访问这个对象</li>
<li>由h5发起一个自定义协议请求，app拦截这个请求后，再由app调用 h5 中的回调函数</li>
</ol>
<p><strong>2.1 由 app 向 h5 注入一个全局 js 对象</strong></p>
<p>这种方式沟通机制简单，比较好理解，并且对于 h5 来说，没有新的东西，所以是比较推荐的一种方式。但这种方式可能存在安全隐患，详细查看 你不知道的 Android WebView 使用漏洞。</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/34958741df1670ac52b5157d9f828f7f.png" alt="img"></p>
<p><strong>android</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">webview.addJavascriptInterface(<span class="string">``</span><span class="keyword">new</span> <span class="built_in">Object</span>() &#123;</span><br><span class="line"></span><br><span class="line"><span class="string">``</span>@JavascriptInterface</span><br><span class="line"></span><br><span class="line"><span class="string">``</span>public int double(value) &#123;</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="keyword">return</span> value * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="string">``</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">``</span>@JavascriptInterface</span><br><span class="line"></span><br><span class="line"><span class="string">``</span>public int triple(value) &#123;</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="keyword">return</span> value * <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="string">``</span>&#125;</span><br><span class="line"></span><br><span class="line">&#125;, <span class="string">``</span><span class="string">"appSdk"</span><span class="string">``</span>);</span><br></pre></td></tr></table></figure>

<p><strong>ios</strong> </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSString *scripts = @<span class="string">``</span><span class="string">"window.appSdk = &#123;double: value =&gt; value * 2, triple: value =&gt; value * 3&#125;"</span><span class="string">``</span>;</span><br><span class="line"></span><br><span class="line">[webview stringByEvaluatingJavaScriptFromString:scripts];</span><br></pre></td></tr></table></figure>

<p><strong>javascript</strong></p>
<p><strong>window.appSdk.double(10); // 20</strong>。</p>
<p><strong>2.2 协议拦截</strong><br>由 h5 发起一个自定义协议请求，app 拦截这个请求后，再由 app 调用 h5 中的回调函数</p>
<ol>
<li><p>由 app 自定义协议，比如 sdk://action?params</p>
</li>
<li><p>在 h5 定义好回调函数，比如</p>
<p>window.bridge={getDouble:value=&gt;{},getTriple:value=&gt;{}}</p>
</li>
<li><p>由 h5 发起一个自定义协议请求，比如 location.href=‘sdk://double?value=10’</p>
</li>
<li><p>app 拦截这个请求后，进行相应的操作，获取返回值</p>
</li>
<li><p>由 app 调用 h5 中的回调函数，比如 window.bridge.getDouble(20);</p>
</li>
</ol>
<p><strong>javascript</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.bridge = &#123;</span><br><span class="line"></span><br><span class="line">  getDouble: <span class="function"><span class="params">value</span> =&gt;</span> &#123; <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line">  &#125;, </span><br><span class="line"></span><br><span class="line">  getTriple: <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// more  </span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">location.href =  <span class="string">'sdk://double?value=10'</span> ;</span><br></pre></td></tr></table></figure>

<p><strong>android：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">webview.setWebViewClient( <span class="keyword">new</span> WebViewClient () &#123;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">public boolean houldOverrideUrlLoading( WebView view,<span class="built_in">String</span> url) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断如果 url 是 sdk:// 打头的就拦截掉</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 然后从 url sdk://action?params 中取出 action 与params </span></span><br><span class="line"></span><br><span class="line">	Uri uri = Uri.parse(url);                                 </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( uri.getScheme().equals( <span class="string">"sdk"</span> )) &#123;</span><br><span class="line">    <span class="comment">// 比如 action = double, params = value=10</span></span><br><span class="line">        webview.evaluateJavascript( <span class="string">'window.bridge.getDouble(20)'</span> );</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<p><strong>ios:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(BOOL)webview:( UIWebView *)webview shouldStartLoadWithRequest:( NSURLRequest *)request navigationType:( UIWebViewNavigationType )navigationType &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断如果 url 是 sdk:// 打头的就拦截掉</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 然后从 url sdk://action?params 中取出 action 与params</span></span><br><span class="line"></span><br><span class="line">NSString *urlStr = request.URL.absoluteString;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ([urlStr hasPrefix:@ <span class="string">"sdk://"</span> ]) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 比如 action = double, params = value=10</span></span><br><span class="line"></span><br><span class="line">  NSString *func = @<span class="string">"window.bridge.getDouble(20)"</span> ;</span><br><span class="line"></span><br><span class="line">  [webview stringByEvaluatingJavaScriptFromString:func];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> NO; </span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> YES;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Vue部分相关的面试题"><a href="#Vue部分相关的面试题" class="headerlink" title="Vue部分相关的面试题"></a>Vue部分相关的面试题</h1><p>vue传值‘</p>
<p>1  父  子 传值   使用props接受</p>
<p>2 子 父 传值    父亲写事件函数  子 $emit触发 传值</p>
<p>3 兄弟传值  $bus 中转站  </p>
<p>4 如果组件之间 关系很远 是很多组件都要用的值  <strong>vuex</strong> </p>
<p><strong>vuex</strong>   <strong>就是一个全局状态数据管理</strong> 简单来说 他的数据类似全局变量 哪个组件都可以使用</p>
<p><strong>在项目中使用vuex</strong></p>
<ol>
<li>下载 vuex 包 并导入 use一下</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line">Vue.use(Vuex)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>需要new 一下 写上全局数据</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store</span></span><br><span class="line"><span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">     count:<span class="number">1</span> <span class="comment">//这个count 就是全局的数据</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>需要挂载到new  vue上 </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>这个步骤是写死的  你可以记一下 下载使用脚手架直接就可以选vuex</strong></p>
<p><strong>他的使用逻辑是什么？</strong></p>
<p>在 store里面的   state  写的数据  是全局数据  所有组件都可以使用 </p>
<p><strong>使用逻辑</strong></p>
<p>   <strong>操作全局vuex的 state数据</strong></p>
<p>   正常情况  必须  dispatch (action)—&gt;action去commit触发 mutation–》mutation里面才能修改state全局数据</p>
<p>​                   action—&gt;mutation—&gt;修改state</p>
<p>   其他情况 你也可以跳过 action  去  直接 commit mutation–》修改state全局数据</p>
<h2 id="vuex怎么合理规范管理数据-及mutations和actions区别"><a href="#vuex怎么合理规范管理数据-及mutations和actions区别" class="headerlink" title="vuex怎么合理规范管理数据,及mutations和actions区别"></a>vuex怎么合理规范管理数据,及mutations和actions区别</h2><blockquote>
<p>解析: 此题考查 vuex中数据的管理和数据结构的设计,还有mutations 和actions的区别</p>
</blockquote>
<blockquote>
<p><strong><code>解答</code></strong> : 首先要明确一个特别重要的原则, 就是 不是所有的数据都要放在vuex中, 因为vuex有一句名言:假如你并不知道为什么要使用vuex,那就不要使用它 !</p>
<p> 那么什么样式的数据需要放在vuex中呢 ? 首先这个数据肯定要被多个组件频繁用到, 如果只是被一个组件 用到, 那完全没有任何必要为了使用vuex和使用vuex</p>
</blockquote>
<p>举例:  一个网站用户的昵称,账号,资料,像这种系统级别的信息 随时可能在业务中展示,使用, 如果在组件中存储, 那么要获取N次, 所以<strong><code>系统级别的数据</code></strong>是需要放置在vuex中的, 那么系统级别数据 也不能所以的放置,为了让数据看着更有层级结构感,可以按照像下面这样设计,  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 系统消息</span></span><br><span class="line">    system: &#123;</span><br><span class="line">        user: &#123;&#125;,</span><br><span class="line">        setting: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<blockquote>
<p>上面这种结构,一看 便知道我们应该哪里获取系统数据即 设置数据</p>
</blockquote>
<p>如果有些业务数据,也需要共享,最好按照模块的具体业务含义分类 , 比如下面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 系统消息</span></span><br><span class="line">    system: &#123;</span><br><span class="line">        user: &#123;&#125;,</span><br><span class="line">        setting: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    product: &#123;</span><br><span class="line">        productList: [], // 商品信息列表</span><br><span class="line">        productOrders: [] // 商品订单啊列表</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如上图代码所示,我们很清晰的能够分清楚 每个模块的数据,这样不会导致数据管理的混乱</p>
</blockquote>
<h3 id="mutations和-actions-的区别"><a href="#mutations和-actions-的区别" class="headerlink" title="mutations和 actions 的区别"></a>mutations和 actions 的区别</h3><blockquote>
<p>不同于redux只有一个action, vuex单独拎出了一个mutations,  它认为 更新数据必须是同步的, 也就是只要调用了 提交数据方法, 在mutation里面才可以修改数据</p>
<p>那么如果我们想做 异步请求,怎么做?  这里 vuex提供了专门做异步请求的模块,action, 当然action中也可以做同步操作, 只不过 分工更加明确, 所有的数据操作 不论是同步还是异步 都可以在action中完成, </p>
<p>mutation只负责接收状态, 同步完成 <strong><code>数据快照</code></strong></p>
<p>所以可以认为 </p>
<p>state =&gt; 负责存储状态 </p>
<p>mutations =&gt; 负责同步更新状态</p>
<p><strong>actions =&gt; 负责获取 处理数据（如果有异步操作必须在action处理 再到mutation）</strong>, 提交到mutation进行状态更新</p>
</blockquote>
<h2 id="vuex模块化module管理-使用的时候有注意事项"><a href="#vuex模块化module管理-使用的时候有注意事项" class="headerlink" title="vuex模块化module管理,使用的时候有注意事项"></a>vuex模块化module管理,使用的时候有注意事项</h2><blockquote>
<p>分析: 此题考查 当vuex维护的数据越来越复杂的时候, 模块化的解决方案</p>
<p><strong><code>解析</code></strong>:使用单一的状态树，应用的所有状态都会<strong><code>集中在一个比较大的对象</code></strong>上面，随着项目需求的不断增加，状态树也会变得越来越臃肿，增加了状态树维护的复杂度,而且代码变得沉长；因此我们需要<strong><code>modules(模块化)</code></strong>来为我们的状态树<strong><code>分隔</code></strong>成不同的模块，每个模块拥有自己的state，getters，mutations，actions；而且允许每个module里面嵌套子module；如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">store</span><br><span class="line">   ├── index.js          # 我们组装模块并导出 store 的地方</span><br><span class="line">   ├── actions.js        # 根级别的 action</span><br><span class="line">   ├── mutations.js      # 根级别的 mutation</span><br><span class="line">   ├── state.js          # 根级别的 state</span><br><span class="line">   └── modules</span><br><span class="line">       ├── module1.js   # 模块1的state树</span><br><span class="line">       └── module2.js   # 模块2的state树</span><br></pre></td></tr></table></figure>
</blockquote>
<p>上面的设计中, 每个vuex子模块都可以定义 state/mutations/actions</p>
<blockquote>
<p>需要注意的是  我们原来使用<strong><code>vuex辅助函数</code></strong>  mapMutations/mapActions  引入的是 全局的的mutations 和actions , 并且我们vuex子模块  也就是module1,module2 … 这些模块的aciton /mutation 也注册了全局, </p>
<p>也就是如果 module1 中定义了 loginMutation, module2中也定义了 loginMutation, 此时, mutation就冲突了</p>
<p>如果重名,就报错了…..</p>
<p>如果不想冲突, 各个模块管理自己的action 和 mutation ,需要 给我们的子模块一个 属性 <strong><code>namespaced: true</code></strong></p>
</blockquote>
<p>那么 组件中怎么使用子模块的action 和 mutations</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 你可以将模块的空间名称字符串作为第一个参数传递给上述函数，这样所有绑定都会自动将该模块作为上下文</span></span><br><span class="line"> methods:&#123;</span><br><span class="line">     ...mapMutations(<span class="string">'m1'</span>, [<span class="string">'loginMutation'</span>]),</span><br><span class="line">     add()&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'add'</span>,<span class="keyword">this</span>)</span><br><span class="line">      <span class="comment">//  this.$store.commit("m1/loginMutation")</span></span><br><span class="line">      <span class="comment">// 或者下面的  先mapMutations 相当于帮你写了commit</span></span><br><span class="line">      <span class="comment">// this.loginMutation()</span></span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// 这句话的意思是 直接 解构出 全局 m1模块下的 loginMutation </span></span><br><span class="line">    <span class="comment">// 把loginMutation 放到this上 并且帮你写好了 commit</span></span><br><span class="line">    <span class="comment">// 相当于帮你简化了代码</span></span><br><span class="line">     ...mapMutations(<span class="string">'m1'</span>, [<span class="string">'loginMutation'</span>]),</span><br><span class="line">       <span class="comment">//不是modules的直接写  ...mapMutations( ['loginMutaton])</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>此题具体考查 Vuex虽然是一个公共状态, 但是公共状态还可以切分成若干个子状态模块, 也就是moduels,</p>
<p>解决当我们的状态树过于庞大和复杂时的一种解决方案.  但是笔者认为, 一旦用了vuex, 几乎 就认定该项目是较为复杂的</p>
</blockquote>
<p><a href="https://vuex.vuejs.org/zh/guide/modules.html" target="_blank" rel="noopener">参考文档</a></p>
<h2 id="封装Vue组件的步骤"><a href="#封装Vue组件的步骤" class="headerlink" title="封装Vue组件的步骤"></a>封装Vue组件的步骤</h2><p>pro111</p>
<p>组件是什么？组件是一段功能代码  —大白话 就是一段html +js +css   你可以重复使用</p>
<p>封装轮播图 -  1 新建vue组件 2 Vue.component注册组件 3  在其他组件使用 标签名</p>
<p>参数： 可以传入数据 使用props接受 比如 数组 定时器时间等</p>
<blockquote>
<p>分析: 本题考查 对于Vue组件化开发的熟练程度</p>
<p><strong><code>解析</code></strong>: 首先明确 组件是本质是什么?  </p>
<p>组件就是一个单位的HTML结构 + 数据逻辑 + 样式的 操作单元 </p>
<p>Vue的组件 继承自Vue对象, Vue对象中的所有的属性和方法,组件可自动继承. </p>
<p>组件的要素  template  =&gt;  作为页面的模板结构 </p>
<p>script  =&gt; 作为数据及逻辑的部分</p>
<p>style  =&gt; 作为该组件部分的样式部分</p>
</blockquote>
<p>要封装一个组件,首先要明确该组件要做的具体业务和需求,  什么样的体验特征, 完成什么样的交互, 处理什么样的数据</p>
<blockquote>
<p>明确上述要求之后, 着手模板的结构设计及搭建,也就是 常说的html结构部分,  先完成 静态的html结构</p>
<p>结构完成, 着手数据结构的设计及开发, 数据结构一般存储于组件的data属性 或者 vuex 状态共享的数据结构</p>
<p>数据设计完成/ 结构完成  接下来 完成数据和模块的结合 , 利用vuejs中指令和 插值表达式的特性 将静态结构 <strong><code>动态化</code></strong></p>
<p>展现的部分完成, 接下来完成<strong><code>交互部分</code></strong>,即利用 组件的生命周期的钩子函数 和 事件驱动 来完成 逻辑及数据的处理与操作</p>
</blockquote>
<p>最后组件完成,进行测试及使用</p>
<p>常用的组件属性 =&gt; data/ methods/filters/ components/watch/created/mounted/beforeDestroy/computed/props</p>
<p>常用组件指令: v-if/v-on/v-bind/v-model/v-text/v-once</p>
<h2 id="Vue中的data是以函数的形式还是对象的形式表示"><a href="#Vue中的data是以函数的形式还是对象的形式表示" class="headerlink" title="Vue中的data是以函数的形式还是对象的形式表示"></a>Vue中的data是以函数的形式还是对象的形式表示</h2><blockquote>
<p>分析: 此题考查 data的存在形式</p>
</blockquote>
<blockquote>
<p><strong><code>解析</code></strong>: 我们在初步学习Vue实例化的时候写的代码时这个样子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        name: <span class="string">'hello world'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>上面代码中的data 是一个对象, 但是我们在开发组件的时候要求data必须是一个带返回值的函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            name: <span class="string">'张三'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>为什么组件要求必须是带返回值的函数?  因为 我们的组件在实例化的时候, 会直接将data数据作用在视图上, </p>
<p>对组件实例化, 会导致我们组件的data数据进行共享, 好比  现在有两辆新车, 你一踩油门, 不光你的车往前车,另辆车也和你一样往前冲!   这显然不符合我们的程序设计要求, 我们希望组件内部的数据是相互独立的,且互不响应,所以 采用   <strong><code>return {}</code></strong>  每个组件实例都返回新对象实例的形式,保证每个组件实例的唯一性</p>
</blockquote>
<h2 id="使用Proxy代理跨域"><a href="#使用Proxy代理跨域" class="headerlink" title="使用Proxy代理跨域"></a>使用Proxy代理跨域</h2><p>什么是跨域？</p>
<p>  域名 协议 ip地址 端口 任何一个不一样 就跨域</p>
<p>解决跨域？</p>
<ol>
<li><p>jsonp   —使用script的src发送   只能get 请求</p>
</li>
<li><p>cors 后台设置允许跨域    <strong>需要后台设置</strong> 允许跨域<br>所有后台语言 都可以设置       </p>
</li>
<li><p>服务器代理</p>
</li>
</ol>
<p><strong>重点 现在 前端 vue 框架 是可以自己设置 服务器代理的</strong>  proxy</p>
<p>​         <strong>配置就行</strong></p>
<p>  <strong>vue在 vue.config.js  可以配置重写webpack</strong></p>
<blockquote>
<p>分析: 本题考查如何解决跨域问题</p>
<p>解析: 解决跨域问题的方式有几种,</p>
<p><strong>1 一种是服务端设置</strong>  , 但这种方式依赖服务端的设置,在前后分离的场景下 ,不太方便</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;Access-Control-Allow-Origin：*</span><br><span class="line">&gt;Access-Control-Allow-Methods：<span class="string">"POST, GET, OPTIONS, DELETE"</span></span><br></pre></td></tr></table></figure>

<p><strong>2 还有一种jsonp形式</strong>, 可以利用script标签 的特性解决同源策略带来的跨域问题,但这是这种方案对于请求的类型有限制,只能get</p>
<p><strong>3 还有一种就可以在开发环境(本地调试)期间,进行代理</strong>, 说白了 就是通过 在本地通过nodejs 启动一个微型服务, </p>
<p>然后我们先请求我们的微型服务, 微型服务是服务端, 服务端<strong><code>代我们</code></strong>去请求我们想要的跨域地址, 因为服务端是不受<strong><code>同源策略</code></strong>的限制的, 具体到开发中,打包工具webpack集成了代理的功能,可以采用配置webpack的方式进行解决, 但是这种仅限于 本地开发期间, <strong>等项目上线时,还是需要另择代理 nginx</strong></p>
</blockquote>
<p>以下为webpack配置代理的配置 </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  <span class="comment">// 修改的配置</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">      proxy: &#123;</span><br><span class="line">          '/api': &#123;</span><br><span class="line">              target: 'http://122.51.238.153',</span><br><span class="line">              changeOrigin: true,</span><br><span class="line">              pathRewrite: &#123;</span><br><span class="line">                '^/api': ''</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><code>target</code></strong>：接口域名；</p>
<p> <strong><code>changeOrigin</code></strong>： 如果设置为<code>true</code>,那么本地会虚拟一个服务端接收你的请求并代你发送该请求；</p>
<p> <strong><code>pathRewrite</code></strong>：如果接口中是没有api的，那就直接置空（如上）如果接口中有api，就需要写成{‘^/api’:‘’}</p>
<p><strong>上线了如果还有跨域 可以让后台设置 允许跨域</strong></p>
<h2 id="Vue中的watch如何深度监听某个对象"><a href="#Vue中的watch如何深度监听某个对象" class="headerlink" title="Vue中的watch如何深度监听某个对象"></a>Vue中的watch如何深度监听某个对象</h2><blockquote>
<p>分析: 此题考查Vue的选项watch的应用方式</p>
<p>解析:  watch最基本的用法是 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            name: <span class="string">'张三'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">        name (newValue, oldValue) &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码中: 有个原则监听谁,写谁的名字,然后是对应的执行函数, 第一个参数为最新的改变值,第二个值为上一次改变的值, 注意: 除了监听 data,也可以监听<strong><code>计算属性</code></strong> 或者一个 函数的计算结果</p>
<p>那怎么深度监听对象 ,两种方式</p>
<ol>
<li>字符串嵌套方式</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">           a: &#123;</span><br><span class="line">               b: &#123;</span><br><span class="line">                   c :<span class="string">'张三'</span></span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">        <span class="string">"a.b.c"</span>: <span class="function"><span class="keyword">function</span> (<span class="params">newValue, oldValue</span>) </span>&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>启用深度监听方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">           a: &#123;</span><br><span class="line">               b: &#123;</span><br><span class="line">                   c :<span class="string">'张三'</span></span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">        a: &#123;</span><br><span class="line">            deep: <span class="literal">true</span> <span class="comment">// deep 为true  意味着开启了深度监听 a对象里面任何数据变化都会触发handler函数,</span></span><br><span class="line">            handler()&#123;</span><br><span class="line">               <span class="comment">// handler是一个固定写法，有变化即调用</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<h2 id="Vue-keep-alive使用"><a href="#Vue-keep-alive使用" class="headerlink" title="Vue keep-alive使用"></a>Vue keep-alive使用</h2><blockquote>
<p>分析: 此题考查Vue中组件缓存的使用 </p>
<p>解析:  keep-alive是 Vue提供的一个全局组件, Vue的组件是有销毁机制的,比如条件渲染, 路由跳转时 组件都会经历<strong><code>销毁</code></strong>, 再次回到页面时,又会回到 <strong><code>重生</code></strong>, 这一过程保证了生命周期钩子函数各个过程都会在这一生命周期中执行.</p>
<p>但是,我们辛辛苦苦获取的数据 滑动的页面 会因为组件的销毁 重生 而 <strong><code>归零</code></strong>,这影响了交互的体验, 所以 keep-alvie出现了, 可以帮助我们缓存想要缓存的组件实例, 只用用keep-alive <strong><code>包裹</code></strong>你想要缓存的组件实例, 这个时候, 组件创建之后,就不会再进行 销毁, 组件数据和状态得以保存</p>
<p>但是,没有了销毁,也就失去了重生的环节, 我们失去了 原有的钩子函数, 所以keep-alive包裹的组件 都获取了另外<strong>两个事件 –如果缓存组件需要重新获取数据</strong></p>
<p>唤醒 activated重新唤醒休眠组件实例时 执行</p>
<p>休眠 deactivated组件实例进入休眠状态时执行</p>
</blockquote>
<p>但是我们不能缓存所有的组件实例, 如果是针对 组件容器 router-view 这个组件进行的缓存, 一般的策略是在路由的元信息 meta对象中设置是否缓存的标记,  然后根据标记决定是否进行缓存</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">  &lt;keep-alive&gt;</span><br><span class="line">    &lt;!-- 里面是当需要缓存时 --&gt;</span><br><span class="line">    &lt;router-view  v-<span class="keyword">if</span>=<span class="string">"$route.meta.isAlive"</span> /&gt;</span><br><span class="line">  &lt;<span class="regexp">/keep-alive&gt;</span></span><br><span class="line"><span class="regexp">   &lt;!-- 外面是不需要缓存时 --&gt;</span></span><br><span class="line"><span class="regexp">  &lt;router-view  v-if="!$route.meta.isAlive" /</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p>还有需要注意的问题是:  被缓存的组件中如果还有子组件, 那么子组件也会一并拥有 激活和唤醒事件,并且这些事件会在同时执行</p>
<h2 id="vue的双向数据绑定原理是什么"><a href="#vue的双向数据绑定原理是什么" class="headerlink" title="vue的双向数据绑定原理是什么"></a>vue的双向数据绑定原理是什么</h2><blockquote>
<p>分析 :此题考查 Vue的MVVM原理</p>
<p><strong><code>解答</code></strong>:  Vue的双向绑定原理其实就是MVVM的实现原理, Vuejs官网已经说明, 实际就是通过 Object.defineProperty方法 完成了对于Vue实例中数据的 <strong><code>劫持</code></strong>, 通过对于 data中数据 set的监听,</p>
<p>然后通过<strong><code>观察者模式</code></strong>, 通知 对应的绑定节点 进行节点数据更新, 完成数据驱动视图的更新</p>
<p>同理, 通过对于节点的表单值改变事件的监听,  执行对于数据的修改</p>
</blockquote>
<p>简单概述 : 通过Object.defineProperty 完成对于数据的劫持, 通过观察者模式, 完成对于节点的数据更新</p>
<h2 id="页面刷新了之后vuex中的数据消失怎么解决"><a href="#页面刷新了之后vuex中的数据消失怎么解决" class="headerlink" title="页面刷新了之后vuex中的数据消失怎么解决"></a>页面刷新了之后vuex中的数据消失怎么解决</h2><blockquote>
<p>分析:此题考查 如果将vuex数据进行本地持久化</p>
<p><strong><code>解析</code></strong>: vuex数据位于内存, 页面的刷新重置会导致数据的<strong><code>归零</code></strong>,也就是所谓的消失,  本地持久化可以解决这个问题.本地持久化用到的技术也就是 本次存储 sesstionStorage 或者 localStorage ,  </p>
<p>如果需要保持的更长久 ,浏览器关掉 再打开依然存有数据,需要使用后者 </p>
<p>实施方案:  state的持久化 也就是分别需要在 state数据初始化 /更新 的时候 进行读取和设置本地存储操作</p>
<p>代码如下 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.store(&#123;</span><br><span class="line">   state: &#123;</span><br><span class="line">       user: localStorge.getItem(<span class="string">'user'</span>)  <span class="comment">// 初始化时读取 本地存储</span></span><br><span class="line">   &#125;,</span><br><span class="line">   mutations: &#123;</span><br><span class="line">       updateUser (state, payload) &#123;</span><br><span class="line">           state.user = payload.user</span><br><span class="line">           localStoregae.setItem(<span class="string">'user'</span>,payload.user) <span class="comment">// 数据更新时 设置本地存储</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>


</blockquote>
<h2 id="vue做服务端渲染"><a href="#vue做服务端渲染" class="headerlink" title="vue做服务端渲染"></a>vue做服务端渲染</h2><p><a href="https://zh.nuxtjs.org/guide/installation/" target="_blank" rel="noopener">nuxt官网文档</a></p>
<blockquote>
<p>分析: 为什么要做服务端渲染, 首先要明白 服务端渲染解决什么问题</p>
<p><strong><code>解析</code></strong>: vuejs 官网说的很明白, 要做服务端渲染首先必须是有对应的需求,即对 实时到达时间(页面访问时间)的绝对需求.  如果只是简单的一个管理系统, 区区几百毫秒的优化 显得十分小题大做.</p>
<p>服务端渲染这里 有一个成熟优秀的框架 nuxt.js , 正如next.js对于react,nuxt是vue服务端渲染的优秀解决方案</p>
</blockquote>
<blockquote>
<p>nuxt的出现可以让渲染内容完全服务端化,解决seo不够友好, 首屏渲染速度不够迅速的问题,</p>
<p>但是这里需要注意: 并不是所有页面都需要服务端渲染, 因为服务端渲染比重多大 对于服务器的访问处理能力 要求也会急剧增大</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">步骤</span><br><span class="line">  <span class="number">1</span> 脚手架 npx create-nuxt-app &lt;项目名&gt;</span><br><span class="line">  <span class="number">2</span> yarn dev 启动开发</span><br><span class="line">  </span><br><span class="line">  上线 </span><br><span class="line">  yarn build</span><br><span class="line">  yarn start</span><br></pre></td></tr></table></figure>

<h5 id="为什么使用nuxt-js"><a href="#为什么使用nuxt-js" class="headerlink" title="为什么使用nuxt.js?"></a>为什么使用nuxt.js?</h5><p>vue单页面应用渲染是从服务器获取所需js，在客户端将其解析生成html挂载于<br>id为app的DOM元素上，这样会存在两大问题。</p>
<ol>
<li>由于资源请求量大，造成网站首屏加载缓慢，不利于用户体验。</li>
<li>由于页面内容通过js插入，对于内容性网站来说，搜索引擎无法抓取网站内容，不利于SEO。<br>Nuxt.js 是一个基于Vue.js的通用应用框架，预设了利用Vue.js开发服务端渲染的应用所需要的各种配置。可以将html在服务端渲染，合成完整的html文件再输出到浏览器。</li>
</ol>
<p><strong>除此之外，nuxt与vue还有一些其他方面的区别。</strong></p>
<ol>
<li><strong>路由</strong><br>nuxt按照 pages 文件夹的目录结构自动生成路由<br>vue需在 src/router/index.js 手动配置路由</li>
<li><strong>入口页面</strong><br>nuxt页面入口为 layouts/default.vue<br>vue页面入口为 src/App.vue</li>
</ol>
<ol>
<li><p><strong>webpack配置</strong><br>nuxt内置webpack，允许根据服务端需求，在 nuxt.config.js 中的build属性自定义构建webpack的配置，覆盖默认配置<br>vue关于webpack的配置存放在build文件夹下</p>
</li>
<li><p><strong>asyncData 里面发送ajax 这个东西跟生命周期这些都是平级的</strong></p>
<p>要理解asyncData方法执行时，其实是在服务端完成的，这个数据是在服务端渲染好了的 </p>
<p>​</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">unxtjs的ajax，你先别往你那个异步上去思考，其实这里面所有的ajax最后都会形成页面。你别</span><br><span class="line">想着，我一点按钮，调用一个方法，然后再ajax去加载数据。因为我们最后全部都会生成静</span><br><span class="line">态，所以任何的获取数据的操作，最后都会变成页面的跳转。</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>所以，官方给了一套写法，你必须按照这个去写，<br>并且这里的ajax会再页面渲染之前就执行。这个东西跟生命周期这些都是平级的。</p>
<p>1 cnpm install @nuxtjs/axios –save<br>2 .plugins目录新建axios.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> options =&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要全路径才能工作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(process.server)&#123;</span><br><span class="line"></span><br><span class="line">　　options.baseURL=http:<span class="comment">//$&#123;process.env.HOST || 'localhost'&#125;:$&#123;process.env.PORT || 3000&#125;/api</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> axios.create(options)</span><br></pre></td></tr></table></figure>


<p>3.Nuxt.config.js增加axios配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">modules:[</span><br><span class="line"></span><br><span class="line">　　<span class="string">'@nuxtjs/axios'</span></span><br><span class="line"></span><br><span class="line">],</span><br></pre></td></tr></table></figure>



<p>4 使用 asyncData 里面发送ajax 这个东西跟生命周期这些都是平级的 在页面渲染之前</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> asyncData(&#123;app&#125;)&#123;</span><br><span class="line"></span><br><span class="line">　　        <span class="keyword">let</span> res =<span class="keyword">await</span> app.$axios(&#123;</span><br><span class="line"></span><br><span class="line">              　　headers: &#123; <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span> &#125;,</span><br><span class="line">              　　method: <span class="string">'get'</span>,</span><br><span class="line">              　　url: <span class="string">`http://test.yms.cn/testjson.asp`</span>,</span><br><span class="line">              　　data: <span class="string">''</span></span><br><span class="line">    </span><br><span class="line">        　　&#125;)</span><br><span class="line">        <span class="comment">// app.$axios</span></span><br><span class="line">        　　<span class="built_in">console</span>.log(<span class="string">'res'</span>,res.data)</span><br><span class="line">        　　<span class="keyword">return</span>&#123;</span><br><span class="line">        　      　testData:res.data.title</span><br><span class="line">        　　&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created()&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'nuxt reg组件'</span>)</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下图为关于nuxt的简单概述</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210316120415417.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="vue-router传参"><a href="#vue-router传参" class="headerlink" title="vue-router传参"></a>vue-router传参</h2><blockquote>
<p>分析:考查vue-router的传值方式</p>
<p><strong><code>解析</code></strong>  vue-router 传值 可以通过 地址传值</p>
<p>最简单的就是url传值, url传值又两种, params 和 query参数传值</p>
<p>params传值 是指的动态路由传值 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;  <span class="attr">path</span>: <span class="string">'/user/:id'</span> &#125;  <span class="comment">// 定义一个路由参数</span></span><br><span class="line">&lt;router-link to=<span class="string">"/user/123"</span>&gt;&lt;<span class="regexp">/router-link&gt;  /</span><span class="regexp">/ 传值</span></span><br><span class="line"><span class="regexp">this.$route.params.id   /</span><span class="regexp">/ 取值</span></span><br></pre></td></tr></table></figure>

<p>query传值,指通过?后面的拼接参数传值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;router-link to=<span class="string">"/user?id=123"</span>&gt;&lt;<span class="regexp">/router-link&gt;  /</span><span class="regexp">/ 传值</span></span><br><span class="line"><span class="regexp">this.$route.query.id   /</span><span class="regexp">/ 取值</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="前端鉴权一般思路"><a href="#前端鉴权一般思路" class="headerlink" title="前端鉴权一般思路"></a>前端鉴权一般思路</h2><blockquote>
<p>分析: 考查前后分离的鉴权思路</p>
</blockquote>
<p><strong><code>解析</code></strong>: 首先要明白 为什么要在前端鉴权? 因为传统项目都是在后端鉴权, 然后通过进行拦截 跳转 对应操作</p>
<p>因为 我们做的并不是传统的项目,而是前后分离项目,也就是前端项目和后端服务进行了<strong><code>剥离</code></strong>, 后端没有办法用session来存储你任意一个前端项目域名下的身份信息, 所以jwt 鉴权模式应运而生. </p>
<p>​    也就是后端不再提供会话的身份存储,而是通过一个鉴权接口将用户的身份,登录时间,请求端口,协议头..等等信息 组装成一个加密的串 返给前端请求,  前端拿到了这个串,就可以认为自己登录成功</p>
<p>那么这个<strong><code>加密串</code></strong>就成了 前端用户是否登录的成功标志, 这就是我们的token , 那么在接下来的接口请求中,我们几乎都要携带这个加密串,因为它是<strong><code>唯一</code></strong>能<strong><code>证明我们身份</code></strong>的信息.</p>
<p>为了方便,我们会一般在请求工具 axios(举例)的拦截器中<strong><code>统一注入token</code></strong>, 减少代码的重复</p>
<p>token 同时具有时效性,我们也需要在此时对token过期进行处理,一旦出现过期的请求码, 就需要进行 换取新token 或者重新登录的解决方案</p>
<p>除此之外,我们还需要依据<strong><code>有无加密串</code></strong> 在前端对于某些页面的访问进行限制, 这个会用到我们的Vue-Router中的导航守卫.</p>
<p><strong>vue 单页项目涉及到多角色用户权限问题，不同的角色用户拥有不同的功能权限， 不同的功能权限对应的不同的页面</strong></p>
<p>一开始 有一些 默认的路由</p>
<p>登录后 比如你是总经理  后台会返回给前端 总经理能看见的 路由页面地址 数组 </p>
<p>前端在router.beforeEach 路由导航守卫里面 拿到返回的地址  使用 <strong>router.addRouter</strong> 动态加上 这个项目路由就好了</p>
<p>routes= 后台返回的 符合条件的 路由数据 类似我们自己写的那个path 等等<br>this.$router.addRoutes(routes)</p>
<pre><code>例子</code></pre><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">　　　　<span class="comment">//判断user信息是否已经获取</span></span><br><span class="line">        <span class="keyword">if</span> (token) &#123;</span><br><span class="line">　　　　　　　　<span class="comment">//根据用户的角色类型来生成对应的新路由</span></span><br><span class="line">            <span class="keyword">const</span> newRouter = [&#123;<span class="attr">path</span>:<span class="string">"/xxx"</span> ...&#125; ..]</span><br><span class="line">            <span class="comment">//将新路由添加到路由中</span></span><br><span class="line">　　　　　　　router.addRoutes(newRouter)</span><br><span class="line">　　　　　　　　<span class="comment">//为了正确渲染导航,将对应的新的路由添加到vuex中</span></span><br><span class="line">                渲染对应的侧边栏</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="vue数据流-和-react数据流"><a href="#vue数据流-和-react数据流" class="headerlink" title="vue数据流 和 react数据流"></a>vue数据流 和 react数据流</h2><p>在<strong>vue</strong> <strong>React</strong>中<strong>数据流</strong>向是<strong>单向</strong>的，由父节点流向子节点，如果父节点的props发生了改变，那么React会递归遍历整个组件</p>
<p><strong>父组件通过绑定 props 的方式，将数据传递给子组件，但是子组件自己并没有权利修改这些数据，如果要修改，只能把修改这一个行为通过 event 的方式报告给父组件，由父组件本身决定改如何处理数据。</strong><br><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210316114126497.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><strong>vue 另一个概念 v-model双向数据   无论数据改变，或是用户操作，都能带来互相的变动，自动更新。</strong></p>
<h2 id="如何在组件中监听Vuex的数据变化"><a href="#如何在组件中监听Vuex的数据变化" class="headerlink" title="如何在组件中监听Vuex的数据变化"></a>如何在组件中监听Vuex的数据变化</h2><blockquote>
<p>分析:   此题考查Vuex的应用及 Vue内部的监听数据变化的机制  </p>
</blockquote>
<blockquote>
<p><strong><code>解答</code></strong>:  首先确定 Vuex是为了解决什么问题而出现的 ?  Vuex是为了解决组件间状态共享而出现的一个框架.</p>
<p>其中有几个要素 是组成Vuex的关键,  state(状态)  mutations  actions  ,</p>
<p>state 表示 需要共享的状态数据</p>
<p>mutations  表示 更改 state的方法集合  只能是同步更新 不能写ajax等异步请求</p>
<p>actions  如果需要做异步请求  可以在actions中发起 然后提交给 mutations mutation再做同步更新</p>
</blockquote>
<p>也就是 state 负责管理状态 ,  mutation负责同步更新状态 action负责 异步获取数据 同提交给mutation</p>
<blockquote>
<p>所以 组件监听Vuex数据变化 就是 监听 Vuex中state的变化, </p>
</blockquote>
<p><strong><code>第一种方案</code></strong>  我们可以在组件中通过组件的 <strong>watch方法来做</strong>, 因为组件可以将state数据映射到 组件的计算属性上,</p>
<p>然后 监听 映射的计算属性即可 代码如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vuex中的state数据</span></span><br><span class="line">  state: &#123;</span><br><span class="line">    count: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">     </span><br><span class="line"><span class="comment">//  A组件中映射 state数据到计算属性</span></span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState([<span class="string">'count'</span>])</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// A组件监听 count计算属性的变化</span></span><br><span class="line">   watch: &#123;</span><br><span class="line">    count () &#123;</span><br><span class="line">      <span class="comment">// 用本身的数据进行一下计数</span></span><br><span class="line">      <span class="keyword">this</span>.changeCount++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210316114642468.png" alt="在这里插入图片描述"></p>
<p><strong><code>第二种方案</code></strong>   vuex中store对象本身提供了<strong><code>watch</code></strong>函数 ,可以利用该函数进行监听</p>
<ul>
<li><strong>watch(fn: Function, callback: Function, options?: Object): Function</strong></li>
</ul>
<p>响应式地侦听 <code>fn</code> 的返回值，当值改变时调用回调函数。<code>fn</code> 接收 store 的 state 作为第一个参数，其 getter 作为第二个参数。最后接收一个可选的对象参数表示 Vue 的 <a href="https://cn.vuejs.org/v2/api/#vm-watch" target="_blank" rel="noopener"><code>vm.$watch</code></a> 方法的参数。</p>
<p>代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">created () &#123;</span><br><span class="line">  <span class="keyword">this</span>.$store.watch(<span class="function">(<span class="params">state, getters</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state.count</span><br><span class="line">  &#125;, () =&gt; &#123;</span><br><span class="line">    <span class="keyword">this</span>.changeCount++</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上代码 均在示例有体现</p>
</blockquote>
<h2 id="Vue单页面和多页面的使用"><a href="#Vue单页面和多页面的使用" class="headerlink" title="Vue单页面和多页面的使用"></a>Vue单页面和多页面的使用</h2><p>morepage</p>
<p>&lt;&gt;</p>
<blockquote>
<p>分析: 首先分析,单页面应用和 多页面应用的根本区别 </p>
<p><strong><code>解答</code></strong>:  单页面即所有的模块统统置于一个html文件之上,切换模块,不会重新对html文件和资源进行再次请求,服务器不会对我们<strong><code>换页面</code></strong>的动作 产生任何反应, 所以我们感觉不到任何的刷新动作,速度和体验很畅快</p>
<p>多页面应用 即多个html页面 共同的使用, 可以认为一个页面即一个模块,但是不排除 多个单页应用混合到一起的组合情况 ,  多页面切换一定会造成 页面资源的重新加载, 这也就意味着 如果 多页面之间切换,一定会造成很数据的<strong><code>重置</code></strong></p>
<p>一个项目分成很多 小vue项目 你去其实也可以直接创建两个项目    </p>
</blockquote>
<p>1 *<em>新建多个页面  每个页面是一个单独的小vue类型 *</em></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210316120211344.png" alt="在这里插入图片描述"></p>
<p>2  配置 多入口页面<strong>在vue.config.js里写上这些</strong> 重点是入口选择对应页面的main.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;vue.config.js</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  pages: &#123;</span><br><span class="line">    index: &#123;</span><br><span class="line">      &#x2F;&#x2F; page 的入口</span><br><span class="line">      entry: &quot;src&#x2F;views&#x2F;index&#x2F;main.js&quot;,</span><br><span class="line">      &#x2F;&#x2F; 模板来源</span><br><span class="line">      template: &quot;public&#x2F;index.html&quot;,</span><br><span class="line">      &#x2F;&#x2F; 在 dist&#x2F;index.html 的输出</span><br><span class="line">      filename: &quot;index.html&quot;,</span><br><span class="line">      &#x2F;&#x2F; 当使用 title 选项时，</span><br><span class="line">      &#x2F;&#x2F; template 中的 title 标签需要是 &lt;title&gt;&lt;%&#x3D; htmlWebpackPlugin.options.title %&gt;&lt;&#x2F;title&gt;</span><br><span class="line">      title: &quot;Index Page&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    ui: &#123;</span><br><span class="line">      &#x2F;&#x2F; page 的入口</span><br><span class="line">      entry: &quot;src&#x2F;views&#x2F;ui&#x2F;main.js&quot;,</span><br><span class="line">      &#x2F;&#x2F; 模板来源</span><br><span class="line">      template: &quot;public&#x2F;ui.html&quot;,</span><br><span class="line">      &#x2F;&#x2F; 在 dist&#x2F;ui.html 的输出</span><br><span class="line">      filename: &quot;ui.html&quot;,</span><br><span class="line">      &#x2F;&#x2F; 当使用 title 选项时，</span><br><span class="line">      &#x2F;&#x2F; template 中的 title 标签需要是 &lt;title&gt;&lt;%&#x3D; htmlWebpackPlugin.options.title %&gt;&lt;&#x2F;title&gt;</span><br><span class="line">      title: &quot;ui Page&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>3 public  写上不同的渲染的  html</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210316120227665.png" alt="在这里插入图片描述"></p>
<p>4  main.js 不同的入口 对应上自己的 根组件和 页面元素</p>
<p>5  通过a标签跳转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    ui页面啊啊啊</span><br><span class="line">    &lt;a href&#x3D;&quot;home.html&quot;&gt;去home页面&lt;&#x2F;a&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>





<h1 id="项目必知必会"><a href="#项目必知必会" class="headerlink" title="项目必知必会"></a>项目必知必会</h1><ul>
<li><input checked="" disabled="" type="checkbox"> 理解 promise 主要解决的问题及常规用法</li>
<li><input checked="" disabled="" type="checkbox"> 能够写出一个可以被链式调用的函数</li>
<li><input checked="" disabled="" type="checkbox"> 能粗略的实现 promise的基本结构</li>
<li><input checked="" disabled="" type="checkbox"> 可以自己封装一般的 api 请求模块</li>
<li><input checked="" disabled="" type="checkbox"> 了解公司一般的角色（岗位）及职责</li>
<li><input checked="" disabled="" type="checkbox"> 知道一个公司常规项目的流程</li>
<li><input checked="" disabled="" type="checkbox"> 知道公司常规的缺陷管理的流程</li>
<li><input checked="" disabled="" type="checkbox"> 知道常规的代码管理方式</li>
<li><input checked="" disabled="" type="checkbox"> 知道常规系统的登录部分是如何设计的（简单登录/单点登录）</li>
<li><input checked="" disabled="" type="checkbox"> 知道系统的权限部分如何设计的</li>
<li><input checked="" disabled="" type="checkbox"> 可以将数组结构的数据转成树结构的数据</li>
<li><input checked="" disabled="" type="checkbox"> 可以将树结构的数据转成数组的结构</li>
<li><input checked="" disabled="" type="checkbox"> 知道如何限制接口的访问频率，</li>
<li><input checked="" disabled="" type="checkbox"> 可以实现简单的 debounce </li>
</ul>
<h1 id="问题列表"><a href="#问题列表" class="headerlink" title="问题列表"></a>问题列表</h1><table>
<thead>
<tr>
<th>知识点</th>
</tr>
</thead>
<tbody><tr>
<td>promise的源码和实际项目使用</td>
</tr>
<tr>
<td>前端后端具体的合作的流程</td>
</tr>
<tr>
<td>从研发到上线的具体详解</td>
</tr>
<tr>
<td>项目开发中遇到的问题</td>
</tr>
<tr>
<td>对axios再次封装（网络请求模块封装）</td>
</tr>
<tr>
<td>混合APP原生APP打包上线</td>
</tr>
<tr>
<td>限制接口调用频率</td>
</tr>
<tr>
<td>权限管理结合项目前端实现</td>
</tr>
<tr>
<td>打包到项目部署</td>
</tr>
<tr>
<td>实现登录</td>
</tr>
<tr>
<td>管理项目</td>
</tr>
<tr>
<td>处理树形结构</td>
</tr>
</tbody></table>
<h1 id="面试题详解"><a href="#面试题详解" class="headerlink" title="面试题详解"></a>面试题详解</h1><h2 id="理解promise"><a href="#理解promise" class="headerlink" title="理解promise"></a>理解promise</h2><p><strong>【问题分析】</strong></p>
<p>怎么理解 promise ？ 写出指定代码的输出内容？</p>
<p><strong>【答题思路】</strong></p>
<p>关于 promise 通常会有三种题型。第一种就是问概念；第二种就是 给一段代码让说出他的输出；第三种 就是让你自己实现一个 promise ，来考察你对 promise 的理解和编程能力。（第三种一般是针对中高级的程序员）</p>
<p>本节我们先回顾一下 promise的概念，然后一起来做两个题。</p>
<ol>
<li>promise 概念</li>
</ol>
<p><strong>promise 定义</strong>A promise is an object that may produce a single value some time in the future: either a resolved value, or a reason that it’s not resolved (e.g., a network error occurred)</p>
<p><a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-a-promise-27fc71e77261" target="_blank" rel="noopener">https://medium.com/javascript-scene/master-the-javascript-interview-what-is-a-promise-27fc71e77261</a></p>
<p><a href="https://promisesaplus.com/implementations" target="_blank" rel="noopener">https://promisesaplus.com/implementations</a></p>
<ol start="2">
<li>promise 题目1</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">数字打印的顺序</span><br><span class="line"><span class="keyword">const</span> first = <span class="function"><span class="params">()</span> =&gt;</span> <span class="function">(<span class="params"><span class="keyword">new</span> <span class="built_in">Promise</span>((resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">7</span>);</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="number">5</span>);</span><br><span class="line">            resolve(<span class="number">6</span>);</span><br><span class="line">        &#125;, <span class="number">0</span>)</span><br><span class="line">        resolve(<span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    resolve(<span class="number">2</span>);</span><br><span class="line">    p.then(<span class="function">(<span class="params">arg</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(arg);</span><br><span class="line">    &#125;);</span><br><span class="line"> </span><br><span class="line">&#125;));</span><br><span class="line"> </span><br><span class="line">first().then(<span class="function">(<span class="params">arg</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arg);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.同步的代码（最高）</span></span><br><span class="line"><span class="comment">//3</span></span><br><span class="line"><span class="comment">//7</span></span><br><span class="line"><span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 微任务的异步代码（次高，then）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 宏任务的异步代码（最低，setTimeout）</span></span><br><span class="line"><span class="comment">//5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//6 不执行</span></span><br></pre></td></tr></table></figure>



<ol start="3">
<li>promise 题目2（理解 then 的第二回调函数和 catch）</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 画出以下异步函数执行的可能的路线。</span></span><br><span class="line"><span class="comment">// https://developers.google.com/web/fundamentals/primers/promises</span></span><br><span class="line"><span class="comment">// 蓝线表示执行的 promise 路径，红路表示拒绝的 promise 路径。</span></span><br><span class="line"><span class="comment">// https://developers.google.com/web/fundamentals/primers/imgs/promise-flow.svg</span></span><br><span class="line">asyncThing1()</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> asyncThing2();</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> asyncThing3();</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> asyncRecovery1();</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> asyncThing4();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> asyncRecovery2();</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Don't worry about it"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"All done!"</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>




<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210316131840625.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="promise-实践"><a href="#promise-实践" class="headerlink" title="promise 实践"></a>promise 实践</h2><p><strong>【问题分析】</strong></p>
<p>如何把大象🐘放到冰箱里？</p>
<p><strong>【答题思路】</strong></p>
<p>开门/装大象/关门 都是异步的操作。</p>
<p>通过本题加强对 promise 的理解，理解 promise 解决的核心问题是什么。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/////////////////方法1  callback//////////////////</span></span><br><span class="line"><span class="comment">//1. 准备函数 openDoor putIn closeDoor done</span></span><br><span class="line"><span class="comment">//2. 执行函数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> openDoor=<span class="function">(<span class="params">cb</span>)=&gt;</span>&#123;</span><br><span class="line">  setTimeout(cb,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> putIn=<span class="function">(<span class="params">cb</span>)=&gt;</span>&#123;</span><br><span class="line">  setTimeout(cb,<span class="number">3</span>*<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> closeDoor=<span class="function">(<span class="params">cb</span>)=&gt;</span>&#123;</span><br><span class="line">  setTimeout(cb,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> done=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.timeEnd();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'done'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">openDoor(<span class="function"><span class="params">()</span>=&gt;</span> putIn(<span class="function"><span class="params">()</span>=&gt;</span> closeDoor(done)  ));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//////</span></span><br><span class="line"><span class="comment">//const openDoor = cb =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   setTimeout(cb, 1000);</span></span><br><span class="line"><span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const promise = () =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   return new Promise((res, rej) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//       res();</span></span><br><span class="line"><span class="comment">//     &#125;, 1000);</span></span><br><span class="line"><span class="comment">//   &#125;);</span></span><br><span class="line"><span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////vs/////////////////////</span></span><br><span class="line"><span class="comment">/////////////////方法1  promise//////////////////</span></span><br><span class="line"><span class="comment">//1. 准备promise函数 openDoor putIn closeDoor done</span></span><br><span class="line"><span class="comment">//2. 执行函数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> openDoor=<span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">  setTimeout(res,<span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> putIn=<span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">  setTimeout(res,<span class="number">1000</span>*<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> closeDoor=<span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">  setTimeout(res,<span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> done=<span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.timeEnd();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'done2'</span>);</span><br><span class="line">  res();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">openDoor()</span><br><span class="line">  .then(putIn)</span><br><span class="line">  .then(closeDoor)</span><br><span class="line">  .then(done)</span><br></pre></td></tr></table></figure>



<h2 id="如何实现链式调用"><a href="#如何实现链式调用" class="headerlink" title="如何实现链式调用"></a>如何实现链式调用</h2><p><strong>【问题分析】</strong></p>
<p>类似 <code>b.then().then().then()</code> 的链式调用是如何实现的？</p>
<p><strong>【答题思路】</strong></p>
<p>因为要不断的调用，所以一定是返回自己，或者返回一个 和自己类似的结构。</p>
<p>后续实现 Promise 的时候，会用得上！</p>
<p>面试就心里强大一点就行；出给我的题 面试官如果不知提前知道答案也  可能答不出来</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test1</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  then()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">6666</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a= <span class="keyword">new</span> Test1();</span><br><span class="line">a.then().then().then()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test2</span></span>&#123;</span><br><span class="line">  then()&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">77777</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Test2();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b= <span class="keyword">new</span> Test2();</span><br><span class="line">b.then().then().then()</span><br></pre></td></tr></table></figure>



<h2 id="promise-单元测试"><a href="#promise-单元测试" class="headerlink" title="promise 单元测试"></a>promise 单元测试</h2><p>1.准备测试框架</p>
<p> 参考<a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener">jest</a> 官网</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1.初始化项目</span></span><br><span class="line">npm init</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.安装 jest</span></span><br><span class="line">yarn add --dev jest</span><br><span class="line"><span class="meta">#</span><span class="bash">npm install --save-dev jest</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. 支持 es2015+ 和 ts</span></span><br><span class="line">yarn add --dev babel-jest @babel/core @babel/preset-env @babel/preset-typescript @types/jest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4. 添加 文件 babel.config.js</span></span><br><span class="line">// babel.config.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    ['@babel/preset-env', &#123;targets: &#123;node: 'current'&#125;&#125;],</span><br><span class="line">     '@babel/preset-typescript',</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5.配置命令</span></span><br><span class="line">    "test": "jest",</span><br><span class="line">    "test:watch": "jest --watchAll"</span><br></pre></td></tr></table></figure>



<p>2.为了检查 Promise 实现的正确性，我们提前准备好单元测试</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="keyword">import</span> MyPromise <span class="keyword">from</span> <span class="string">"./index"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line">test(<span class="string">"1.promise 参数函数会立即执行"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> string;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">new</span> MyPromise(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    string = <span class="string">"foo"</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  expect(string).toBe(<span class="string">"foo"</span>);</span><br><span class="line"></span><br><span class="line">&#125;,<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">it(<span class="string">"2. promise 在 then 的回调函数中可以拿到 resolve 的数据。"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">done</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> testString = <span class="string">"foo"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> promise = <span class="keyword">new</span> MyPromise(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(testString);</span><br><span class="line">    &#125;, <span class="number">20</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">    expect(string).toBe(testString);</span><br><span class="line">    done();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line">it(<span class="string">"promise 可以有多个 then，并且会依次执行"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">done</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> testString = <span class="string">"foo"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> promise = <span class="keyword">new</span> MyPromise(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(testString);</span><br><span class="line">    &#125;, <span class="number">20</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">    expect(string).toBe(testString);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">    expect(string).toBe(testString);</span><br><span class="line">    done();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">it(<span class="string">"4.promise 可以嵌套多个 then，then的回调中可以返回 promise "</span>, <span class="function"><span class="keyword">function</span>(<span class="params">done</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> testString = <span class="string">"foo"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> promise = <span class="keyword">new</span> MyPromise(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;, <span class="number">20</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  promise</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          resolve(testString);</span><br><span class="line">        &#125;, <span class="number">20</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">      expect(string).toBe(testString);</span><br><span class="line">      done();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5</span></span><br><span class="line">it(<span class="string">"5.promise 可以嵌套多个 then，then的回调中可以返回 一个普通值"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">done</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> testString = <span class="string">"foo"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> promise = <span class="keyword">new</span> MyPromise(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;, <span class="number">20</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  promise</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> testString;</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">      expect(string).toBe(testString);</span><br><span class="line">      done();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6</span></span><br><span class="line">it(<span class="string">"6.resolved 状态的promise ，如果调用 then 方法会立即执行"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">done</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> testString = <span class="string">"foo"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> promise = <span class="keyword">new</span> MyPromise(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(testString);</span><br><span class="line">    &#125;, <span class="number">20</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      expect(value).toBe(testString);</span><br><span class="line">      done();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">&#125;,<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">it(<span class="string">"7. 二次调用 resolve 不会产生影响。"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">done</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> testString = <span class="string">"foo"</span>;</span><br><span class="line">  <span class="keyword">var</span> testString2 = <span class="string">"bar"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> promise = <span class="keyword">new</span> MyPromise(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(testString);</span><br><span class="line">      resolve(testString2);</span><br><span class="line">    &#125;, <span class="number">20</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    expect(value).toBe(testString);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      expect(value).toBe(testString);</span><br><span class="line">      done();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">&#125;,<span class="number">500</span>);</span><br></pre></td></tr></table></figure>



<h2 id="promise-源码"><a href="#promise-源码" class="headerlink" title="promise 源码"></a>promise 源码</h2><p><strong>【问题分析】</strong></p>
<p>如何实现一个 Promise ？</p>
<p><strong>【答题思路】</strong></p>
<p>promise 是一个对象，一般是通过 new Promise （）来实例化的；所以这里我要实现 Promise 类！</p>
<p>promise 的 then 是可以链式调用的，所以可能会用到上面提到的，链式调用的实现。</p>
<p>根据逐个单元测试的要求来实现 Promise</p>
<p>主要实现 Promise 的构造方法和 then 方法； 后面会以链接的方式给出完整的实现。</p>
<p><strong>【解题代码】</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> State = &#123;</span><br><span class="line">  pending: <span class="string">"pending"</span>,</span><br><span class="line">  resolved: <span class="string">"rejected"</span>,</span><br><span class="line">  rejected: <span class="string">"rejected"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> noop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> MyPromise &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">exclutor</span>) &#123;</span><br><span class="line">    exclutor(<span class="keyword">this</span>._resolve.bind(<span class="keyword">this</span>), <span class="keyword">this</span>._reject);</span><br><span class="line">  &#125;</span><br><span class="line">  _state = State.pending;</span><br><span class="line">  _value;</span><br><span class="line">  _resolve(val) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>._state === State.pending) &#123;</span><br><span class="line">      <span class="keyword">this</span>._value = val;</span><br><span class="line">      <span class="keyword">this</span>._state = State.resolved;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>._runResolveArray();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  _reject() &#123;&#125;</span><br><span class="line">  _runResolveArray() &#123;</span><br><span class="line">    <span class="comment">//执行 then 传入进来的 onRes</span></span><br><span class="line">    <span class="keyword">this</span>._resArray.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// const item</span></span><br><span class="line">      <span class="keyword">const</span> result = item.handle(<span class="keyword">this</span>._value);</span><br><span class="line">      <span class="keyword">const</span> nextPromise = item.promise;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (result <span class="keyword">instanceof</span> MyPromise) &#123;</span><br><span class="line">        result.then(<span class="function"><span class="params">val</span> =&gt;</span> item.promise._resolve(val));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        item.promise._resolve(result);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _resArray = [];</span><br><span class="line"></span><br><span class="line">  then(onRes, onRej = noop) &#123;</span><br><span class="line">    <span class="comment">// if (this._state === State.pending) &#123;</span></span><br><span class="line">    <span class="keyword">const</span> newPromise = <span class="keyword">new</span> MyPromise(<span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;);</span><br><span class="line">    <span class="keyword">const</span> item = &#123; promise: newPromise, handle: onRes &#125;;</span><br><span class="line">    <span class="keyword">this</span>._resArray.push(item);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>._state === State.resolved) &#123;</span><br><span class="line">      <span class="keyword">this</span>._runResolveArray();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newPromise;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> MyPromise;</span><br></pre></td></tr></table></figure>



<p>【问题延伸】</p>
<p>几种Promise 的实现</p>
<p><a href="https://github.com/ericyang89/my-promise" target="_blank" rel="noopener">https://github.com/ericyang89/my-promise</a></p>
<p><a href="https://github.com/vividbytes/implementing-promises" target="_blank" rel="noopener">https://github.com/vividbytes/implementing-promises</a></p>
<p><a href="https://github.com/iam91/zpromise/blob/master/src/zpromise.js" target="_blank" rel="noopener">https://github.com/iam91/zpromise/blob/master/src/zpromise.js</a></p>
<h2 id="项目api-请求模块封装"><a href="#项目api-请求模块封装" class="headerlink" title="项目api 请求模块封装"></a>项目api 请求模块封装</h2><p><strong>【题目分析】</strong></p>
<p>你项目中的网络/api 请求模块是如何封装的？</p>
<p><strong>【答题思路】</strong></p>
<ol>
<li>接口请求一般是异步的，可以返回 promise 更加清晰。</li>
<li>网络请求url 的公共部分可以单独配置到 网络请求内部。</li>
<li>针对所有的接口可以进行统一的处理。这也是面向切面编程的一个实践。</li>
<li>可以借助第三方库 axios 快速的封装 网络请求模块。</li>
</ol>
<p><strong>【解题步骤｜代码】</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br><span class="line"><span class="keyword">import</span> constant <span class="keyword">from</span> <span class="string">"../constant"</span>;</span><br><span class="line"><span class="keyword">import</span> reactNavigationHelper <span class="keyword">from</span> <span class="string">"./reactNavigationHelper"</span>;</span><br><span class="line"><span class="keyword">import</span> commonToast <span class="keyword">from</span> <span class="string">"./commonToast"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置请求url 的公共部分及超时时间</span></span><br><span class="line"><span class="keyword">const</span> commonHttp = axios.create(&#123;</span><br><span class="line">  baseURL: constant.baseUri,</span><br><span class="line">  timeout: <span class="number">10</span> * <span class="number">1000</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">commonHttp.interceptors.response.use(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//针对所有接口统一处理登录过期的问题</span></span><br><span class="line">    <span class="keyword">if</span> (error.response.status === <span class="number">401</span>) &#123;</span><br><span class="line">      commonToast.show(<span class="string">"登录过期"</span>);</span><br><span class="line">      reactNavigationHelper.navigate(<span class="string">"Login"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> commonHttp;</span><br></pre></td></tr></table></figure>



<h2 id="公司角色及职责"><a href="#公司角色及职责" class="headerlink" title="公司角色及职责"></a>公司角色及职责</h2><p>一般公司与项目流程有关的角色</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/b4e1668bd91c904d77809d291ea36d07.png" alt="image-20200219142325265"></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/0e29764e84656665bacf99b99391b249.png" alt="image-20200219142343405"></p>
<p>##项目流程</p>
<p><strong>【题目分析】</strong></p>
<p>你们的开发流程/项目流程大概是什么样的？</p>
<p><strong>【答题思路】</strong></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/5ff050b449bc28b27221c3fe68ee70b3.png" alt="image-20200219142531400"></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/e09049258c6aa17391e053facdd80ce5.png" alt="image-20200219142820684"></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/03d77258f5fe63e14c4c38c9359cada1.png" alt="image-20200219142841929"></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/8eb0ad53656adf07a1804ba11946c5cc.png" alt="image-20200219150052792"></p>
<p>简要说明项目流程：</p>
<ol>
<li>产品出需求文档；开需求会；</li>
<li>估时，部分项目写技术方案；接口阅读</li>
<li>开始开发；测试给冒烟测试/测试用例评审</li>
<li>前后端联调</li>
<li>冒烟测试</li>
<li>提测</li>
<li>跟测/上环境</li>
<li>上线/线上跟踪/项目总结</li>
</ol>
<h2 id="项目缺陷管理"><a href="#项目缺陷管理" class="headerlink" title="项目缺陷管理"></a>项目缺陷管理</h2><p><strong>【题目分析】</strong></p>
<p>如何做bug/缺陷管理？</p>
<p><strong>【答题思路】</strong></p>
<ol>
<li><p>缺陷管理角色</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/a58fa66a7ecae79eae370ce9773ae713.png" alt="image-20200219144941335"></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/0dd038cbf22bc56ca03a0e8b8077b9cd.png" alt="image-20200219145001216"></p>
</li>
<li><p>bug 处理流程</p>
</li>
</ol>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/4a9de064aeef89e9767baa2db3178f74.png" alt="image-20200219144601063"></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/d529b8725b94ec7ec833a0feccd1cca5.png" alt="image-20200219144725016"></p>
<h2 id="代码管理"><a href="#代码管理" class="headerlink" title="代码管理"></a>代码管理</h2><p><strong>【题目分析】</strong></p>
<p>你们的代码大概怎么管理的？</p>
<p>怎么管理 git 分支的？</p>
<p><strong>【答题思路】</strong></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/836a38cd7781ab6f85690680d14f1a87.png" alt="image-20200219150915511"></p>
<h2 id="项目打包"><a href="#项目打包" class="headerlink" title="项目打包"></a>项目打包</h2><p><strong>【题目分析】</strong></p>
<p>你们项目为什么需要打包/编译/构建？</p>
<p><strong>【答题思路】</strong></p>
<p>为什么要项目打包？</p>
<ol>
<li><p>es2015+ 转 es5</p>
</li>
<li><p>Js/css/图片 文件合并</p>
</li>
<li><p>ts 转 js</p>
</li>
<li><p>模板编译 jsx 转 js</p>
</li>
<li><p>less/sass 转 css</p>
</li>
<li><p>css </p>
</li>
<li><p>代码压缩</p>
</li>
<li><p>针对不同环境生成不同的代码</p>
</li>
</ol>
<h2 id="常规登录流程"><a href="#常规登录流程" class="headerlink" title="常规登录流程"></a>常规登录流程</h2><p><strong>【题目分析】</strong></p>
<p>你们项目中登录大概是怎么实现？</p>
<p><strong>【答题思路】</strong></p>
<ol>
<li><p>最简单的登录流程</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/006572178a7cdfe6fb2595265b7fc53c.png" alt="image-20200219204350033"></p>
</li>
<li><p>端点登录-sso</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/8b9f66f3a818fc0061b0a5698fd9e027.png" alt="image-20200219210517079"></p>
</li>
<li><p>注意问题</p>
<ol>
<li>密码一般不用明文保存</li>
<li>发送 用户名 密码 的网络请求一般不用 get</li>
</ol>
</li>
</ol>
<h2 id="项目中权限管理"><a href="#项目中权限管理" class="headerlink" title="项目中权限管理"></a>项目中权限管理</h2><p><strong>【题目分析】</strong></p>
<p>你们项目中权限管理是怎么实现？</p>
<p><strong>【答题思路】</strong></p>
<ol>
<li><p>常规权限模型</p>
<p>RBAC基于角色的权限访问控制（Role-Based Access Control）</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/0f2af08d9be513e017b443150565204c.png" alt="image-20200220112421950"></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/img_convert/849f5721674c3cfe9f8951892f9d8bda.png" alt="image-20200220112449243"></p>
</li>
<li><p>常规管理系统中的权限</p>
<ul>
<li>根据登录用户返回菜单列表— — 可能是一颗树</li>
<li>根据登录用户控制接口权限</li>
</ul>
</li>
<li><p>前台系统中的权限管理</p>
<ul>
<li>更专注于入口的控制</li>
<li>越权的提示也不可少</li>
<li>多级权限可能会涉及到计算</li>
</ul>
</li>
</ol>
<p><strong>【问题延伸】</strong></p>
<p>菜单列表通常是一个树的结构，后端一般喜欢给一个列表（数组），该如何去构建？！</p>
<h2 id="根据数组构建树"><a href="#根据数组构建树" class="headerlink" title="根据数组构建树"></a>根据数组构建树</h2><p><strong>【题目分析】</strong></p>
<p>根据数组构建树?</p>
<p><strong>【答题思路】</strong></p>
<ol>
<li>给定原始数据（originData），期待生成一个树形结构的对象(treeData)。</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">export</span> <span class="keyword">type</span> Item = &#123;</span><br><span class="line">  id: <span class="built_in">number</span>;</span><br><span class="line">  parentId: <span class="built_in">number</span>;</span><br><span class="line">  name: <span class="built_in">String</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> Node = Item &amp; &#123; children: Node[] &#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> originData: Item[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">0</span>,</span><br><span class="line">    parentId: <span class="literal">null</span>,</span><br><span class="line">    name: <span class="string">"生物"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">1</span>,</span><br><span class="line">    parentId: <span class="number">0</span>,</span><br><span class="line">    name: <span class="string">"动物"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">2</span>,</span><br><span class="line">    parentId: <span class="number">0</span>,</span><br><span class="line">    name: <span class="string">"植物"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">3</span>,</span><br><span class="line">    parentId: <span class="number">0</span>,</span><br><span class="line">    name: <span class="string">"微生物"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">4</span>,</span><br><span class="line">    parentId: <span class="number">1</span>,</span><br><span class="line">    name: <span class="string">"哺乳动物"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">5</span>,</span><br><span class="line">    parentId: <span class="number">1</span>,</span><br><span class="line">    name: <span class="string">"卵生动物"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">6</span>,</span><br><span class="line">    parentId: <span class="number">2</span>,</span><br><span class="line">    name: <span class="string">"种子植物"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">7</span>,</span><br><span class="line">    parentId: <span class="number">2</span>,</span><br><span class="line">    name: <span class="string">"蕨类植物"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">8</span>,</span><br><span class="line">    parentId: <span class="number">4</span>,</span><br><span class="line">    name: <span class="string">"大象"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">9</span>,</span><br><span class="line">    parentId: <span class="number">4</span>,</span><br><span class="line">    name: <span class="string">"海豚"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">10</span>,</span><br><span class="line">    parentId: <span class="number">4</span>,</span><br><span class="line">    name: <span class="string">"猩猩"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">11</span>,</span><br><span class="line">    parentId: <span class="number">5</span>,</span><br><span class="line">    name: <span class="string">"蟒蛇"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">12</span>,</span><br><span class="line">    parentId: <span class="number">5</span>,</span><br><span class="line">    name: <span class="string">"麻雀"</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> treeData: Node = &#123;</span><br><span class="line">  children: [</span><br><span class="line">    &#123;</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          children: [</span><br><span class="line">            &#123; children: [], id: <span class="number">8</span>, name: <span class="string">"大象"</span>, parentId: <span class="number">4</span> &#125;,</span><br><span class="line">            &#123; children: [], id: <span class="number">9</span>, name: <span class="string">"海豚"</span>, parentId: <span class="number">4</span> &#125;,</span><br><span class="line">            &#123; children: [], id: <span class="number">10</span>, name: <span class="string">"猩猩"</span>, parentId: <span class="number">4</span> &#125;</span><br><span class="line">          ],</span><br><span class="line">          id: <span class="number">4</span>,</span><br><span class="line">          name: <span class="string">"哺乳动物"</span>,</span><br><span class="line">          parentId: <span class="number">1</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          children: [</span><br><span class="line">            &#123; children: [], id: <span class="number">11</span>, name: <span class="string">"蟒蛇"</span>, parentId: <span class="number">5</span> &#125;,</span><br><span class="line">            &#123; children: [], id: <span class="number">12</span>, name: <span class="string">"麻雀"</span>, parentId: <span class="number">5</span> &#125;</span><br><span class="line">          ],</span><br><span class="line">          id: <span class="number">5</span>,</span><br><span class="line">          name: <span class="string">"卵生动物"</span>,</span><br><span class="line">          parentId: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      id: <span class="number">1</span>,</span><br><span class="line">      name: <span class="string">"动物"</span>,</span><br><span class="line">      parentId: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      children: [</span><br><span class="line">        &#123; children: [], id: <span class="number">6</span>, name: <span class="string">"种子植物"</span>, parentId: <span class="number">2</span> &#125;,</span><br><span class="line">        &#123; children: [], id: <span class="number">7</span>, name: <span class="string">"蕨类植物"</span>, parentId: <span class="number">2</span> &#125;</span><br><span class="line">      ],</span><br><span class="line">      id: <span class="number">2</span>,</span><br><span class="line">      name: <span class="string">"植物"</span>,</span><br><span class="line">      parentId: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; children: [], id: <span class="number">3</span>, name: <span class="string">"微生物"</span>, parentId: <span class="number">0</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  id: <span class="number">0</span>,</span><br><span class="line">  name: <span class="string">"生物"</span>,</span><br><span class="line">  parentId: <span class="literal">null</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>单元测试</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> arrayToTree <span class="keyword">from</span> <span class="string">"./arrayToTree"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; originData, treeData &#125; <span class="keyword">from</span> <span class="string">"./data"</span>;</span><br><span class="line"></span><br><span class="line">test(<span class="string">"arrayToTee"</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  expect(arrayToTree(originData)).toEqual(treeData);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<ol start="3">
<li><p>实现步骤</p>
<ul>
<li><p>实现函数签名</p>
</li>
<li><p>实现函数体</p>
<ul>
<li><p>处理 root</p>
</li>
<li><p>实现 addChildren 方法</p>
</li>
<li><p>执行 addChildren</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><strong>【解题步骤】</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Item, Node &#125; <span class="keyword">from</span> <span class="string">"./data"</span>;</span><br><span class="line"><span class="comment">// + 实现函数签名</span></span><br><span class="line"><span class="comment">// + 实现函数体</span></span><br><span class="line"><span class="comment">//   + 处理 root</span></span><br><span class="line"><span class="comment">//   + 实现 addChildren 方法</span></span><br><span class="line"><span class="comment">//   + 执行 addChildren</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arrayToTree = <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(arr) || arr.length &lt; <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">const</span> [root] = arr.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.parentId === <span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> addChildren = <span class="function">(<span class="params">node, dataList</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> children = dataList</span><br><span class="line">      .filter(<span class="function"><span class="params">item</span> =&gt;</span> item.parentId === node.id)</span><br><span class="line">      .map(<span class="function"><span class="params">item</span> =&gt;</span> addChildren(item, dataList));</span><br><span class="line">    <span class="keyword">return</span> &#123; ...node, children &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> addChildren(root, arr);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> arrayToTree;</span><br></pre></td></tr></table></figure>



<h2 id="树的遍历"><a href="#树的遍历" class="headerlink" title="树的遍历"></a>树的遍历</h2><p><strong>【题目分析】</strong></p>
<p>把上一节树的数据转成数组？</p>
<p><strong>【答题思路】</strong></p>
<ol>
<li>单元测试</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> treeToArray <span class="keyword">from</span> <span class="string">"./treeToArray"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; originData, treeData &#125; <span class="keyword">from</span> <span class="string">"./data"</span>;</span><br><span class="line"></span><br><span class="line">test(<span class="string">"arrayToTee"</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  expect(</span><br><span class="line">    treeToArray(treeData).sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> (a.name &gt; b.name ? <span class="number">1</span> : <span class="number">-1</span>))</span><br><span class="line">  ).toEqual(originData.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> (a.name &gt; b.name ? <span class="number">1</span> : <span class="number">-1</span>)));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>大概步骤</p>
<ul>
<li>编写函数框架</li>
<li>实现  <code>const nodeToArray = (node: Node, result: Item[]) =&gt; {}</code></li>
<li>调用 nodeToArray</li>
</ul>
</li>
</ol>
<p><strong>【解题步骤】</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Node, Item &#125; <span class="keyword">from</span> <span class="string">"./data"</span>;</span><br><span class="line"><span class="keyword">const</span> treeToArray = <span class="function">(<span class="params">node: Node</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> nodeToArray = <span class="function">(<span class="params">node: Node, arr: Item[]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; children, ...item &#125; = node;</span><br><span class="line">    arr.push(item);</span><br><span class="line">    children.forEach(<span class="function"><span class="params">child</span> =&gt;</span> nodeToArray(child, arr));</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> nodeToArray(node, []);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> treeToArray;</span><br></pre></td></tr></table></figure>



<p><strong>【问题延伸】</strong></p>
<ul>
<li><p>二叉树遍历 <a href="https://leetcode.com/problems/binary-tree-preorder-traversal/" target="_blank" rel="noopener">https://leetcode.com/problems/binary-tree-preorder-traversal/</a></p>
</li>
<li><p>二叉树层序遍历 <a href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/binary-tree-level-order-traversal/</a></p>
</li>
<li><p>bfs </p>
</li>
</ul>
<h2 id="如何限制接口访问频次"><a href="#如何限制接口访问频次" class="headerlink" title="如何限制接口访问频次"></a>如何限制接口访问频次</h2><p><strong>【题目分析】</strong></p>
<p>如何限制接口访问频次？</p>
<p><strong>【答题思路】</strong></p>
<p>接口请求部分的逻辑我们可以封装成一个函数 fun。假设存在一个处理函数的函数better，接受fun，返回一个 betterFun。当 betterFun 被多次调用，fun 只在不要的时候执行。</p>
<p><code>const betterFun=better(fun);</code></p>
<p>限制接口访问一般涉及到用户的输入。主要有两个经典场景：<code>debounce</code> 强制函数在某段时间内只执行一次，<code>throttle</code> 强制函数以固定的速率执行。 <a href="https://css-tricks.com/the-difference-between-throttling-and-debouncing/" target="_blank" rel="noopener">对比demo</a></p>
<ol>
<li>使用 debounce（防抖）  <a href="https://codepen.io/llh911001/pen/EVMLJw?editors=101" target="_blank" rel="noopener">https://codepen.io/llh911001/pen/EVMLJw?editors=101</a></li>
<li>使用 throttle （截流） <a href="https://codepen.io/llh911001/pen/XmGYKV?editors=101" target="_blank" rel="noopener">https://codepen.io/llh911001/pen/XmGYKV?editors=101</a></li>
</ol>
<p>debounce 单元测试</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> debounce <span class="keyword">from</span> <span class="string">"./debounce"</span>;</span><br><span class="line">jest.useFakeTimers();</span><br><span class="line"></span><br><span class="line">test(<span class="string">"debounce"</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> func = jest.fn();</span><br><span class="line">  <span class="keyword">const</span> debounced = debounce(func, <span class="number">1000</span>);</span><br><span class="line">  debounced();</span><br><span class="line">  debounced();</span><br><span class="line"></span><br><span class="line">  jest.runAllTimers();</span><br><span class="line">  expect(func).toHaveBeenCalledTimes(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">test(<span class="string">"debounce twice"</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> func = jest.fn();</span><br><span class="line">  <span class="keyword">const</span> debounced = debounce(func, <span class="number">1000</span>);</span><br><span class="line">  debounced();</span><br><span class="line">  debounced();</span><br><span class="line">  setTimeout(debounced, <span class="number">20</span>);</span><br><span class="line">  setTimeout(debounced, <span class="number">2000</span>);</span><br><span class="line">  jest.runAllTimers();</span><br><span class="line">  expect(func).toHaveBeenCalledTimes(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<p><strong>【解题步骤】</strong></p>
<p>实现 debounce</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> debounce = <span class="function">(<span class="params">fn, delay: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> inDebounce;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> context = <span class="keyword">this</span>;</span><br><span class="line">    clearTimeout(inDebounce);</span><br><span class="line">    inDebounce = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> debounce;</span><br></pre></td></tr></table></figure>



<p><strong>【问题延伸】</strong></p>
<ol>
<li>实现 throttle</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* @param fn &#123;Function&#125;   实际要执行的函数</span></span><br><span class="line"><span class="comment">* @param delay &#123;Number&#125;  执行间隔，单位是毫秒（ms）</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* @return &#123;Function&#125;     返回一个“节流”函数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, threshold</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 记录上次执行的时间</span></span><br><span class="line">  <span class="keyword">var</span> last</span><br><span class="line">  <span class="comment">// 定时器</span></span><br><span class="line">  <span class="keyword">var</span> timer</span><br><span class="line">  <span class="comment">// 默认间隔为 250ms</span></span><br><span class="line">  threshold || (threshold = <span class="number">250</span>)</span><br><span class="line">  <span class="comment">// 返回的函数，每过 threshold 毫秒就执行一次 fn 函数</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 保存函数调用时的上下文和参数，传递给 fn</span></span><br><span class="line">    <span class="keyword">var</span> context = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">arguments</span></span><br><span class="line">    <span class="keyword">var</span> now = +<span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    <span class="comment">// 如果距离上次执行 fn 函数的时间小于 threshold，那么就放弃</span></span><br><span class="line">    <span class="comment">// 执行 fn，并重新计时</span></span><br><span class="line">    <span class="keyword">if</span> (last &amp;&amp; now &lt; last + threshold) &#123;</span><br><span class="line">      clearTimeout(timer)</span><br><span class="line">      <span class="comment">// 保证在当前时间区间结束后，再执行一次 fn</span></span><br><span class="line">      timer = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        last = now</span><br><span class="line">        fn.apply(context, args)</span><br><span class="line">      &#125;, threshold)</span><br><span class="line">    <span class="comment">// 在时间区间的最开始和到达指定间隔的时候执行一次 fn</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      last = now</span><br><span class="line">      fn.apply(context, args)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>debounce.leading vs debounce.trailing</li>
</ol>
<p>debounce.leading demo: <a href="https://codepen.io/dcorb/pen/GZWqNV" target="_blank" rel="noopener">https://codepen.io/dcorb/pen/GZWqNV</a></p>
<p>debounce.trailing demo: <a href="https://codepen.io/dcorb/pen/KVxGqN" target="_blank" rel="noopener">https://codepen.io/dcorb/pen/KVxGqN</a></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func, wait, immediate</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> timeout;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> context = <span class="keyword">this</span>, args = <span class="built_in">arguments</span>;</span><br><span class="line">		<span class="keyword">var</span> later = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			timeout = <span class="literal">null</span>;</span><br><span class="line">			<span class="keyword">if</span> (!immediate) func.apply(context, args);</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">var</span> callNow = immediate &amp;&amp; !timeout;</span><br><span class="line">		clearTimeout(timeout);</span><br><span class="line">		timeout = setTimeout(later, wait);</span><br><span class="line">		<span class="keyword">if</span> (callNow) func.apply(context, args);</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>参考：</p>
<p><a href="https://css-tricks.com/the-difference-between-throttling-and-debouncing/" target="_blank" rel="noopener">https://css-tricks.com/the-difference-between-throttling-and-debouncing/</a></p>
<p><a href="http://hackll.com/2015/11/19/debounce-and-throttle/index.html" target="_blank" rel="noopener">http://hackll.com/2015/11/19/debounce-and-throttle/index.html</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/50367441" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/50367441</a></p>
<p><a href="http://demo.nimius.net/debounce_throttle/" target="_blank" rel="noopener">http://demo.nimius.net/debounce_throttle/</a></p>
<h2 id="前后端联调注意事项"><a href="#前后端联调注意事项" class="headerlink" title="前后端联调注意事项"></a>前后端联调注意事项</h2><p>【题目分析】</p>
<p>你们公司（上一家公司），一般是怎么进行前后端联调的？</p>
<p>【答题思路】</p>
<ol>
<li><p>项目是前后端分离的项目；后端负责提供数据接口，前端负责页面。</p>
</li>
<li><p>一般接口完成之后，后端会给一份接口文档，包含接口地址，请求类型，请求的参数，可能的数据返回。</p>
</li>
<li><p>部分后端同学可能不写文档，会进行口头沟通。口头沟通的时候需要记录必要的信息。</p>
</li>
<li><p>联调的时候最好是工作时间（免得晚上，别人下班了），因为可能涉及到沟通。</p>
</li>
<li><p>最好开发之前想好你需要哪些数据，然后和后端提前沟通一下。避免一下你需要的数据，后端没有开发，导致项目工期延误。</p>
</li>
</ol>
<h1 id="React-串讲"><a href="#React-串讲" class="headerlink" title="React 串讲"></a>React 串讲</h1><h2 id="问题列表-1"><a href="#问题列表-1" class="headerlink" title="问题列表"></a>问题列表</h2><ol>
<li>Redux 是如何将 State 注入到 React 组件上去</li>
<li>Redux 在实际项目中的使用以及问题</li>
<li>React 中的 Hooks</li>
</ol>
<h2 id="学习目标"><a href="#学习目标" class="headerlink" title="学习目标"></a>学习目标</h2><ul>
<li><input checked="" disabled="" type="checkbox"> 了解 Redux 与 React-Redux 之间的关系以及它们的基本原理</li>
<li><input checked="" disabled="" type="checkbox"> 了解一些关于 Redux 的最佳实践以及异步问题解决方案</li>
<li><input checked="" disabled="" type="checkbox"> 了解 React Hooks 的特性以及如何在实际项目中使用 React Hooks</li>
</ul>
<h2 id="问题详解"><a href="#问题详解" class="headerlink" title="问题详解"></a>问题详解</h2><h3 id="1-Redux-是如何将-State-注入到-React-组件上去"><a href="#1-Redux-是如何将-State-注入到-React-组件上去" class="headerlink" title="1. Redux 是如何将 State 注入到 React 组件上去"></a>1. Redux 是如何将 State 注入到 React 组件上去</h3><h4 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h4><ul>
<li>React：用于构建用户界面的 JavaScript 库（负责组件的 UI 界面渲染的库）</li>
<li>Redux：JavaScript 状态容器（负责管理数据的工具）</li>
</ul>
<ul>
<li><blockquote>
<p>回顾一下 Redux 的用法</p>
</blockquote>
</li>
</ul>
<p><a href="https://www.redux.org.cn/" target="_blank" rel="noopener"><strong>React-Redux</strong></a></p>
<p>扩展：<a href="https://github.com/titouancreach/vuejs-redux" target="_blank" rel="noopener">vuejs-redux</a> ,  <a href="https://github.com/angular-redux/ng-redux" target="_blank" rel="noopener">ng-redux</a></p>
<blockquote>
<p>结论：Redux 是一个独立的库，与 React 并没有直接关系，是 React-Redux 将它们俩联系起来的</p>
</blockquote>
<p><strong>Redux 解决了什么问题？</strong></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210317112456992.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<blockquote>
<p>结论： Redux 的出现其实就是解决了复杂应用的状态管理问题，可以<strong>跨层级任意传递数据</strong>。</p>
</blockquote>
<h4 id="问题详解-1"><a href="#问题详解-1" class="headerlink" title="问题详解"></a>问题详解</h4><p><strong>Redux 的原理</strong></p>
<p>Redux 就是一个经典的<strong>发布订阅器</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Button.addEventListener(<span class="string">'click'</span>, () =&gt; &#123; ... &#125;)  <span class="comment">// 订阅 -- 当触发 A 的时候 就执行 B</span></span><br><span class="line">Button.removeEventListener(<span class="string">'click'</span>, () =&gt; &#123; ... &#125;) <span class="comment">// 取消订阅 - 当触发 A 的时候，不再执行 B</span></span><br><span class="line">Button.onClick <span class="comment">// 发布 -- 触发 A</span></span><br></pre></td></tr></table></figure>



<p>Redux 核心源码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>reducer   reducer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>preloadedState 初始化的 state，用的相对较少，一般在服务端渲染的时候使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>enhancer  中间件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span>(<span class="params">reducer, preloadedState, enhancer</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 实现第二个形参选填</span></span><br><span class="line">  <span class="comment">// 只有当第二参数传入的是中间件才会执行下面的代码</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> preloadedState === <span class="string">'function'</span> &amp;&amp; <span class="keyword">typeof</span> enhancer === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    enhancer = preloadedState;</span><br><span class="line">    preloadedState = <span class="literal">undefined</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> currentReducer = reducer;</span><br><span class="line">  <span class="keyword">let</span> currentState = preloadedState; <span class="comment">// 整个应用所有的 State 都存储在这个变量里</span></span><br><span class="line">  <span class="keyword">let</span> currentListeners = []; <span class="comment">// 订阅传进来的的回调函数 &lt;=&gt;  Button.addEventListener('click', () =&gt; &#123; ... &#125;)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 这是一个很重要的设计</span></span><br><span class="line">  <span class="keyword">let</span> nextListeners = currentListeners;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> currentState;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">listener</span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> (nextListeners === currentListeners) &#123;</span><br><span class="line">      <span class="comment">// 浅复制</span></span><br><span class="line">      <span class="comment">// 实际上 nextListeners 就是 currentListeners，避免直接操作 currentListeners，因为</span></span><br><span class="line">      <span class="comment">// 其他地方会用到 currentListeners，从而造成数据不一致。</span></span><br><span class="line">      nextListeners = [...currentListeners];</span><br><span class="line">    &#125;</span><br><span class="line">    nextListeners.push(listener);</span><br><span class="line">		</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">unsubscribe</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (nextListeners === currentListeners) &#123;</span><br><span class="line">        <span class="comment">// 浅复制</span></span><br><span class="line">        nextListeners = [...currentListeners];</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> index = nextListeners.indexOf(listener);</span><br><span class="line">      nextListeners.splice(index, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// Button.addEventListener('click', () =&gt; &#123; ... &#125;)</span></span><br><span class="line"><span class="comment">// Button.removeEventListener('click', () =&gt; &#123; ... &#125;)</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">    currentState = currentReducer(currentState, action); <span class="comment">// 调用 reducer 来更新数据</span></span><br><span class="line">   </span><br><span class="line">    <span class="keyword">const</span> listeners = (currentListeners = nextListeners); <span class="comment">// 保证当前的 listeners 是最新的</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; listeners.length; i++) &#123;</span><br><span class="line">      listeners[i](); <span class="comment">// 依次执行回调函数</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> action;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 手动触发一次 dispatch，初始化</span></span><br><span class="line">  dispatch(&#123;<span class="attr">type</span>: <span class="string">'INIT'</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    getState,</span><br><span class="line">    dispatch,</span><br><span class="line">    subscribe,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>总结：<strong>Redux 就是帮我们用一个变量存储所有的 State，并且提供了发布功能来修改数据，以及订阅功能来触发回调（但是回调之后干嘛？自己解决）。</strong></p>
</blockquote>
<p><strong>React-Redux 做了什么事情?</strong></p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/20210317112550161.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>Provider 核心源码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Provider</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// context 往所有子组件，孙组件里传递数据</span></span><br><span class="line">  <span class="comment">// props   父组件往子组件里传递数据</span></span><br><span class="line">  <span class="comment">// state   组件自身的数据</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 声明一个 context 数据</span></span><br><span class="line">  getChildContext() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">store</span>: <span class="keyword">this</span>.store &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props, context) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props, context)</span><br><span class="line">    <span class="keyword">this</span>.store = props.store</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> React.Children.only(<span class="keyword">this</span>.props.children)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Provider.childContextTypes = &#123;</span><br><span class="line">  store: PropTypes.object</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>总结：<strong>Provider 就是通过 React 的 Context API 把数据往下传 。</strong></p>
</blockquote>
<p>connect 核心源码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// connect() =&gt; () =&gt; &#123;&#125; 函数的柯里化</span></span><br><span class="line"><span class="comment">// const sum = (a) =&gt; &#123; return (b) =&gt; a + b &#125;</span></span><br><span class="line"><span class="comment">// sum(1)(2) -&gt; connect(mapStateToProps, mapDispatchToProps)(Comp)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// HOC 高阶组件</span></span><br><span class="line"><span class="keyword">const</span> connect = <span class="function">(<span class="params">mapStateToProps = state =&gt; state, mapDispatchToProps = &#123;&#125;</span>) =&gt;</span> <span class="function">(<span class="params">WrapComponent</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">      store: PropTypes.object</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">constructor</span>(props, context) &#123;</span><br><span class="line">      <span class="keyword">super</span>(props, context)</span><br><span class="line">      <span class="keyword">this</span>.state = &#123;</span><br><span class="line">        props: &#123;&#125; <span class="comment">// 声明了一个叫做 props 的 state</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; store &#125; = <span class="keyword">this</span>.context  <span class="comment">// 从 Context 中拿到 store 对象</span></span><br><span class="line">      store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.update()) <span class="comment">// 订阅 Redux 的数据更新</span></span><br><span class="line">      <span class="keyword">this</span>.update()</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 每次数据有更新的时候，就会调用这个方法</span></span><br><span class="line">    update() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; store &#125; = <span class="keyword">this</span>.context <span class="comment">// 从 Context 中拿到 store 对象</span></span><br><span class="line">      <span class="keyword">const</span> stateProps = mapStateToProps(store.getState()) <span class="comment">// 把 store 中的全部数据传到组件内部</span></span><br><span class="line">      <span class="keyword">const</span> dispatchProps = mapDispatchToProps(store.dispatch)<span class="comment">//把 store.dispatch 传到组件内部</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 调用 setState 触发组件更新</span></span><br><span class="line">      <span class="comment">// 将最新的 state 以及 dispatch 合并到当前组件的 props 上</span></span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        props: &#123;</span><br><span class="line">          ...this.state.props,</span><br><span class="line">          ...stateProps,</span><br><span class="line">          ...dispatchProps</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="comment">// 传入 props</span></span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrapComponent</span> &#123;<span class="attr">...this.state.props</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">WrapComponent</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const mapStateToProps = state =&gt; &#123; Tips：这里注入进来的</span></span><br><span class="line"><span class="comment">//   return &#123;</span></span><br><span class="line"><span class="comment">//     value: state,</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const mapDispatchToProps = dispatch =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   return &#123;</span></span><br><span class="line"><span class="comment">//     onIncrement: () =&gt; dispatch(&#123; type: 'INCREMENT' &#125;),</span></span><br><span class="line"><span class="comment">//     onDecrement: () =&gt; dispatch(&#123; type: 'DECREMENT' &#125;),</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>总结：<strong>connect 就是一个高阶组件，接收 Provider 传递过来的 store 对象，并订阅 store 中的数据，如果 store 中的数据发生改变，就调用 setState 触发组件更新。</strong></p>
</blockquote>
<h4 id="答题思路"><a href="#答题思路" class="headerlink" title="答题思路"></a>答题思路</h4><ol>
<li>首先明确与 React 产生关联的是 React-Redux 这个库</li>
<li>Redux 的原理就是一个<strong>发布订阅器</strong>，帮我们用一个变量存储所有的 State，并且提供了发布功能来修改数据，以及订阅功能来触发回调 + 50</li>
<li>而 React-Redux 的作用就是订阅 Store 里数据的更新，他包含两个重要元素，Provider 和 connect 方法 +10</li>
<li><strong>Provider 的作用就是通过  Context API 把 Store  对象注入到 React 组件上去</strong> +20</li>
<li>而 connect 方法就是一个高阶组件，在高阶组件里通过订阅 Store 中数据的更新，从而通过调用 setState 方法来触发组件更新 +20</li>
</ol>
<p>###2. Redux 在实际项目中的使用以及问题</p>
<h4 id="问题分析-1"><a href="#问题分析-1" class="headerlink" title="问题分析"></a>问题分析</h4><p>这个问题偏实践，比较开放，可以从以下三个方面考虑：</p>
<ol>
<li>为什么要使用 Redux</li>
<li>如果一定是使用，有哪些最佳实践</li>
<li>Redux 的异步问题怎么处理</li>
</ol>
<p>####问题详解</p>
<p><strong>先考虑需不需要使用 Redux？</strong></p>
<p>Redux 的作者写过一篇文章 <a href="https://zhuanlan.zhihu.com/p/22597353" target="_blank" rel="noopener">也许你可以不必使用 Redux</a></p>
<ul>
<li><p>如果你不知道是否需要 Redux，那就是不需要它</p>
</li>
<li><p>只有遇到 React 实在解决不了的问题，你才需要 Redux</p>
</li>
</ul>
<blockquote>
<p>结论：<strong>如果你的 UI 层非常简单，没有很多交互，Redux 就是不必要的，用了反而增加复杂性（reducer, action =&gt; this.setState() ）。</strong></p>
</blockquote>
<p><strong>如果一定要使用 Redux, 可以有哪些最佳实践？</strong></p>
<p>模拟面试对话：</p>
<p>Q: 面试官爸爸    A: 你</p>
<p>Q: 小伙子，我问你，你觉得你们的项目使用 Redux，吐槽最多的地方是什么？</p>
<p>-&gt;</p>
<p>问题分析</p>
<p>​    先思考使用 Redux 的痛点是什么？</p>
<p>​    修改一次数据，太麻烦，dispatch(action) -&gt; 调用 reducer 计算 -&gt; 触发回调 -&gt; 更新数据</p>
<p>-&gt;</p>
<p>A: Redux 在项目中使用，最大的弊端就是样板代码（action, reducer）太多了，修改数据的链路太长。</p>
<p>-&gt;</p>
<p>Q: 那为什么你还要使用 Redux 呢？</p>
<p>-&gt;</p>
<p>A: 因为 Redux 可以解决跨组件间数据传递的问题，并且修改数据很清晰。</p>
<p>-&gt;</p>
<p>Q: nice，那你在使用 Redux 有哪些比较好的实践方式呢？</p>
<p>-&gt;</p>
<p>问题分析</p>
<p>​    从痛点出发，想办法解决 Redux 的痛点。</p>
<p>​    可以通过一些手段减少模板代码，从而简化 Redux API</p>
<ol>
<li>使用 <a href="https://github.com/redux-utilities/redux-actions" target="_blank" rel="noopener">redux-actions</a> ，在初始化 reducer 和 action 构造器时减少样板代码 -&gt; 看看这么使用<ul>
<li>减少创建 action 时写一堆固定的方法<ul>
<li>() =&gt; ({ type: ‘XXX’ })   -&gt;    createAction(‘XXX’, payload =&gt; payload)</li>
</ul>
</li>
<li>减少创建 reducer 时写一堆固定的 switch<ul>
<li>switch{}   -&gt;   handleActions({})</li>
</ul>
</li>
</ul>
</li>
<li>使用 <a href="https://github.com/facebook/create-react-app" target="_blank" rel="noopener">cli 工具</a>，帮我们自动生成模板代码<ul>
<li>使用 <a href="https://yeoman.io/" target="_blank" rel="noopener">yeoman</a> 来帮我们用命令一键创建样板文件和样本代码（详细可参见在职加薪课）</li>
</ul>
</li>
</ol>
<p>-&gt;</p>
<p>A:  可以通过一些手段减少模板，从而简化 Redux API，比如引入 Redux-Actions 来减少抒写固定不变的代码，以及使用 yeoman 来用命令自动生成样板文件以及代码。</p>
<blockquote>
<p>总结：</p>
<p>Redux 最大的弊端是样板代码太多，修改数据的链路太长。</p>
<p>解决方案：可借助一些工具，帮我们减少创建样板代码的过程</p>
<ul>
<li>使用 Redux-Actions 来减少抒写固定不变的代码，让我们的 actions 和 reduces 更清晰</li>
<li>同时还可以使用 yeoman 等 cli 工具，帮我们用命令一键创建样板文件和样本代码</li>
</ul>
</blockquote>
<p><strong>Redux 的异步问题怎么处理？</strong></p>
<p>真实业务开发我们需要处理异步请求，比如：请求后台数据，延迟执行某个效果，setTimout, setInterval 等等，所以当 Redux 遇到异步操作的时候，该如何处理?</p>
<p>模拟面试对话：</p>
<p>Q: 为什么 Redux 处理不了异步问题？</p>
<p>-&gt;</p>
<p>问题分析</p>
<p>​    从 Redux 代码的原理出发</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dispatch(action) <span class="comment">// action = &#123; type: 'XXX', payload: 'xxx' &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// -&gt;reducer 是一个纯函数，无法处理其他类型的数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 所以 dispatch 默认接收的 action 不可以是其他类型的</span></span><br><span class="line">dispatch(<span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    dispatch(&#123; <span class="attr">type</span>: <span class="string">'INCREMENT'</span>&#125;)</span><br><span class="line">  &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<p>A: dispatch 默认只能接收一个 Object 类型的 action，因为 reducer 里面要接收 action.type 来处理不同的数据。</p>
<p>-&gt;</p>
<p>Q: very nice，那怎么解决？</p>
<p>-&gt;</p>
<p>问题分析：</p>
<p>​    找度娘，Redux 异步问题可以通过中间件来解决</p>
<ol>
<li><p>使用 <a href="https://github.com/reduxjs/redux-thunk" target="_blank" rel="noopener">Redux-thunk</a> 中间件，来解决异步 Action 的问题</p>
<ol start="2">
<li>使用 <a href="https://redux-saga-in-chinese.js.org/" target="_blank" rel="noopener">Redux-saga</a> 中间件，让异步行为成为架构中独立的一层(称为 saga)（详细可参见中级程序员课程）</li>
</ol>
</li>
</ol>
<blockquote>
<p>总结：</p>
<p>Redux 默认 的 dispatch 只能接收一个 Object 类型的 action，如果要让 Redux 支持异步操作，可以通过引入 Redux-thunk 或者 Redux-saga 等其他的中间件来使 Redux 支持异步 Action。</p>
</blockquote>
<p>####答题思路</p>
<ol>
<li>Redux 会额外增加代码的复杂性，使用前需要考虑当前项目的规模和需求 30</li>
<li>可以使用 Redux-Actions 来帮我们减少抒写固定不变的代码，并且使用 cli 工具来帮我们自动创建样板代码 30 </li>
<li>Redux 默认无法处理异步 Action 是因为 dispatch 只能接收一个 Object 类型的 Action。但是可以通过引入中间件的方式来解决 40</li>
</ol>
<p>###3. React 中的 Hooks</p>
<p>####题目分析</p>
<p><strong>回顾一下组件类型</strong></p>
<p>函数组件：</p>
<ol>
<li>一个函数就是一个组件</li>
<li>一个函数组件必须有 return</li>
<li>return 的是一个 React 元素</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function Welcome (props) &#123;</span><br><span class="line">  return &lt;h1&gt;Welcome &#123;props.name&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>类组件：</p>
<ol>
<li>一个 Class 就是一个类组件</li>
<li>所有类组件都是继承于 React.Component</li>
<li>React.Component 类有自带的属性和方法, 比如 render，componentDidMount 等其他生命周期</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Welcome extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;h1&gt;Welcome &#123; this.props.name &#125;&lt;&#x2F;h1&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>函数组件 vs 类组件</strong></p>
<table>
<thead>
<tr>
<th>区别</th>
<th>函数组件(无状态组件)</th>
<th>类组件</th>
</tr>
</thead>
<tbody><tr>
<td>是否有 this</td>
<td>没有</td>
<td>有</td>
</tr>
<tr>
<td>是否有生命周期</td>
<td>没有</td>
<td>有</td>
</tr>
<tr>
<td>是否有状态 state</td>
<td>没有</td>
<td>有</td>
</tr>
</tbody></table>
<p><strong>Hooks 的作用，以及有哪些特性？</strong></p>
<p>React Hooks 是 v16.8 版本引入了全新的 API，它算是一个<strong>颠覆性</strong>的变革。</p>
<ul>
<li>所有的 React 组件都可以是一个函数组件，再也不需要写类组件了</li>
<li>再也不需要记住 React 有哪些生命周期函数了</li>
</ul>
<p>####问题详解</p>
<p><strong>先从写法上来对比</strong></p>
<p>Class 版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class Example extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.state &#x3D; &#123;</span><br><span class="line">      count: 0</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    &#x2F;&#x2F; 改变 title</span><br><span class="line">    document.title &#x3D; &#96;You clicked $&#123;this.state.count&#125; times&#96;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line">    document.title &#x3D; &#96;You clicked $&#123;this.state.count&#125; times&#96;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;You clicked &#123;this.state.count&#125; times&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;button onClick&#x3D;&#123;() &#x3D;&gt; this.setState(&#123; count: this.state.count + 1 &#125;)&#125;&gt;</span><br><span class="line">          Click me</span><br><span class="line">        &lt;&#x2F;button&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>React Hooks 版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useState, useEffect &#125; from &#39;react&#39;; &#x2F;&#x2F;v16.8</span><br><span class="line"></span><br><span class="line">function Example() &#123;</span><br><span class="line">  const [count, setCount] &#x3D; useState(0); &#x2F;&#x2F; 类似于 this.state &#x3D; &#123; count: 0 &#125;</span><br><span class="line">  const [loading, setLoading] &#x3D; useState(false); &#x2F;&#x2F; this.state &#x3D; &#123;loading: false&#125;</span><br><span class="line">	&#x2F;&#x2F; 声明的名称叫做 xxx, 那么必定有一个值叫做 setXxx() (固定的写法)</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F; 类似于 componentDidMount 和 componentDidUpdate;</span><br><span class="line">  useEffect(() &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; 改变 title</span><br><span class="line">    document.title &#x3D; &#96;You clicked $&#123;count&#125; times&#96;;</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">    useEffect(() &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; 发送 ajax 请求</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;&#x2F;p&gt;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(count + 1)&#125;&gt;</span><br><span class="line">        Click me</span><br><span class="line">      &lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>结论：<strong>React Hooks 可以让我们的代码变得更加简洁，结构更清晰</strong></p>
</blockquote>
<p><strong>在实际项目中如何使用 Hooks？</strong></p>
<p>比如有一个需求，我们需要在页面 A 和 页面 B 上请求一部电影的详细数据。</p>
<p>传统做法：</p>
<p>A -&gt; 加载 -&gt; 发送请求 <code>https://swapi.co/api/films/1</code></p>
<p>B -&gt; 加载 -&gt; 发送请求 <code>https://swapi.co/api/films/2</code></p>
<p>普通的写法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">class App extends React.Component &#123;</span><br><span class="line">	constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.state &#x3D; &#123;</span><br><span class="line">      loading: false, &#x2F;&#x2F; 请求的菊花状态</span><br><span class="line">      data: &#123;&#125;,       &#x2F;&#x2F; 电影的详细数据</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;  </span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    this.setState(&#123;  &#x2F;&#x2F; 1. 设置 loading 为 true</span><br><span class="line">      loading: true,</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    fetch(&#96;https:&#x2F;&#x2F;swapi.co&#x2F;api&#x2F;films&#x2F;$&#123;this.props.filmId&#125;&#96;)  &#x2F;&#x2F; 2. 发送请求</span><br><span class="line">      .then(data &#x3D;&gt; &#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">          data: data, &#x2F;&#x2F; 3. 收到请求后，设置 data 为请求到的数据</span><br><span class="line">          loading: false, &#x2F;&#x2F; 4. 设置 loading 为 false</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line">     this.fethData(this.props.filmId);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F; 无法抽离出去，</span><br><span class="line">  fetchData &#x3D; (filmId) &#x3D;&gt; &#123;</span><br><span class="line">    this.setState(&#123;  &#x2F;&#x2F; 1. 设置 loading 为 true</span><br><span class="line">      loading: true,</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    fetch(&#96;https:&#x2F;&#x2F;swapi.co&#x2F;api&#x2F;films&#x2F;$&#123;filmId&#125;&#96;)  &#x2F;&#x2F; 2. 发送请求</span><br><span class="line">      .then(data &#x3D;&gt; &#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">          data: data, &#x2F;&#x2F; 3. 收到请求后，设置 data 为请求到的数据</span><br><span class="line">          loading: false, &#x2F;&#x2F; 4. 设置 loading 为 false</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; loading, data &#125; &#x3D; this.state;</span><br><span class="line">    if (loading &#x3D;&#x3D;&#x3D; true) &#123;</span><br><span class="line">      return &lt;p&gt;Loading ...&lt;&#x2F;p&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;电影名称: &#123;data.title&#125;&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;p&gt;导演: &#123;data.producer&#125;&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;p&gt;发布日期: &#123;data.release_date&#125;&lt;&#x2F;p&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>解决问题的心路历程：</p>
<p>抽离相同的代码部分（发送请求的过程）</p>
<p>-&gt;</p>
<p>抽离出去的代码返回什么（页面里要用到的是什么数据）</p>
<p>-&gt;</p>
<p>loading 和 data</p>
<p>-&gt;</p>
<p>创建自定义 Hooks</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意 hooks 约定必须以 use 开头(useA, useB)</span></span><br><span class="line"><span class="keyword">const</span> useFetchData = <span class="function">(<span class="params">filmId</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [loading, setLoading] = useState(<span class="literal">false</span>); <span class="comment">// 只有在第一次加载的时候才会 被 false 复制</span></span><br><span class="line">  <span class="keyword">const</span> [data, setData] = useState(&#123;&#125;);</span><br><span class="line">  </span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setLoading(<span class="literal">true</span>); <span class="comment">// 1. 设置 loading 为 true</span></span><br><span class="line">    fetch(<span class="string">`https://swapi.co/api/films/<span class="subst">$&#123;filmId&#125;</span>`</span>) <span class="comment">// 2. 发送请求</span></span><br><span class="line">      .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        setData(data); <span class="comment">// 3. 收到请求后，设置 data 为请求到的数据</span></span><br><span class="line">        setLoading(<span class="literal">false</span>); <span class="comment">// 4. 设置 loading 为 false</span></span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;, [filmId]); <span class="comment">// filmId 变化的时候，才触发 useEffect</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> loading, data];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>使用自定义 Hooks</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import useFetchData from &#39;.&#x2F;useFetchData&#39;;</span><br><span class="line"></span><br><span class="line">function App(&#123; filmId &#125;) &#123;</span><br><span class="line">  const [loading, data] &#x3D; useFetchData(filmId);</span><br><span class="line"></span><br><span class="line">  if (loading &#x3D;&#x3D;&#x3D; true) &#123;</span><br><span class="line">    return &lt;p&gt;Loading ...&lt;&#x2F;p&gt;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;电影名称: &#123;data.title&#125;&lt;&#x2F;p&gt;</span><br><span class="line">      &lt;p&gt;导演: &#123;data.producer&#125;&lt;&#x2F;p&gt;</span><br><span class="line">      &lt;p&gt;发布日期: &#123;data.release_date&#125;&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>扩展：<a href="https://github.com/gragland/usehooks" target="_blank" rel="noopener">社区共享了很多已经实现好的常用业务 Hooks</a></p>
<h4 id="答题思路-1"><a href="#答题思路-1" class="headerlink" title="答题思路"></a>答题思路</h4><ol>
<li>React Hooks 是一个新的 API，可以用函数来写所有的组件</li>
<li>可以让函数组件也可以拥有自己的状态管理（包括 state 和生命周期函数）</li>
<li>可以通过创建自定义的 Hooks 来抽离可复用的业务组件</li>
</ol>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:1442243445@qq.com">小小王</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/12/20/Front%20end%20questions/">http://yoursite.com/2020/12/20/Front%20end%20questions/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">Wang</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Front-end-questions/">Front end questions</a></div><div class="post_share"><div class="social-share" data-image="/img/bg.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/12/25/KOA/"><img class="prev-cover" data-src="/img/bg8.jpg" onerror="onerror=null;src='/'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">KOA</div></div></a></div><div class="next-post pull-right"><a href="/2020/12/16/interaction/"><img class="next-cover" data-src="/img/bg4.jpg" onerror="onerror=null;src='/'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">交互</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 小小王</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>粤ICP备20054751</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><script src="js/move_mouse/script.js"></script><script src="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/js/pool.min.js"></script><script src="/js/down_mouse/love.js"></script></body></html>