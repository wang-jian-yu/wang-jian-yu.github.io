<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Vue学习 | Wang</title><meta name="description" content="笔记一、Vue 基础：1.模板语法有 2 大类： 插值语法： 功能：用于解析标签体内容。写法：{ {xxx} }，xxx 是 js 表达式，且可以直接读取到 data 中的所有属性。  指令语法：功能：用于解析标签（包括：标签属性、标签体内容、绑定事件…..）。举例：v-bind:href&#x3D;&quot;xxx&quot; 或 简写为 :href&#x3D;&quot;xxx&quot;，xxx 同样要写 j"><meta name="keywords" content="Vue"><meta name="author" content="小小王,1442243445@qq.com"><meta name="copyright" content="小小王"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/Banq-1.ico"><link rel="canonical" href="http://yoursite.com/2022/10/16/vue/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="Vue学习"><meta property="og:url" content="http://yoursite.com/2022/10/16/vue/"><meta property="og:site_name" content="Wang"><meta property="og:description" content="笔记一、Vue 基础：1.模板语法有 2 大类： 插值语法： 功能：用于解析标签体内容。写法：{ {xxx} }，xxx 是 js 表达式，且可以直接读取到 data 中的所有属性。  指令语法：功能：用于解析标签（包括：标签属性、标签体内容、绑定事件…..）。举例：v-bind:href&#x3D;&quot;xxx&quot; 或 简写为 :href&#x3D;&quot;xxx&quot;，xxx 同样要写 j"><meta property="og:image" content="http://yoursite.com/img/bg9.jpg"><meta property="article:published_time" content="2022-10-16T03:28:24.000Z"><meta property="article:modified_time" content="2023-03-09T11:56:58.204Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="Mac" href="http://yoursite.com/2022/11/20/mac/"><link rel="next" title="JS正则表达式" href="http://yoursite.com/2022/03/18/jsregex/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="/css/move_mouse/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/iconfont.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/pool.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">73</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">66</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">51</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#笔记"><span class="toc-number">1.</span> <span class="toc-text">笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、Vue-基础："><span class="toc-number">1.1.</span> <span class="toc-text">一、Vue 基础：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-模板语法有-2-大类："><span class="toc-number">1.1.0.1.</span> <span class="toc-text">1.模板语法有 2 大类：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-俩种数据绑定的方式"><span class="toc-number">1.1.0.2.</span> <span class="toc-text">2.俩种数据绑定的方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-data-与-el-的俩种写法"><span class="toc-number">1.1.0.3.</span> <span class="toc-text">3.data 与 el 的俩种写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-MVVM-模型"><span class="toc-number">1.1.0.4.</span> <span class="toc-text">4.MVVM 模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-数据代理"><span class="toc-number">1.1.0.5.</span> <span class="toc-text">5.数据代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-事件处理"><span class="toc-number">1.1.0.6.</span> <span class="toc-text">6.事件处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-Vue-中的事件修饰符："><span class="toc-number">1.1.0.7.</span> <span class="toc-text">7.Vue 中的事件修饰符：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-按键别名："><span class="toc-number">1.1.0.8.</span> <span class="toc-text">8. 按键别名：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-计算属性-computed："><span class="toc-number">1.1.0.9.</span> <span class="toc-text">9.计算属性 computed：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-监视属性-watch："><span class="toc-number">1.1.0.10.</span> <span class="toc-text">10.监视属性 watch：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-绑定样式："><span class="toc-number">1.1.0.11.</span> <span class="toc-text">11.绑定样式：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-条件渲染："><span class="toc-number">1.1.0.12.</span> <span class="toc-text">12.条件渲染：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-key-的原理"><span class="toc-number">1.1.0.13.</span> <span class="toc-text">13. key 的原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-监视数据的原理："><span class="toc-number">1.1.0.14.</span> <span class="toc-text">14.监视数据的原理：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-收集表单数据："><span class="toc-number">1.1.0.15.</span> <span class="toc-text">15.收集表单数据：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-过滤器："><span class="toc-number">1.1.0.16.</span> <span class="toc-text">16.过滤器：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-内置指令："><span class="toc-number">1.1.0.17.</span> <span class="toc-text">17.内置指令：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-自定义指令"><span class="toc-number">1.1.0.18.</span> <span class="toc-text">18.自定义指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19-生命周期"><span class="toc-number">1.1.0.19.</span> <span class="toc-text">19. 生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#20-组件"><span class="toc-number">1.1.0.20.</span> <span class="toc-text">20. 组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21-一个重要的内置关系："><span class="toc-number">1.1.0.21.</span> <span class="toc-text">21 一个重要的内置关系：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22-关于不同版本的-Vue"><span class="toc-number">1.1.0.22.</span> <span class="toc-text">22.关于不同版本的 Vue</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、工程化项目"><span class="toc-number">1.2.</span> <span class="toc-text">二、工程化项目</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-文件结构"><span class="toc-number">1.2.0.1.</span> <span class="toc-text">1. 文件结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-vue-config-js-配置文件"><span class="toc-number">1.2.0.2.</span> <span class="toc-text">2.vue.config.js 配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-ref-属性"><span class="toc-number">1.2.0.3.</span> <span class="toc-text">3. ref 属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-props-配置项"><span class="toc-number">1.2.0.4.</span> <span class="toc-text">4.props 配置项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-mixin-混入"><span class="toc-number">1.2.0.5.</span> <span class="toc-text">5.mixin(混入)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-插件"><span class="toc-number">1.2.0.6.</span> <span class="toc-text">6.插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-scoped-样式"><span class="toc-number">1.2.0.7.</span> <span class="toc-text">7.scoped 样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-总结-TodoList-案例"><span class="toc-number">1.2.0.8.</span> <span class="toc-text">8.总结 TodoList 案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-webStorage"><span class="toc-number">1.2.0.9.</span> <span class="toc-text">9.webStorage</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-组件的自定义事件"><span class="toc-number">1.2.0.10.</span> <span class="toc-text">10.组件的自定义事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-全局事件总线（GlobalEventBus）"><span class="toc-number">1.2.0.11.</span> <span class="toc-text">11.全局事件总线（GlobalEventBus）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-消息订阅与发布（pubsub）"><span class="toc-number">1.2.0.12.</span> <span class="toc-text">12.消息订阅与发布（pubsub）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-nextTick"><span class="toc-number">1.2.0.13.</span> <span class="toc-text">13.nextTick</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-Vue-封装的过度与动画"><span class="toc-number">1.2.0.14.</span> <span class="toc-text">14.Vue 封装的过度与动画</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-vue-脚手架配置代理"><span class="toc-number">1.2.0.15.</span> <span class="toc-text">15.vue 脚手架配置代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-插槽"><span class="toc-number">1.2.0.16.</span> <span class="toc-text">16.插槽</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、Vuex"><span class="toc-number">1.3.</span> <span class="toc-text">三、Vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-概念"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-何时使用？"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.何时使用？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-搭建-vuex-环境"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.搭建 vuex 环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-基本使用"><span class="toc-number">1.3.4.</span> <span class="toc-text">4.基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-getters-的使用"><span class="toc-number">1.3.5.</span> <span class="toc-text">5.getters 的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-四个-map-方法的使用"><span class="toc-number">1.3.6.</span> <span class="toc-text">6.四个 map 方法的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-模块化-命名空间"><span class="toc-number">1.3.7.</span> <span class="toc-text">7.模块化+命名空间</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、路由"><span class="toc-number">1.4.</span> <span class="toc-text">四、路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-基本使用"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-几个注意点"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.几个注意点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-多级路由（多级路由）"><span class="toc-number">1.4.3.</span> <span class="toc-text">3.多级路由（多级路由）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-路由的-query-参数"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.路由的 query 参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-命名路由"><span class="toc-number">1.4.5.</span> <span class="toc-text">5.命名路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-路由的-params-参数"><span class="toc-number">1.4.6.</span> <span class="toc-text">6.路由的 params 参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-路由的-props-配置"><span class="toc-number">1.4.7.</span> <span class="toc-text">7.路由的 props 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-lt-router-link-gt-的-replace-属性"><span class="toc-number">1.4.8.</span> <span class="toc-text">8.&lt;router-link&gt;的 replace 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-编程式路由导航"><span class="toc-number">1.4.9.</span> <span class="toc-text">9.编程式路由导航</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-缓存路由组件"><span class="toc-number">1.4.10.</span> <span class="toc-text">10.缓存路由组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-两个新的生命周期钩子"><span class="toc-number">1.4.11.</span> <span class="toc-text">11.两个新的生命周期钩子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-路由守卫"><span class="toc-number">1.4.12.</span> <span class="toc-text">12.路由守卫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-路由器的两种工作模式"><span class="toc-number">1.4.13.</span> <span class="toc-text">13.路由器的两种工作模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue3-快速上手"><span class="toc-number">2.</span> <span class="toc-text">Vue3 快速上手</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Vue3-简介"><span class="toc-number">2.0.1.</span> <span class="toc-text">1.Vue3 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Vue3-带来了什么"><span class="toc-number">2.0.2.</span> <span class="toc-text">2.Vue3 带来了什么</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-性能的提升"><span class="toc-number">2.0.2.1.</span> <span class="toc-text">1.性能的提升</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-源码的升级"><span class="toc-number">2.0.2.2.</span> <span class="toc-text">2.源码的升级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-拥抱-TypeScript"><span class="toc-number">2.0.2.3.</span> <span class="toc-text">3.拥抱 TypeScript</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-新的特性"><span class="toc-number">2.0.2.4.</span> <span class="toc-text">4.新的特性</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#一、创建-Vue3-0-工程"><span class="toc-number">3.</span> <span class="toc-text">一、创建 Vue3.0 工程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-使用-vue-cli-创建"><span class="toc-number">3.1.</span> <span class="toc-text">1.使用 vue-cli 创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-使用-vite-创建"><span class="toc-number">3.2.</span> <span class="toc-text">2.使用 vite 创建</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二、常用-Composition-API"><span class="toc-number">4.</span> <span class="toc-text">二、常用 Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-拉开序幕的-setup"><span class="toc-number">4.1.</span> <span class="toc-text">1.拉开序幕的 setup</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-ref-函数"><span class="toc-number">4.2.</span> <span class="toc-text">2.ref 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-reactive-函数"><span class="toc-number">4.3.</span> <span class="toc-text">3.reactive 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Vue3-0-中的响应式原理"><span class="toc-number">4.4.</span> <span class="toc-text">4.Vue3.0 中的响应式原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue2-x-的响应式"><span class="toc-number">4.4.1.</span> <span class="toc-text">vue2.x 的响应式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue3-0-的响应式"><span class="toc-number">4.4.2.</span> <span class="toc-text">Vue3.0 的响应式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-reactive-对比-ref"><span class="toc-number">4.5.</span> <span class="toc-text">5.reactive 对比 ref</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-setup-的两个注意点"><span class="toc-number">4.6.</span> <span class="toc-text">6.setup 的两个注意点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-计算属性与监视"><span class="toc-number">4.7.</span> <span class="toc-text">7.计算属性与监视</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-computed-函数"><span class="toc-number">4.7.1.</span> <span class="toc-text">1.computed 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-watch-函数"><span class="toc-number">4.7.2.</span> <span class="toc-text">2.watch 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-watchEffect-函数"><span class="toc-number">4.7.3.</span> <span class="toc-text">3.watchEffect 函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-生命周期"><span class="toc-number">4.8.</span> <span class="toc-text">8.生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-自定义-hook-函数"><span class="toc-number">4.9.</span> <span class="toc-text">9.自定义 hook 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-toRef"><span class="toc-number">4.10.</span> <span class="toc-text">10.toRef</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三、其它-Composition-API"><span class="toc-number">5.</span> <span class="toc-text">三、其它 Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-shallowReactive-与-shallowRef"><span class="toc-number">5.1.</span> <span class="toc-text">1.shallowReactive 与 shallowRef</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-readonly-与-shallowReadonly"><span class="toc-number">5.2.</span> <span class="toc-text">2.readonly 与 shallowReadonly</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-toRaw-与-markRaw"><span class="toc-number">5.3.</span> <span class="toc-text">3.toRaw 与 markRaw</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-customRef"><span class="toc-number">5.4.</span> <span class="toc-text">4.customRef</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-provide-与-inject"><span class="toc-number">5.5.</span> <span class="toc-text">5.provide 与 inject</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-响应式数据的判断"><span class="toc-number">5.6.</span> <span class="toc-text">6.响应式数据的判断</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四、Composition-API-的优势"><span class="toc-number">6.</span> <span class="toc-text">四、Composition API 的优势</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Options-API-存在的问题"><span class="toc-number">6.1.</span> <span class="toc-text">1.Options API 存在的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Composition-API-的优势"><span class="toc-number">6.2.</span> <span class="toc-text">2.Composition API 的优势</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五、新的组件"><span class="toc-number">7.</span> <span class="toc-text">五、新的组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Fragment"><span class="toc-number">7.1.</span> <span class="toc-text">1.Fragment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Teleport"><span class="toc-number">7.2.</span> <span class="toc-text">2.Teleport</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Suspense"><span class="toc-number">7.3.</span> <span class="toc-text">3.Suspense</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#六、其他"><span class="toc-number">8.</span> <span class="toc-text">六、其他</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-全局-API-的转移"><span class="toc-number">8.1.</span> <span class="toc-text">1.全局 API 的转移</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-其他改变"><span class="toc-number">8.2.</span> <span class="toc-text">2.其他改变</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/bg9.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Wang</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Vue学习</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2022-10-16 11:28:24"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2022-10-16</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2023-03-09 19:56:58"><i class="fas fa-history fa-fw"></i> 更新于 2023-03-09</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/Vue/">Vue</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="笔记"><a href="#笔记" class="headerlink" title="笔记"></a>笔记</h1><h2 id="一、Vue-基础："><a href="#一、Vue-基础：" class="headerlink" title="一、Vue 基础："></a>一、Vue 基础：</h2><h4 id="1-模板语法有-2-大类："><a href="#1-模板语法有-2-大类：" class="headerlink" title="1.模板语法有 2 大类："></a>1.模板语法有 2 大类：</h4><ol>
<li><p>插值语法：</p>
<p>功能：用于解析标签体内容。<br>写法：<code>{ {xxx} }</code>，xxx 是 js 表达式，且可以直接读取到 data 中的所有属性。</p>
</li>
<li><p>指令语法：<br>功能：用于解析标签（包括：标签属性、标签体内容、绑定事件…..）。<br>举例：<code>v-bind:href=&quot;xxx&quot;</code> 或 简写为 <code>:href=&quot;xxx&quot;</code>，xxx 同样要写 js 表达式，。</p>
<pre><code>     且可以直接读取到data中的所有属性。

备注：Vue中有很多的指令，且形式都是：v-????，此处我们只是拿v-bind举个例子。</code></pre></li>
</ol>
<h4 id="2-俩种数据绑定的方式"><a href="#2-俩种数据绑定的方式" class="headerlink" title="2.俩种数据绑定的方式"></a>2.俩种数据绑定的方式</h4><ol>
<li>单向绑定(<code>v-bind</code>)：数据只能从 data 流向页面。</li>
<li>双向绑定(<code>v-model</code>)：数据不仅能从 data 流向页面，还可以从页面流向 data。<br>备注：<ul>
<li><strong>双向绑定一般都应用在表单类元素上</strong>（如：input、select 等）</li>
<li><code>v-model:value</code> 可以简写为 <code>v-model</code>，因为 v-model 默认收集的就是 value 值。</li>
</ul>
</li>
</ol>
<h4 id="3-data-与-el-的俩种写法"><a href="#3-data-与-el-的俩种写法" class="headerlink" title="3.data 与 el 的俩种写法"></a>3.data 与 el 的俩种写法</h4><ol>
<li>el 有 2 种写法<br>(1).new Vue 时候配置 el 属性。<br>(2).先创建 Vue 实例，随后再通过<code>vm.$mount(&#39;#root&#39;)</code>指定 el 的值。</li>
<li>data 有 2 种写法<br>—<code>对象式</code><br>—<code>函数式</code><br>如何选择：目前哪种写法都可以，以后学习到组件时，data 必须使用函数式，否则会报错。</li>
<li>一个重要的原则：<br>由 Vue 管理的函数，<strong><code>一定不要写箭头函数</code></strong>，一旦写了箭头函数，this 就不再是 Vue 实例了。</li>
</ol>
<h4 id="4-MVVM-模型"><a href="#4-MVVM-模型" class="headerlink" title="4.MVVM 模型"></a>4.MVVM 模型</h4><pre><code>1. M：模型(Model) ：data中的数据
2. V：视图(View) ：模板代码
3. VM：视图模型(ViewModel)：Vue实例</code></pre><p>观察发现：</p>
<ul>
<li>data 中所有的属性，最后都出现在了 vm 身上。</li>
<li><code>vm身上所有的属性 及 Vue原型上所有属性，在Vue模板中都可以直接使用</code>。<br><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/606b9a629dec4ef588b784cbab190438.png" alt="在这里插入图片描述"></li>
</ul>
<h4 id="5-数据代理"><a href="#5-数据代理" class="headerlink" title="5.数据代理"></a>5.数据代理</h4><ol>
<li>Vue 中的数据代理：<br>—通过 vm 对象来代理 data 对象中属性的操作（读/写）</li>
<li>Vue 中数据代理的好处：<br>—更加方便的操作 data 中的数据</li>
<li>基本原理：<br>—通过 Object.defineProperty()把 data 对象中所有属性添加到 vm 上。<br>—为每一个添加到 vm 上的属性，都指定一个 getter/setter。<br>—在 getter/setter 内部去操作（读/写）data 中对应的属性。</li>
</ol>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/d60d5d481bd04c30a4659aedf628536b.png" alt="在这里插入图片描述"></p>
<h4 id="6-事件处理"><a href="#6-事件处理" class="headerlink" title="6.事件处理"></a>6.事件处理</h4><p>事件的基本使用：</p>
<ol>
<li>使用 v-on:xxx 或 @xxx 绑定事件，其中 xxx 是事件名；</li>
<li>事件的回调需要配置在 methods 对象中，最终会在 vm 上；</li>
<li>methods 中配置的函数，不要用箭头函数！否则 this 就不是 vm 了；</li>
<li>methods 中配置的函数，都是被 Vue 所管理的函数，this 的指向是 vm 或 组件实例对象；</li>
<li>@click=”demo” 和 @click=”demo($event)” 效果一致，但后者可以传参；</li>
</ol>
<h4 id="7-Vue-中的事件修饰符："><a href="#7-Vue-中的事件修饰符：" class="headerlink" title="7.Vue 中的事件修饰符："></a>7.Vue 中的事件修饰符：</h4><ol>
<li>prevent：阻止默认事件（常用）；</li>
<li>stop：阻止事件冒泡（常用）；</li>
<li>once：事件只触发一次（常用）；</li>
<li>capture：使用事件的捕获模式；</li>
<li>self：只有 event.target 是当前操作的元素时才触发事件；</li>
<li>passive：事件的默认行为立即执行，无需等待事件回调执行完毕；</li>
</ol>
<h4 id="8-按键别名："><a href="#8-按键别名：" class="headerlink" title="8. 按键别名："></a>8. 按键别名：</h4><ol>
<li>常用的按键别名<br>回车 =&gt; enter<br>删除 =&gt; delete (捕获“删除”和“退格”键)<br>退出 =&gt; esc<br>空格 =&gt; space<br>换行 =&gt; tab (特殊，必须配合 keydown 去使用)<br>上 =&gt; up<br>下 =&gt; down<br>左 =&gt; left<br>右 =&gt; right</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"text"</span> placeholder=<span class="string">"按下回车提示输入"</span> @keydown.enter=<span class="string">"showInfo"</span>&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>Vue 未提供别名的按键，可以使用按键原始的 key 值去绑定，但注意要转为 kebab-case（短横线命名）</p>
</li>
<li><p>系统修饰键（用法特殊）：ctrl、alt、shift、meta<br>(1).配合 keyup 使用：按下修饰键的同时，再按下其他键，随后释放其他键，事件才被触发。<br>(2).配合 keydown 使用：正常触发事件。</p>
</li>
<li><p>也可以使用 keyCode 去指定具体的按键（不推荐）</p>
</li>
<li><p>Vue.config.keyCodes.自定义键名 = 键码，可以去定制按键别名 （不推荐）</p>
</li>
</ol>
<h4 id="9-计算属性-computed："><a href="#9-计算属性-computed：" class="headerlink" title="9.计算属性 computed："></a>9.计算属性 computed：</h4><ol>
<li>定义：要用的属性不存在，要通过已有属性计算得来。</li>
<li>原理：底层借助了 Objcet.defineproperty 方法提供的 getter 和 setter。</li>
<li>get 函数什么时候执行？<br>(1).初次读取时会执行一次。<br>(2).当依赖的数据发生改变时会被再次调用。</li>
<li>优势：与 methods 实现相比，内部有缓存机制（复用），效率更高，调试方便。</li>
<li>备注：<ul>
<li>计算属性最终会出现在 vm 上，直接读取使用即可。</li>
<li>如果计算属性要被修改，那必须写 set 函数去响应修改，且 set 中要引起计算时依赖的数据发生改变。</li>
</ul>
</li>
</ol>
<h4 id="10-监视属性-watch："><a href="#10-监视属性-watch：" class="headerlink" title="10.监视属性 watch："></a>10.监视属性 watch：</h4><ol>
<li>当被监视的属性变化时, 回调函数自动调用, 进行相关操作</li>
<li>监视的属性必须存在，才能进行监视！！</li>
<li>监视的两种写法：<ul>
<li>new Vue 时传入 watch 配置</li>
<li>通过 vm.$watch 监视</li>
</ul>
</li>
<li>属性配置</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">watch:&#123;</span><br><span class="line">	isHot:&#123;</span><br><span class="line">		<span class="comment">// immediate:true, //初始化时让handler调用一下</span></span><br><span class="line">		<span class="comment">//handler什么时候调用？当isHot发生改变时。</span></span><br><span class="line">		handler(newValue,oldValue)&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'isHot被修改了'</span>,newValue,oldValue)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">//监视多级结构中某个属性的变化</span></span><br><span class="line">	<span class="comment">/* 'numbers.a':&#123;</span></span><br><span class="line"><span class="comment">		handler()&#123;</span></span><br><span class="line"><span class="comment">			console.log('a被改变了')</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">	&#125; */</span></span><br><span class="line">	<span class="comment">//监视多级结构中所有属性的变化</span></span><br><span class="line">	numbers:&#123;</span><br><span class="line">		deep:<span class="literal">true</span>,</span><br><span class="line">		handler()&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'numbers改变了'</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//正常写法</span></span><br><span class="line">	<span class="comment">/* isHot:&#123;</span></span><br><span class="line"><span class="comment">		// immediate:true, //初始化时让handler调用一下</span></span><br><span class="line"><span class="comment">		// deep:true,//深度监视</span></span><br><span class="line"><span class="comment">		handler(newValue,oldValue)&#123;</span></span><br><span class="line"><span class="comment">			console.log('isHot被修改了',newValue,oldValue)</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">	&#125;, */</span></span><br><span class="line">	<span class="comment">//简写</span></span><br><span class="line">	<span class="comment">/* isHot(newValue,oldValue)&#123;</span></span><br><span class="line"><span class="comment">		console.log('isHot被修改了',newValue,oldValue,this)</span></span><br><span class="line"><span class="comment">	&#125; */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">computed和watch之间的区别：</span><br><span class="line">		<span class="number">1.</span>computed能完成的功能，watch都可以完成。</span><br><span class="line">		<span class="number">2.</span>watch能完成的功能，computed不一定能完成，例如：watch可以进行异步操作。</span><br><span class="line">两个重要的小原则：</span><br><span class="line">			<span class="number">1.</span>所被Vue管理的函数，最好写成普通函数，这样<span class="keyword">this</span>的指向才是vm 或 组件实例对象。</span><br><span class="line">			<span class="number">2.</span>所有不被Vue所管理的函数（定时器的回调函数、ajax的回调函数等、<span class="built_in">Promise</span>的回调函数），最好写成箭头函数，</span><br><span class="line">				这样<span class="keyword">this</span>的指向才是vm 或 组件实例对象。</span><br></pre></td></tr></table></figure>

<h4 id="11-绑定样式："><a href="#11-绑定样式：" class="headerlink" title="11.绑定样式："></a>11.绑定样式：</h4><ol>
<li>class 样式<br>写法:class=”xxx” xxx 可以是字符串、对象、数组。<ul>
<li>字符串写法适用于：类名不确定，要动态获取。</li>
<li>对象写法适用于：要绑定多个样式，个数不确定，名字也不确定。</li>
<li>数组写法适用于：要绑定多个样式，个数确定，名字也确定，但不确定用不用。</li>
</ul>
<ol start="2">
<li>style 样式</li>
</ol>
<ul>
<li>:style=”{fontSize: xxx}”其中 xxx 是动态值。</li>
<li>:style=”[a,b]”其中 a、b 是样式对象。</li>
</ul>
</li>
</ol>
<h4 id="12-条件渲染："><a href="#12-条件渲染：" class="headerlink" title="12.条件渲染："></a>12.条件渲染：</h4><ol>
<li><p>v-if</p>
<ul>
<li>(1).v-if=”表达式”</li>
<li>(2).v-else-if=”表达式”</li>
<li>(3).v-else=”表达式”<br>适用于：切换频率较低的场景。<br>特点：不展示的 DOM 元素直接被移除。<br>注意：v-if 可以和:v-else-if、v-else 一起使用，但要求结构不能被“打断”。</li>
</ul>
</li>
<li><p>v-show</p>
<ul>
<li>适用于：切换频率较高的场景。</li>
<li>特点：不展示的 DOM 元素未被移除，仅仅是使用样式隐藏掉</li>
</ul>
</li>
<li><p>备注：使用 v-if 的时，元素可能无法获取到，而使用 v-show 一定可以获取到。</p>
</li>
<li><p>条件渲染<br>v-for 指令:</p>
<ol>
<li>用于展示列表数据</li>
<li>语法：v-for=”(item, index) in xxx” :key=”yyy”</li>
<li>可遍历：数组、对象、字符串（用的很少）、指定次数（用的很少）</li>
</ol>
</li>
</ol>
<h4 id="13-key-的原理"><a href="#13-key-的原理" class="headerlink" title="13. key 的原理"></a>13. key 的原理</h4><p><strong>面试题：react、vue 中的 key 有什么作用？（key 的内部原理）</strong></p>
<ol>
<li><p>虚拟 DOM 中 key 的作用：</p>
<ul>
<li>key 是虚拟 DOM 对象的标识，当数据发生变化时，Vue 会根据【新数据】生成【新的虚拟 DOM】,</li>
<li>随后 Vue 进行【新虚拟 DOM】与【旧虚拟 DOM】的差异比较，比较规则如下：</li>
</ul>
</li>
<li><p>对比规则：</p>
<ul>
<li><p>旧虚拟 DOM 中找到了与新虚拟 DOM 相同的 key：<br>①.若虚拟 DOM 中内容没变, 直接使用之前的真实 DOM！<br>②.若虚拟 DOM 中内容变了, 则生成新的真实 DOM，随后替换掉页面中之前的真实 DOM。</p>
</li>
<li><p>旧虚拟 DOM 中未找到与新虚拟 DOM 相同的 key<br>创建新的真实 DOM，随后渲染到到页面。</p>
</li>
</ul>
</li>
<li><p>用 index 作为 key 可能会引发的问题：</p>
<ul>
<li><p>若对数据进行：逆序添加、逆序删除等破坏顺序操作:<br>会产生没有必要的真实 DOM 更新 ==&gt; 界面效果没问题, 但效率低。</p>
</li>
<li><p>如果结构中还包含输入类的 DOM：<br>会产生错误 DOM 更新 ==&gt; 界面有问题。</p>
</li>
</ul>
</li>
<li><p>开发中如何选择 key?:</p>
<ul>
<li>最好使用每条数据的唯一标识作为 key, 比如 id、手机号、身份证号、学号等唯一值。</li>
<li>如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表用于展示，<br>使用 index 作为 key 是没有问题的。</li>
</ul>
</li>
</ol>
<h4 id="14-监视数据的原理："><a href="#14-监视数据的原理：" class="headerlink" title="14.监视数据的原理："></a>14.监视数据的原理：</h4><ol>
<li><p>vue 会监视 data 中所有层次的数据。</p>
</li>
<li><p>如何监测对象中的数据？<br>通过 setter 实现监视，且要在 new Vue 时就传入要监测的数据。</p>
<ul>
<li>对象中后追加的属性，Vue 默认不做响应式处理</li>
<li>如需给后添加的属性做响应式，请使用如下 API：<br>Vue.set(target，propertyName/index，value) 或<br>vm.$set(target，propertyName/index，value)</li>
</ul>
</li>
<li><p>如何监测数组中的数据？<br>通过包裹数组更新元素的方法实现，本质就是做了两件事：</p>
<ul>
<li>调用原生对应的方法对数组进行更新。</li>
<li>重新解析模板，进而更新页面。</li>
</ul>
</li>
<li><p>在 Vue 修改数组中的某个元素一定要用如下方法：</p>
<ul>
<li>使用这些 API:push()、pop()、shift()、unshift()、splice()、sort()、reverse()</li>
<li>Vue.set() 或 vm.$set()</li>
</ul>
</li>
</ol>
<p><code>特别注意：Vue.set() 和 vm.$set() 不能给vm 或 vm的根数据对象 添加属性！！！</code></p>
<h4 id="15-收集表单数据："><a href="#15-收集表单数据：" class="headerlink" title="15.收集表单数据："></a>15.收集表单数据：</h4><pre><code>若：&lt;input type=&quot;text&quot;/&gt;，则v-model收集的是value值，用户输入的就是value值。
若：&lt;input type=&quot;radio&quot;/&gt;，则v-model收集的是value值，且要给标签配置value值。
若：&lt;input type=&quot;checkbox&quot;/&gt;
        1.没有配置input的value属性，那么收集的就是checked（勾选 or 未勾选，是布尔值）
        2.配置input的value属性:
                (1)v-model的初始值是非数组，那么收集的就是checked（勾选 or 未勾选，是布尔值）
                (2)v-model的初始值是数组，那么收集的的就是value组成的数组
备注：v-model的三个修饰符：
                lazy：失去焦点再收集数据
                number：输入字符串转为有效的数字
                trim：输入首尾空格过滤</code></pre><h4 id="16-过滤器："><a href="#16-过滤器：" class="headerlink" title="16.过滤器："></a>16.过滤器：</h4><p>定义：对要显示的数据进行特定格式化后再显示（适用于一些简单逻辑的处理）。<br>语法：</p>
<ol>
<li>注册过滤器：Vue.filter(name,callback) 或 new Vue{filters:{} }</li>
<li>使用过滤器：{ { xxx | 过滤器名} } 或 v-bind:属性 = “xxx | 过滤器名”</li>
</ol>
<p>备注</p>
<ol>
<li>过滤器也可以接收额外参数、多个过滤器也可以串联</li>
<li>并没有改变原本的数据, 是产生新的对应的数据</li>
</ol>
<h4 id="17-内置指令："><a href="#17-内置指令：" class="headerlink" title="17.内置指令："></a>17.内置指令：</h4><pre><code>我们学过
v-bind    : 单向绑定解析表达式, 可简写为 :xxx
v-model    : 双向数据绑定
v-for      : 遍历数组/对象/字符串
v-on       : 绑定事件监听, 可简写为@
v-if     : 条件渲染（动态控制节点是否存存在）
v-else     : 条件渲染（动态控制节点是否存存在）
v-show     : 条件渲染 (动态控制节点是否展示)</code></pre><ol>
<li>v-text 指令：<ul>
<li>作用：向其所在的节点中渲染文本内容。</li>
<li>与插值语法的区别：v-text 会替换掉节点中的内容，{ {xx} }则不会。</li>
</ul>
</li>
<li>v-html 指令：<ul>
<li>作用：向指定节点中渲染包含 html 结构的内容。</li>
<li>与插值语法的区别：<br>(1).v-html 会替换掉节点中所有的内容，{ {xx} }则不会。<br>(2).v-html 可以识别 html 结构。</li>
<li>严重注意：v-html 有安全性问题！！！！<br>(1).在网站上动态渲染任意 HTML 是非常危险的，容易导致 XSS 攻击。<br>(2).一定要在可信的内容上使用 v-html，永不要用在用户提交的内容上！</li>
</ul>
</li>
<li>v-cloak 指令（没有值）：<ul>
<li>本质是一个特殊属性，Vue 实例创建完毕并接管容器后，会删掉 v-cloak 属性。</li>
<li>使用 css 配合 v-cloak 可以解决网速慢时页面展示出{ {xxx} }的问题。</li>
</ul>
</li>
<li>v-once 指令：<ul>
<li>v-once 所在节点在初次动态渲染后，就视为静态内容了。</li>
<li>以后数据的改变不会引起 v-once 所在结构的更新，可以用于优化性能。</li>
</ul>
</li>
<li>v-pre 指令：<ul>
<li>跳过其所在节点的编译过程。</li>
<li>可利用它跳过：没有使用指令语法、没有使用插值语法的节点，会加快编译。</li>
</ul>
</li>
</ol>
<h4 id="18-自定义指令"><a href="#18-自定义指令" class="headerlink" title="18.自定义指令"></a>18.自定义指令</h4><blockquote>
<p>需求 1：定义一个 v-big 指令，和 v-text 功能类似，但会把绑定的数值放大 10 倍。<br>需求 2：定义一个 v-fbind 指令，和 v-bind 功能类似，但可以让其所绑定的 input 元素默认获取焦点。</p>
<p>自定义指令总结：</p>
</blockquote>
<ol>
<li><p>定义语法：</p>
<ul>
<li>局部指令：<br>new Vue({ new Vue({<br>directives:{指令名:配置对象} 或 directives{指令名:回调函数}<br>}) })</li>
<li>全局指令：<br>Vue.directive(指令名,配置对象) 或 Vue.directive(指令名,回调函数)</li>
</ul>
</li>
<li><p>配置对象中常用的 3 个回调：</p>
<ul>
<li>bind：指令与元素成功绑定时调用。</li>
<li>inserted：指令所在元素被插入页面时调用。</li>
<li>update：指令所在模板结构被重新解析时调用。</li>
</ul>
</li>
<li><p>备注：</p>
<ul>
<li>指令定义时不加 v-，但使用时要加 v-；</li>
<li>指令名如果是多个单词，要使用 kebab-case 命名方式，不要用 camelCase 命名。</li>
</ul>
</li>
</ol>
<h4 id="19-生命周期"><a href="#19-生命周期" class="headerlink" title="19. 生命周期"></a>19. 生命周期</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">beforeCreate、created、beforeMount、mounted、</span><br><span class="line">beforeUpdate、updated、beforeDestroy、destroyed</span><br></pre></td></tr></table></figure>

<pre><code>常用的生命周期钩子：
            1.mounted: 发送ajax请求、启动定时器、绑定自定义事件、订阅消息等【初始化操作】。
            2.beforeDestroy: 清除定时器、解绑自定义事件、取消订阅消息等【收尾工作】。

    关于销毁Vue实例
            1.销毁后借助Vue开发者工具看不到任何信息。
            2.销毁后自定义事件会失效，但原生DOM事件依然有效。
            3.一般不会在beforeDestroy操作数据，因为即便操作数据，也不会再触发更新流程了。</code></pre><h4 id="20-组件"><a href="#20-组件" class="headerlink" title="20. 组件"></a>20. 组件</h4><p>Vue 中使用组件的三大步骤：</p>
<ul>
<li>定义组件(创建组件)</li>
<li>注册组件</li>
<li>使用组件(写组件标签)</li>
</ul>
<ol>
<li><p>如何定义一个组件？<br>使用 Vue.extend(options)创建，其中 options 和 new Vue(options)时传入的那个 options 几乎一样，但也有点区别；<br>区别如下：</p>
<ul>
<li>el 不要写，为什么？ ——— 最终所有的组件都要经过一个 vm 的管理，由 vm 中的 el 决定服务哪个容器。</li>
<li>data 必须写成函数，为什么？ ———— 避免组件被复用时，数据存在引用关系。<br>备注：使用 template 可以配置组件结构。</li>
</ul>
</li>
<li><p>如何注册组件？</p>
<ul>
<li>局部注册：靠 new Vue 的时候传入 components 选项</li>
<li>全局注册：靠 Vue.component(‘组件名’,组件)</li>
</ul>
</li>
<li><p>编写组件标签：</p>
<pre><code>&lt;school&gt;&lt;/school&gt;</code></pre><h4 id="21-一个重要的内置关系："><a href="#21-一个重要的内置关系：" class="headerlink" title="21 一个重要的内置关系："></a>21 一个重要的内置关系：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VueComponent.prototype.__proto__ === Vue.prototype</span><br><span class="line">为什么要有这个关系：让组件实例对象（vc）可以访问到 Vue原型上的属性、方法。</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/7bf79f6587be4242ba7201fa36195389.png" alt="在这里插入图片描述"></p>
</li>
</ol>
<h4 id="22-关于不同版本的-Vue"><a href="#22-关于不同版本的-Vue" class="headerlink" title="22.关于不同版本的 Vue"></a>22.关于不同版本的 Vue</h4><ol>
<li>vue.js 与 vue.runtime.xxx.js 的区别：<ol>
<li>vue.js 是完整版的 Vue，包含：核心功能 + 模板解析器。</li>
<li>vue.runtime.xxx.js 是运行版的 Vue，只包含：核心功能；没有模板解析器。</li>
</ol>
</li>
<li>因为 vue.runtime.xxx.js 没有模板解析器，所以不能使用 template 这个配置项，需要使用 render 函数接收到的 createElement 函数去指定具体内容。</li>
</ol>
<h2 id="二、工程化项目"><a href="#二、工程化项目" class="headerlink" title="二、工程化项目"></a>二、工程化项目</h2><h4 id="1-文件结构"><a href="#1-文件结构" class="headerlink" title="1. 文件结构"></a>1. 文件结构</h4><pre><code>├── node_modules
├── public
│   ├── favicon.ico: 页签图标
│   └── index.html: 主页面
├── src
│   ├── assets: 存放静态资源
│   │   └── logo.png
│   │── component: 存放组件
│   │   └── HelloWorld.vue
│   │── App.vue: 汇总所有组件
│   │── main.js: 入口文件
├── .gitignore: git版本管制忽略的配置
├── babel.config.js: babel的配置文件
├── package.json: 应用包配置文件
├── README.md: 应用描述文件
├── package-lock.json：包版本控制文件</code></pre><h4 id="2-vue-config-js-配置文件"><a href="#2-vue-config-js-配置文件" class="headerlink" title="2.vue.config.js 配置文件"></a>2.vue.config.js 配置文件</h4><ol>
<li>使用<code>vue inspect &gt; output.js</code>可以查看到 Vue 脚手架的默认配置。</li>
<li>使用 vue.config.js 可以对脚手架进行个性化定制，详情见：<a href="https://cli.vuejs.org/zh" target="_blank" rel="noopener">https://cli.vuejs.org/zh</a></li>
</ol>
<h4 id="3-ref-属性"><a href="#3-ref-属性" class="headerlink" title="3. ref 属性"></a>3. ref 属性</h4><ol>
<li>被用来给元素或子组件注册引用信息（id 的替代者）</li>
<li>应用在 html 标签上获取的是真实 DOM 元素，应用在组件标签上是组件实例对象（vc）</li>
<li>使用方式：<ol>
<li>打标识：<code>&lt;h1 ref=&quot;xxx&quot;&gt;.....&lt;/h1&gt;</code>或 <code>&lt;School ref=&quot;xxx&quot;&gt;&lt;/School&gt;</code></li>
<li>获取：<code>this.$refs.xxx</code></li>
</ol>
</li>
</ol>
<h4 id="4-props-配置项"><a href="#4-props-配置项" class="headerlink" title="4.props 配置项"></a>4.props 配置项</h4><ol>
<li><p>功能：让组件接收外部传过来的数据</p>
</li>
<li><p>传递数据：<code>&lt;Demo name=&quot;xxx&quot;/&gt;</code></p>
</li>
<li><p>接收数据：</p>
<ol>
<li><p>第一种方式（只接收）：<code>props:[&#39;name&#39;]</code></p>
</li>
<li><p>第二种方式（限制类型）：<code>props:{name:String}</code></p>
</li>
<li><p>第三种方式（限制类型、限制必要性、指定默认值）：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">props:&#123;</span><br><span class="line">	name:&#123;</span><br><span class="line">	type:<span class="built_in">String</span>, <span class="comment">//类型</span></span><br><span class="line">	required:<span class="literal">true</span>, <span class="comment">//必要性</span></span><br><span class="line">	<span class="keyword">default</span>:<span class="string">'老王'</span> <span class="comment">//默认值</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>备注：props 是只读的，Vue 底层会监测你对 props 的修改，如果进行了修改，就会发出警告，若业务需求确实需要修改，那么请复制 props 的内容到 data 中一份，然后去修改 data 中的数据。</p>
</blockquote>
</li>
</ol>
</li>
</ol>
<h4 id="5-mixin-混入"><a href="#5-mixin-混入" class="headerlink" title="5.mixin(混入)"></a>5.mixin(混入)</h4><ol>
<li><p>功能：可以把多个组件共用的配置提取成一个混入对象</p>
</li>
<li><p>使用方式：</p>
<p>第一步定义混合：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    data()&#123;....&#125;,</span><br><span class="line">    methods:&#123;....&#125;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第二步使用混入：</p>
<pre><code>全局混入：```Vue.mixin(xxx)```
局部混入：```mixins:[&apos;xxx&apos;]    ```</code></pre></li>
</ol>
<h4 id="6-插件"><a href="#6-插件" class="headerlink" title="6.插件"></a>6.插件</h4><ol>
<li><p>功能：用于增强 Vue</p>
</li>
<li><p>本质：包含 install 方法的一个对象，install 的第一个参数是 Vue，第二个以后的参数是插件使用者传递的数据。</p>
</li>
<li><p>定义插件：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">对象.install = <span class="function"><span class="keyword">function</span> (<span class="params">Vue, options</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 1. 添加全局过滤器</span></span><br><span class="line">    Vue.filter(....)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 添加全局指令</span></span><br><span class="line">    Vue.directive(....)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 配置全局混入(合)</span></span><br><span class="line">    Vue.mixin(....)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. 添加实例方法</span></span><br><span class="line">    Vue.prototype.$myMethod = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;...&#125;</span><br><span class="line">    Vue.prototype.$myProperty = xxxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用插件：<code>Vue.use()</code></p>
</li>
</ol>
<h4 id="7-scoped-样式"><a href="#7-scoped-样式" class="headerlink" title="7.scoped 样式"></a>7.scoped 样式</h4><ol>
<li>作用：让样式在局部生效，防止冲突。</li>
<li>写法：<code>&lt;style scoped&gt;</code></li>
</ol>
<h4 id="8-总结-TodoList-案例"><a href="#8-总结-TodoList-案例" class="headerlink" title="8.总结 TodoList 案例"></a>8.总结 TodoList 案例</h4><ol>
<li><p>组件化编码流程：</p>
<pre><code>(1).拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突。

(2).实现动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用：

        1).一个组件在用：放在组件自身即可。

        2). 一些组件在用：放在他们共同的父组件上（&lt;span style=&quot;color:red&quot;&gt;状态提升&lt;/span&gt;）。

(3).实现交互：从绑定事件开始。</code></pre></li>
<li><p>props 适用于：</p>
<pre><code>(1).父组件 ==&gt; 子组件 通信

(2).子组件 ==&gt; 父组件 通信（要求父先给子一个函数）</code></pre></li>
<li><p>使用 v-model 时要切记：v-model 绑定的值不能是 props 传过来的值，因为 props 是不可以修改的！</p>
</li>
<li><p>props 传过来的若是对象类型的值，修改对象中的属性时 Vue 不会报错，但不推荐这样做。</p>
</li>
</ol>
<h4 id="9-webStorage"><a href="#9-webStorage" class="headerlink" title="9.webStorage"></a>9.webStorage</h4><ol>
<li><p>存储内容大小一般支持 5MB 左右（不同浏览器可能还不一样）</p>
</li>
<li><p>浏览器端通过 Window.sessionStorage 和 Window.localStorage 属性来实现本地存储机制。</p>
</li>
<li><p>相关 API：</p>
<ol>
<li><p><code>xxxxxStorage.setItem(&#39;key&#39;, &#39;value&#39;);</code><br>该方法接受一个键和值作为参数，会把键值对添加到存储中，如果键名存在，则更新其对应的值。</p>
</li>
<li><p><code>xxxxxStorage.getItem(&#39;person&#39;);</code></p>
<pre><code>该方法接受一个键名作为参数，返回键名对应的值。</code></pre></li>
<li><p><code>xxxxxStorage.removeItem(&#39;key&#39;);</code></p>
<pre><code>该方法接受一个键名作为参数，并把该键名从存储中删除。</code></pre></li>
<li><p><code>xxxxxStorage.clear()</code></p>
<pre><code>该方法会清空存储中的所有数据。</code></pre></li>
</ol>
</li>
<li><p>备注：</p>
<ol>
<li>SessionStorage 存储的内容会随着浏览器窗口关闭而消失。</li>
<li>LocalStorage 存储的内容，需要手动清除才会消失。</li>
<li><code>xxxxxStorage.getItem(xxx)</code>如果 xxx 对应的 value 获取不到，那么 getItem 的返回值是 null。</li>
<li><code>JSON.parse(null)</code>的结果依然是 null。</li>
</ol>
</li>
</ol>
<h4 id="10-组件的自定义事件"><a href="#10-组件的自定义事件" class="headerlink" title="10.组件的自定义事件"></a>10.组件的自定义事件</h4><ol>
<li><p>一种组件间通信的方式，适用于：<strong style="color:red">子组件 ===&gt; 父组件</strong></p>
</li>
<li><p>使用场景：A 是父组件，B 是子组件，B 想给 A 传数据，那么就要在 A 中给 B 绑定自定义事件（<span style="color:red">事件的回调在 A 中</span>）。</p>
</li>
<li><p>绑定自定义事件：</p>
<ol>
<li><p>第一种方式，在父组件中：<code>&lt;Demo @atguigu=&quot;test&quot;/&gt;</code>或 <code>&lt;Demo v-on:atguigu=&quot;test&quot;/&gt;</code></p>
</li>
<li><p>第二种方式，在父组件中：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Demo ref=<span class="string">"demo"</span>/&gt;</span><br><span class="line">......</span><br><span class="line">mounted()&#123;</span><br><span class="line">   <span class="keyword">this</span>.$refs.xxx.$on(<span class="string">'atguigu'</span>,<span class="keyword">this</span>.test)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>若想让自定义事件只能触发一次，可以使用<code>once</code>修饰符，或<code>$once</code>方法。</p>
</li>
</ol>
</li>
<li><p>触发自定义事件：<code>this.$emit(&#39;atguigu&#39;,数据)</code></p>
</li>
<li><p>解绑自定义事件<code>this.$off(&#39;atguigu&#39;)</code></p>
</li>
<li><p>组件上也可以绑定原生 DOM 事件，需要使用<code>native</code>修饰符。</p>
</li>
<li><p>注意：通过<code>this.$refs.xxx.$on(&#39;atguigu&#39;,回调)</code>绑定自定义事件时，回调<span style="color:red">要么配置在 methods 中</span>，<span style="color:red">要么用箭头函数</span>，否则 this 指向会出问题！</p>
</li>
</ol>
<h4 id="11-全局事件总线（GlobalEventBus）"><a href="#11-全局事件总线（GlobalEventBus）" class="headerlink" title="11.全局事件总线（GlobalEventBus）"></a>11.全局事件总线（GlobalEventBus）</h4><ol>
<li><p>一种组件间通信的方式，适用于<span style="color:red">任意组件间通信</span>。</p>
</li>
<li><p>安装全局事件总线：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">	......</span><br><span class="line">	beforeCreate() &#123;</span><br><span class="line">		Vue.prototype.$bus = <span class="keyword">this</span> <span class="comment">//安装全局事件总线，$bus就是当前应用的vm</span></span><br><span class="line">	&#125;,</span><br><span class="line">    ......</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用事件总线：</p>
<ol>
<li><p>接收数据：A 组件想接收数据，则在 A 组件中给$bus 绑定自定义事件，事件的<span style="color:red">回调留在 A 组件自身。</span></p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods()&#123;</span><br><span class="line">  demo(data)&#123;......&#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="keyword">this</span>.$bus.$on(<span class="string">'xxxx'</span>,<span class="keyword">this</span>.demo)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提供数据：<code>this.$bus.$emit(&#39;xxxx&#39;,数据)</code></p>
</li>
</ol>
</li>
<li><p>最好在 beforeDestroy 钩子中，用$off 去解绑<span style="color:red">当前组件所用到的</span>事件。</p>
</li>
</ol>
<h4 id="12-消息订阅与发布（pubsub）"><a href="#12-消息订阅与发布（pubsub）" class="headerlink" title="12.消息订阅与发布（pubsub）"></a>12.消息订阅与发布（pubsub）</h4><ol>
<li><p>一种组件间通信的方式，适用于<span style="color:red">任意组件间通信</span>。</p>
</li>
<li><p>使用步骤：</p>
<ol>
<li><p>安装 pubsub：<code>npm i pubsub-js</code></p>
</li>
<li><p>引入: <code>import pubsub from &#39;pubsub-js&#39;</code></p>
</li>
<li><p>接收数据：A 组件想接收数据，则在 A 组件中订阅消息，订阅的<span style="color:red">回调留在 A 组件自身。</span></p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods()&#123;</span><br><span class="line">  demo(data)&#123;......&#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="keyword">this</span>.pid = pubsub.subscribe(<span class="string">'xxx'</span>,<span class="keyword">this</span>.demo) <span class="comment">//订阅消息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提供数据：<code>pubsub.publish(&#39;xxx&#39;,数据)</code></p>
</li>
<li><p>最好在 beforeDestroy 钩子中，用<code>PubSub.unsubscribe(pid)</code>去<span style="color:red">取消订阅。</span></p>
</li>
</ol>
</li>
</ol>
<h4 id="13-nextTick"><a href="#13-nextTick" class="headerlink" title="13.nextTick"></a>13.nextTick</h4><ol>
<li>语法：<code>this.$nextTick(回调函数)</code></li>
<li>作用：在下一次 DOM 更新结束后执行其指定的回调。</li>
<li>什么时候用：当改变数据后，要基于更新后的新 DOM 进行某些操作时，要在 nextTick 所指定的回调函数中执行。</li>
</ol>
<h4 id="14-Vue-封装的过度与动画"><a href="#14-Vue-封装的过度与动画" class="headerlink" title="14.Vue 封装的过度与动画"></a>14.Vue 封装的过度与动画</h4><ol>
<li><p>作用：在插入、更新或移除 DOM 元素时，在合适的时候给元素添加样式类名。</p>
</li>
<li><p>图示：<br><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/87e27b31202e4141b71d27cf3ba6c116.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzODE3MTY0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</li>
<li><p>写法：</p>
<ol>
<li><p>准备好样式：</p>
<ul>
<li>元素进入的样式：<ol>
<li>v-enter：进入的起点</li>
<li>v-enter-active：进入过程中</li>
<li>v-enter-to：进入的终点</li>
</ol>
</li>
<li>元素离开的样式：<ol>
<li>v-leave：离开的起点</li>
<li>v-leave-active：离开过程中</li>
<li>v-leave-to：离开的终点</li>
</ol>
</li>
</ul>
</li>
<li><p>使用<code>&lt;transition&gt;</code>包裹要过度的元素，并配置 name 属性：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name=<span class="string">"hello"</span>&gt;</span><br><span class="line">    &lt;h1 v-show=<span class="string">"isShow"</span>&gt;你好啊！&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>transition&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>备注：若有多个元素需要过度，则需要使用：<code>&lt;transition-group&gt;</code>，且每个元素都要指定<code>key</code>值。</p>
</li>
<li><p>动画库：<a href="https://animate.style/" target="_blank" rel="noopener">https://animate.style/</a></p>
</li>
</ol>
</li>
</ol>
<h4 id="15-vue-脚手架配置代理"><a href="#15-vue-脚手架配置代理" class="headerlink" title="15.vue 脚手架配置代理"></a>15.vue 脚手架配置代理</h4><ol>
<li><p>方法一</p>
<p> 在 vue.config.js 中添加如下配置：</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    proxy: <span class="string">'http://localhost:5000'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li>优点：配置简单，请求资源时直接发给前端（8080）即可。</li>
<li>缺点：不能配置多个代理，不能灵活的控制请求是否走代理。</li>
<li>工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求会转发给服务器 （优先匹配前端资源）</li>
</ol>
<p>2.方法二</p>
<pre><code>编写vue.config.js配置具体代理规则：</code></pre><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        proxy: &#123;</span><br><span class="line">            <span class="string">'/api1'</span>: &#123;</span><br><span class="line">                <span class="comment">// 匹配所有以 '/api1'开头的请求路径</span></span><br><span class="line">                target: <span class="string">'http://localhost:5000'</span>, <span class="comment">// 代理目标的基础路径</span></span><br><span class="line">                changeOrigin: <span class="literal">true</span>,</span><br><span class="line">                pathRewrite: &#123; <span class="string">'^/api1'</span>: <span class="string">''</span> &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">'/api2'</span>: &#123;</span><br><span class="line">                <span class="comment">// 匹配所有以 '/api2'开头的请求路径</span></span><br><span class="line">                target: <span class="string">'http://localhost:5001'</span>, <span class="comment">// 代理目标的基础路径</span></span><br><span class="line">                changeOrigin: <span class="literal">true</span>,</span><br><span class="line">                pathRewrite: &#123; <span class="string">'^/api2'</span>: <span class="string">''</span> &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000</span></span><br><span class="line"><span class="comment">   changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:8080</span></span><br><span class="line"><span class="comment">   changeOrigin默认值为true</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li>优点：可以配置多个代理，且可以灵活的控制请求是否走代理。</li>
<li>缺点：配置略微繁琐，请求资源时必须加前缀。</li>
</ol>
<h4 id="16-插槽"><a href="#16-插槽" class="headerlink" title="16.插槽"></a>16.插槽</h4><ol>
<li><p>作用：让父组件可以向子组件指定位置插入 html 结构，也是一种组件间通信的方式，适用于 <strong style="color:red">父组件 ===&gt; 子组件</strong> 。</p>
</li>
<li><p>分类：默认插槽、具名插槽、作用域插槽</p>
</li>
<li><p>使用方式：</p>
<ol>
<li><p>默认插槽：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">        &lt;Category&gt;</span><br><span class="line">           &lt;div&gt;html结构<span class="number">1</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">               &lt;!-- 定义插槽 --&gt;</span><br><span class="line">               &lt;slot&gt;插槽默认内容...&lt;<span class="regexp">/slot&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/template&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>具名插槽：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">父组件中：</span><br><span class="line">        &lt;Category&gt;</span><br><span class="line">            &lt;template slot=<span class="string">"center"</span>&gt;</span><br><span class="line">              &lt;div&gt;html结构<span class="number">1</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">            &lt;template v-slot:footer&gt;</span><br><span class="line">               &lt;div&gt;html结构<span class="number">2</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>template&gt;</span><br><span class="line">        &lt;<span class="regexp">/Category&gt;</span></span><br><span class="line"><span class="regexp">子组件中：</span></span><br><span class="line"><span class="regexp">        &lt;template&gt;</span></span><br><span class="line"><span class="regexp">            &lt;div&gt;</span></span><br><span class="line"><span class="regexp">               &lt;!-- 定义插槽 --&gt;</span></span><br><span class="line"><span class="regexp">               &lt;slot name="center"&gt;插槽默认内容...&lt;/</span>slot&gt;</span><br><span class="line">               &lt;slot name=<span class="string">"footer"</span>&gt;插槽默认内容...&lt;<span class="regexp">/slot&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/template&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>作用域插槽：</p>
<ol>
<li><p>理解：<span style="color:red">数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</span>（games 数据在 Category 组件中，但使用数据所遍历出来的结构由 App 组件决定）</p>
</li>
<li><p>具体编码：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">		&lt;Category&gt;</span><br><span class="line">			&lt;template scope=<span class="string">"scopeData"</span>&gt;</span><br><span class="line">				&lt;!-- 生成的是ul列表 --&gt;</span><br><span class="line">				&lt;ul&gt;</span><br><span class="line">					&lt;li v-<span class="keyword">for</span>=<span class="string">"g in scopeData.games"</span> :key=<span class="string">"g"</span>&gt;&#123; &#123;g&#125; &#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">				&lt;/u</span>l&gt;</span><br><span class="line">			&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">		&lt;/</span>Category&gt;</span><br><span class="line"></span><br><span class="line">		&lt;Category&gt;</span><br><span class="line">			&lt;template slot-scope=<span class="string">"scopeData"</span>&gt;</span><br><span class="line">				&lt;!-- 生成的是h4标题 --&gt;</span><br><span class="line">				&lt;h4 v-<span class="keyword">for</span>=<span class="string">"g in scopeData.games"</span> :key=<span class="string">"g"</span>&gt;&#123; &#123;g&#125; &#125;&lt;<span class="regexp">/h4&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>template&gt;</span><br><span class="line">		&lt;<span class="regexp">/Category&gt;</span></span><br><span class="line"><span class="regexp">子组件中：</span></span><br><span class="line"><span class="regexp">        &lt;template&gt;</span></span><br><span class="line"><span class="regexp">            &lt;div&gt;</span></span><br><span class="line"><span class="regexp">                &lt;slot :games="games"&gt;&lt;/</span>slot&gt;</span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">        &lt;script&gt;</span><br><span class="line">            <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">                name:<span class="string">'Category'</span>,</span><br><span class="line">                props:[<span class="string">'title'</span>],</span><br><span class="line">                <span class="comment">//数据在子组件自身</span></span><br><span class="line">                data() &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        games:[<span class="string">'红色警戒'</span>,<span class="string">'穿越火线'</span>,<span class="string">'劲舞团'</span>,<span class="string">'超级玛丽'</span>]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">        &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="三、Vuex"><a href="#三、Vuex" class="headerlink" title="三、Vuex"></a>三、Vuex</h2><h3 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h3><pre><code>在Vue中实现集中式状态（数据）管理的一个Vue插件，对vue应用中多个组件的共享状态进行集中式的管理（读/写），也是一种组件间通信的方式，且适用于任意组件间通信。</code></pre><h3 id="2-何时使用？"><a href="#2-何时使用？" class="headerlink" title="2.何时使用？"></a>2.何时使用？</h3><pre><code>多个组件需要共享数据时</code></pre><h3 id="3-搭建-vuex-环境"><a href="#3-搭建-vuex-环境" class="headerlink" title="3.搭建 vuex 环境"></a>3.搭建 vuex 环境</h3><ol>
<li><p>创建文件：<code>src/store/index.js</code></p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入Vue核心库</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="comment">//应用Vuex插件</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备actions对象——响应组件中用户的动作</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;</span><br><span class="line"><span class="comment">//准备mutations对象——修改state中的数据</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;&#125;</span><br><span class="line"><span class="comment">//准备state对象——保存具体的数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在<code>main.js</code>中创建 vm 时传入<code>store</code>配置项</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="comment">//引入store</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建vm</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">	el:<span class="string">'#app'</span>,</span><br><span class="line">	render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">	store</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="4-基本使用"><a href="#4-基本使用" class="headerlink" title="4.基本使用"></a>4.基本使用</h3><ol>
<li><p>初始化数据、配置<code>actions</code>、配置<code>mutations</code>，操作文件<code>store.js</code></p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入Vue核心库</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="comment">//引用Vuex</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">    <span class="comment">//响应组件中加的动作</span></span><br><span class="line">    jia(context, value) &#123;</span><br><span class="line">        <span class="comment">// console.log('actions中的jia被调用了',miniStore,value)</span></span><br><span class="line">        context.commit(<span class="string">'JIA'</span>, value)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    <span class="comment">//执行加</span></span><br><span class="line">    JIA(state, value) &#123;</span><br><span class="line">        <span class="comment">// console.log('mutations中的JIA被调用了',state,value)</span></span><br><span class="line">        state.sum += value</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    sum: <span class="number">0</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件中读取 vuex 中的数据：<code>$store.state.sum</code></p>
</li>
<li><p>组件中修改 vuex 中的数据：<code>$store.dispatch(&#39;action中的方法名&#39;,数据)</code>或 <code>$store.commit(&#39;mutations中的方法名&#39;,数据)</code></p>
<blockquote>
<p>备注：若没有网络请求或其他业务逻辑，组件中也可以越过 actions，即不写<code>dispatch</code>，直接编写<code>commit</code></p>
</blockquote>
</li>
</ol>
<h3 id="5-getters-的使用"><a href="#5-getters-的使用" class="headerlink" title="5.getters 的使用"></a>5.getters 的使用</h3><ol>
<li><p>概念：当 state 中的数据需要经过加工后再使用时，可以使用 getters 加工。</p>
</li>
<li><p>在<code>store.js</code>中追加<code>getters</code>配置</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">	bigSum(state)&#123;</span><br><span class="line">		<span class="keyword">return</span> state.sum * <span class="number">10</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">	......</span><br><span class="line">	getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件中读取数据：<code>$store.getters.bigSum</code></p>
</li>
</ol>
<h3 id="6-四个-map-方法的使用"><a href="#6-四个-map-方法的使用" class="headerlink" title="6.四个 map 方法的使用"></a>6.四个 map 方法的使用</h3><ol>
<li><p><strong>mapState 方法：</strong>用于帮助我们映射<code>state</code>中的数据为计算属性</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    <span class="comment">//借助mapState生成计算属性：sum、school、subject（对象写法）</span></span><br><span class="line">     ...mapState(&#123;<span class="attr">sum</span>:<span class="string">'sum'</span>,<span class="attr">school</span>:<span class="string">'school'</span>,<span class="attr">subject</span>:<span class="string">'subject'</span>&#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">//借助mapState生成计算属性：sum、school、subject（数组写法）</span></span><br><span class="line">    ...mapState([<span class="string">'sum'</span>,<span class="string">'school'</span>,<span class="string">'subject'</span>]),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>mapGetters 方法：</strong>用于帮助我们映射<code>getters</code>中的数据为计算属性</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    <span class="comment">//借助mapGetters生成计算属性：bigSum（对象写法）</span></span><br><span class="line">    ...mapGetters(&#123;<span class="attr">bigSum</span>:<span class="string">'bigSum'</span>&#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">//借助mapGetters生成计算属性：bigSum（数组写法）</span></span><br><span class="line">    ...mapGetters([<span class="string">'bigSum'</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>mapActions 方法：</strong>用于帮助我们生成与<code>actions</code>对话的方法，即：包含<code>$store.dispatch(xxx)</code>的函数</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">    <span class="comment">//靠mapActions生成：incrementOdd、incrementWait（对象形式）</span></span><br><span class="line">    ...mapActions(&#123;<span class="attr">incrementOdd</span>:<span class="string">'jiaOdd'</span>,<span class="attr">incrementWait</span>:<span class="string">'jiaWait'</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//靠mapActions生成：incrementOdd、incrementWait（数组形式）</span></span><br><span class="line">    ...mapActions([<span class="string">'jiaOdd'</span>,<span class="string">'jiaWait'</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>mapMutations 方法：</strong>用于帮助我们生成与<code>mutations</code>对话的方法，即：包含<code>$store.commit(xxx)</code>的函数</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">    <span class="comment">//靠mapActions生成：increment、decrement（对象形式）</span></span><br><span class="line">    ...mapMutations(&#123;<span class="attr">increment</span>:<span class="string">'JIA'</span>,<span class="attr">decrement</span>:<span class="string">'JIAN'</span>&#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">//靠mapMutations生成：JIA、JIAN（对象形式）</span></span><br><span class="line">    ...mapMutations([<span class="string">'JIA'</span>,<span class="string">'JIAN'</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<p>备注：mapActions 与 mapMutations 使用时，若需要传递参数需要：在模板中绑定事件时传递好参数，否则参数是事件对象。</p>
</blockquote>
<h3 id="7-模块化-命名空间"><a href="#7-模块化-命名空间" class="headerlink" title="7.模块化+命名空间"></a>7.模块化+命名空间</h3><ol>
<li><p>目的：让代码更好维护，让多种数据分类更加明确。</p>
</li>
<li><p>修改<code>store.js</code></p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countAbout = &#123;</span><br><span class="line">  namespaced:<span class="literal">true</span>,<span class="comment">//开启命名空间</span></span><br><span class="line">  state:&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    bigSum(state)&#123;</span><br><span class="line">       <span class="keyword">return</span> state.sum * <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> personAbout = &#123;</span><br><span class="line">  namespaced:<span class="literal">true</span>,<span class="comment">//开启命名空间</span></span><br><span class="line">  state:&#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    countAbout,</span><br><span class="line">    personAbout</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启命名空间后，组件中读取 state 数据：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：自己直接读取</span></span><br><span class="line"><span class="keyword">this</span>.$store.state.personAbout.list</span><br><span class="line"><span class="comment">//方式二：借助mapState读取：</span></span><br><span class="line">...mapState(<span class="string">'countAbout'</span>,[<span class="string">'sum'</span>,<span class="string">'school'</span>,<span class="string">'subject'</span>]),</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启命名空间后，组件中读取 getters 数据：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：自己直接读取</span></span><br><span class="line"><span class="keyword">this</span>.$store.getters[<span class="string">'personAbout/firstPersonName'</span>]</span><br><span class="line"><span class="comment">//方式二：借助mapGetters读取：</span></span><br><span class="line">...mapGetters(<span class="string">'countAbout'</span>,[<span class="string">'bigSum'</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启命名空间后，组件中调用 dispatch</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：自己直接dispatch</span></span><br><span class="line"><span class="keyword">this</span>.$store.dispatch(<span class="string">'personAbout/addPersonWang'</span>,person)</span><br><span class="line"><span class="comment">//方式二：借助mapActions：</span></span><br><span class="line">...mapActions(<span class="string">'countAbout'</span>,&#123;<span class="attr">incrementOdd</span>:<span class="string">'jiaOdd'</span>,<span class="attr">incrementWait</span>:<span class="string">'jiaWait'</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启命名空间后，组件中调用 commit</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：自己直接commit</span></span><br><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'personAbout/ADD_PERSON'</span>,person)</span><br><span class="line"><span class="comment">//方式二：借助mapMutations：</span></span><br><span class="line">...mapMutations(<span class="string">'countAbout'</span>,&#123;<span class="attr">increment</span>:<span class="string">'JIA'</span>,<span class="attr">decrement</span>:<span class="string">'JIAN'</span>&#125;),</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="四、路由"><a href="#四、路由" class="headerlink" title="四、路由"></a>四、路由</h2><ol>
<li>理解： 一个路由（route）就是一组映射关系（key - value），多个路由需要路由器（router）进行管理。</li>
<li>前端路由：key 是路径，value 是组件。</li>
</ol>
<h3 id="1-基本使用"><a href="#1-基本使用" class="headerlink" title="1.基本使用"></a>1.基本使用</h3><ol>
<li><p>安装 vue-router，命令：<code>npm i vue-router</code></p>
</li>
<li><p>应用插件：<code>Vue.use(VueRouter)</code></p>
</li>
<li><p>编写 router 配置项:</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入VueRouter</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="comment">//引入Luyou 组件</span></span><br><span class="line"><span class="keyword">import</span> About <span class="keyword">from</span> <span class="string">'../components/About'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'../components/Home'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建router实例对象，去管理一组一组的路由规则</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    routes: [</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'/about'</span>,</span><br><span class="line">            component: About,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'/home'</span>,</span><br><span class="line">            component: Home,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//暴露router</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
</li>
<li><p>实现切换（active-class 可配置高亮样式）</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link active-<span class="class"><span class="keyword">class</span></span>=<span class="string">"active"</span> to=<span class="string">"/about"</span>&gt;</span><br><span class="line">    About</span><br><span class="line">&lt;<span class="regexp">/router-link&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>指定展示位置</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view&gt;&lt;<span class="regexp">/router-view&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="2-几个注意点"><a href="#2-几个注意点" class="headerlink" title="2.几个注意点"></a>2.几个注意点</h3><ol>
<li>路由组件通常存放在<code>pages</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</li>
<li>通过切换，“隐藏”了的路由组件，默认是被销毁掉的，需要的时候再去挂载。</li>
<li>每个组件都有自己的<code>$route</code>属性，里面存储着自己的路由信息。</li>
<li>整个应用只有一个 router，可以通过组件的<code>$router</code>属性获取到。</li>
</ol>
<h3 id="3-多级路由（多级路由）"><a href="#3-多级路由（多级路由）" class="headerlink" title="3.多级路由（多级路由）"></a>3.多级路由（多级路由）</h3><ol>
<li><p>配置路由规则，使用 children 配置项：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">routes: [</span><br><span class="line">    &#123;</span><br><span class="line">        path: <span class="string">'/about'</span>,</span><br><span class="line">        component: About,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: <span class="string">'/home'</span>,</span><br><span class="line">        component: Home,</span><br><span class="line">        children: [</span><br><span class="line">            <span class="comment">//通过children配置子级路由</span></span><br><span class="line">            &#123;</span><br><span class="line">                path: <span class="string">'news'</span>, <span class="comment">//此处一定不要写：/news</span></span><br><span class="line">                component: News,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                path: <span class="string">'message'</span>, <span class="comment">//此处一定不要写：/message</span></span><br><span class="line">                component: Message,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>跳转（要写完整路径）：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=<span class="string">"/home/news"</span>&gt;News&lt;<span class="regexp">/router-link&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="4-路由的-query-参数"><a href="#4-路由的-query-参数" class="headerlink" title="4.路由的 query 参数"></a>4.路由的 query 参数</h3><ol>
<li><p>传递参数</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 跳转并携带query参数，to的字符串写法 --&gt;</span><br><span class="line">&lt;router-link :to=<span class="string">"/home/message/detail?id=666&amp;title=你好"</span>&gt;跳转&lt;<span class="regexp">/router-link&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!-- 跳转并携带query参数，to的对象写法 --&gt;</span></span><br><span class="line"><span class="regexp">&lt;router-link</span></span><br><span class="line"><span class="regexp">	:to="&#123;</span></span><br><span class="line"><span class="regexp">		path:'/</span>home/message/detail<span class="string">',</span></span><br><span class="line"><span class="string">		query:&#123;</span></span><br><span class="line"><span class="string">		   id:666,</span></span><br><span class="line"><span class="string">            title:'</span>你好<span class="string">'</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">	&#125;"</span></span><br><span class="line"><span class="string">&gt;跳转&lt;/router-link&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>接收参数：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$route.query.id</span><br><span class="line">$route.query.title</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="5-命名路由"><a href="#5-命名路由" class="headerlink" title="5.命名路由"></a>5.命名路由</h3><ol>
<li><p>作用：可以简化路由的跳转。</p>
</li>
<li><p>如何使用</p>
<ol>
<li><p>给路由命名：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	path:<span class="string">'/demo'</span>,</span><br><span class="line">	component:Demo,</span><br><span class="line">	children:[</span><br><span class="line">		&#123;</span><br><span class="line">			path:<span class="string">'test'</span>,</span><br><span class="line">			component:Test,</span><br><span class="line">			children:[</span><br><span class="line">				&#123;</span><br><span class="line">                      name:<span class="string">'hello'</span> <span class="comment">//给路由命名</span></span><br><span class="line">					path:<span class="string">'welcome'</span>,</span><br><span class="line">					component:Hello,</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>简化跳转：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--简化前，需要写完整的路径 --&gt;</span><br><span class="line">&lt;router-link to=<span class="string">"/demo/test/welcome"</span>&gt;跳转&lt;<span class="regexp">/router-link&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!--简化后，直接通过名字跳转 --&gt;</span></span><br><span class="line"><span class="regexp">&lt;router-link :to="&#123;name:'hello'&#125;"&gt;跳转&lt;/</span>router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--简化写法配合传递参数 --&gt;</span><br><span class="line">&lt;router-link</span><br><span class="line">	:to=<span class="string">"&#123;</span></span><br><span class="line"><span class="string">		name:'hello',</span></span><br><span class="line"><span class="string">		query:&#123;</span></span><br><span class="line"><span class="string">		   id:666,</span></span><br><span class="line"><span class="string">            title:'你好'</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">	&#125;"</span></span><br><span class="line">&gt;跳转&lt;<span class="regexp">/router-link&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
<h3 id="6-路由的-params-参数"><a href="#6-路由的-params-参数" class="headerlink" title="6.路由的 params 参数"></a>6.路由的 params 参数</h3><ol>
<li><p>配置路由，声明接收 params 参数</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	path:<span class="string">'/home'</span>,</span><br><span class="line">	component:Home,</span><br><span class="line">	children:[</span><br><span class="line">		&#123;</span><br><span class="line">			path:<span class="string">'news'</span>,</span><br><span class="line">			component:News</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			component:Message,</span><br><span class="line">			children:[</span><br><span class="line">				&#123;</span><br><span class="line">					name:<span class="string">'xiangqing'</span>,</span><br><span class="line">					path:<span class="string">'detail/:id/:title'</span>, <span class="comment">//使用占位符声明接收params参数</span></span><br><span class="line">					component:Detail</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>传递参数</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 跳转并携带params参数，to的字符串写法 --&gt;</span><br><span class="line">&lt;router-link :to=<span class="string">"/home/message/detail/666/你好"</span>&gt;跳转&lt;<span class="regexp">/router-link&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!-- 跳转并携带params参数，to的对象写法 --&gt;</span></span><br><span class="line"><span class="regexp">&lt;router-link</span></span><br><span class="line"><span class="regexp">	:to="&#123;</span></span><br><span class="line"><span class="regexp">		name:'xiangqing',</span></span><br><span class="line"><span class="regexp">		params:&#123;</span></span><br><span class="line"><span class="regexp">		   id:666,</span></span><br><span class="line"><span class="regexp">            title:'你好'</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">	&#125;"</span></span><br><span class="line"><span class="regexp">&gt;跳转&lt;/</span>router-link&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>特别注意：路由携带 params 参数时，若使用 to 的对象写法，则不能使用 path 配置项，必须使用 name 配置！</p>
</blockquote>
</li>
<li><p>接收参数：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$route.params.id</span><br><span class="line">$route.params.title</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="7-路由的-props-配置"><a href="#7-路由的-props-配置" class="headerlink" title="7.路由的 props 配置"></a>7.路由的 props 配置</h3><pre><code>作用：让路由组件更方便的收到参数</code></pre><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	name:<span class="string">'xiangqing'</span>,</span><br><span class="line">	path:<span class="string">'detail/:id'</span>,</span><br><span class="line">	component:Detail,</span><br><span class="line"></span><br><span class="line">	<span class="comment">//第一种写法：props值为对象，该对象中所有的key-value的组合最终都会通过props传给Detail组件</span></span><br><span class="line">	<span class="comment">// props:&#123;a:900&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//第二种写法：props值为布尔值，布尔值为true，则把路由收到的所有params参数通过props传给Detail组件</span></span><br><span class="line">	<span class="comment">// props:true</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//第三种写法：props值为函数，该函数返回的对象中每一组key-value都会通过props传给Detail组件</span></span><br><span class="line">	props(route)&#123;</span><br><span class="line">		<span class="keyword">return</span> &#123;</span><br><span class="line">			id:route.query.id,</span><br><span class="line">			title:route.query.title</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-lt-router-link-gt-的-replace-属性"><a href="#8-lt-router-link-gt-的-replace-属性" class="headerlink" title="8.&lt;router-link&gt;的 replace 属性"></a>8.<code>&lt;router-link&gt;</code>的 replace 属性</h3><ol>
<li>作用：控制路由跳转时操作浏览器历史记录的模式</li>
<li>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>，<code>push</code>是追加历史记录，<code>replace</code>是替换当前记录。路由跳转时候默认为<code>push</code></li>
<li>如何开启<code>replace</code>模式：<code>&lt;router-link replace .......&gt;News&lt;/router-link&gt;</code></li>
</ol>
<h3 id="9-编程式路由导航"><a href="#9-编程式路由导航" class="headerlink" title="9.编程式路由导航"></a>9.编程式路由导航</h3><ol>
<li><p>作用：不借助<code>&lt;router-link&gt;</code>实现路由跳转，让路由跳转更加灵活</p>
</li>
<li><p>具体编码：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$router的两个API</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">    name: <span class="string">'xiangqing'</span>,</span><br><span class="line">    params: &#123;</span><br><span class="line">        id: xxx,</span><br><span class="line">        title: xxx,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.$router.replace(&#123;</span><br><span class="line">    name: <span class="string">'xiangqing'</span>,</span><br><span class="line">    params: &#123;</span><br><span class="line">        id: xxx,</span><br><span class="line">        title: xxx,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">this</span>.$router.forward() <span class="comment">//前进</span></span><br><span class="line"><span class="keyword">this</span>.$router.back() <span class="comment">//后退</span></span><br><span class="line"><span class="keyword">this</span>.$router.go() <span class="comment">//可前进也可后退</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="10-缓存路由组件"><a href="#10-缓存路由组件" class="headerlink" title="10.缓存路由组件"></a>10.缓存路由组件</h3><ol>
<li><p>作用：让不展示的路由组件保持挂载，不被销毁。</p>
</li>
<li><p>具体编码：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive include=<span class="string">"News"</span>&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;<span class="regexp">/router-view&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>keep-alive&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="11-两个新的生命周期钩子"><a href="#11-两个新的生命周期钩子" class="headerlink" title="11.两个新的生命周期钩子"></a>11.两个新的生命周期钩子</h3><ol>
<li>作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态。</li>
<li>具体名字：<ol>
<li><code>activated</code>路由组件被激活时触发。</li>
<li><code>deactivated</code>路由组件失活时触发。</li>
</ol>
</li>
</ol>
<h3 id="12-路由守卫"><a href="#12-路由守卫" class="headerlink" title="12.路由守卫"></a>12.路由守卫</h3><ol>
<li><p>作用：对路由进行权限控制</p>
</li>
<li><p>分类：全局守卫、独享守卫、组件内守卫</p>
</li>
<li><p>全局守卫:</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局前置守卫：初始化时执行、每次路由切换前执行</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'beforeEach'</span>, to, <span class="keyword">from</span>)</span><br><span class="line">    <span class="keyword">if</span> (to.meta.isAuth) &#123;</span><br><span class="line">        <span class="comment">//判断当前路由是否需要进行权限控制</span></span><br><span class="line">        <span class="keyword">if</span> (localStorage.getItem(<span class="string">'school'</span>) === <span class="string">'atguigu'</span>) &#123;</span><br><span class="line">            <span class="comment">//权限控制的具体规则</span></span><br><span class="line">            next() <span class="comment">//放行</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            alert(<span class="string">'暂无权限查看'</span>)</span><br><span class="line">            <span class="comment">// next(&#123;name:'guanyu'&#125;)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next() <span class="comment">//放行</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局后置守卫：初始化时执行、每次路由切换后执行</span></span><br><span class="line">router.afterEach(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'afterEach'</span>, to, <span class="keyword">from</span>)</span><br><span class="line">    <span class="keyword">if</span> (to.meta.title) &#123;</span><br><span class="line">        <span class="built_in">document</span>.title = to.meta.title <span class="comment">//修改网页的title</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">document</span>.title = <span class="string">'vue_test'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>独享守卫:</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">beforeEnter(to,<span class="keyword">from</span>,next)&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'beforeEnter'</span>,to,<span class="keyword">from</span>)</span><br><span class="line">	<span class="keyword">if</span>(to.meta.isAuth)&#123; <span class="comment">//判断当前路由是否需要进行权限控制</span></span><br><span class="line">		<span class="keyword">if</span>(localStorage.getItem(<span class="string">'school'</span>) === <span class="string">'atguigu'</span>)&#123;</span><br><span class="line">			next()</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			alert(<span class="string">'暂无权限查看'</span>)</span><br><span class="line">			<span class="comment">// next(&#123;name:'guanyu'&#125;)</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		next()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件内守卫：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//进入守卫：通过路由规则，进入该组件时被调用</span></span><br><span class="line">beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//离开守卫：通过路由规则，离开该组件时被调用</span></span><br><span class="line">beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="13-路由器的两种工作模式"><a href="#13-路由器的两种工作模式" class="headerlink" title="13.路由器的两种工作模式"></a>13.路由器的两种工作模式</h3><ol>
<li><p>对于一个 url 来说，什么是 hash 值？—— #及其后面的内容就是 hash 值。</p>
</li>
<li><p>hash 值不会包含在 HTTP 请求中，即：hash 值不会带给服务器。</p>
</li>
<li><p>hash 模式：</p>
<ol>
<li>地址中永远带着#号，不美观 。</li>
<li>若以后将地址通过第三方手机 app 分享，若 app 校验严格，则地址会被标记为不合法。</li>
<li>兼容性较好。</li>
</ol>
</li>
<li><p>history 模式：</p>
<ol>
<li><p>地址干净，美观 。</p>
</li>
<li><p>兼容性和 hash 模式相比略差。</p>
</li>
<li><p>应用部署上线时需要后端人员支持，解决刷新页面服务端 404 的问题。</p>
<h1 id="Vue3-快速上手"><a href="#Vue3-快速上手" class="headerlink" title="Vue3 快速上手"></a>Vue3 快速上手</h1></li>
</ol>
</li>
</ol>
<img src= "/img/loading.gif" data-src="https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png" style="width:200px" />

<h3 id="1-Vue3-简介"><a href="#1-Vue3-简介" class="headerlink" title="1.Vue3 简介"></a>1.Vue3 简介</h3><ul>
<li>2020 年 9 月 18 日，Vue.js 发布 3.0 版本，代号：One Piece（海贼王）</li>
<li>耗时 2 年多、<a href="https://github.com/vuejs/vue-next/graphs/commit-activity" target="_blank" rel="noopener">2600+次提交</a>、<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs" target="_blank" rel="noopener">30+个 RFC</a>、<a href="https://github.com/vuejs/vue-next/pulls?q=is%3Apr+is%3Amerged+-author%3Aapp%2Fdependabot-preview+" target="_blank" rel="noopener">600+次 PR</a>、<a href="https://github.com/vuejs/vue-next/graphs/contributors" target="_blank" rel="noopener">99 位贡献者</a></li>
<li>github 上的 tags 地址：<a href="https://github.com/vuejs/vue-next/releases/tag/v3.0.0" target="_blank" rel="noopener">https://github.com/vuejs/vue-next/releases/tag/v3.0.0</a></li>
</ul>
<h3 id="2-Vue3-带来了什么"><a href="#2-Vue3-带来了什么" class="headerlink" title="2.Vue3 带来了什么"></a>2.Vue3 带来了什么</h3><h4 id="1-性能的提升"><a href="#1-性能的提升" class="headerlink" title="1.性能的提升"></a>1.性能的提升</h4><ul>
<li><p>打包大小减少 41%</p>
</li>
<li><p>初次渲染快 55%, 更新渲染快 133%</p>
</li>
<li><p>内存减少 54%</p>
<p>……</p>
</li>
</ul>
<h4 id="2-源码的升级"><a href="#2-源码的升级" class="headerlink" title="2.源码的升级"></a>2.源码的升级</h4><ul>
<li><p>使用 Proxy 代替 defineProperty 实现响应式</p>
</li>
<li><p>重写虚拟 DOM 的实现和 Tree-Shaking</p>
<p>……</p>
</li>
</ul>
<h4 id="3-拥抱-TypeScript"><a href="#3-拥抱-TypeScript" class="headerlink" title="3.拥抱 TypeScript"></a>3.拥抱 TypeScript</h4><ul>
<li>Vue3 可以更好的支持 TypeScript</li>
</ul>
<h4 id="4-新的特性"><a href="#4-新的特性" class="headerlink" title="4.新的特性"></a>4.新的特性</h4><ol>
<li><p>Composition API（组合 API）</p>
<ul>
<li>setup 配置</li>
<li>ref 与 reactive</li>
<li>watch 与 watchEffect</li>
<li>provide 与 inject</li>
<li>……</li>
</ul>
</li>
<li><p>新的内置组件</p>
<ul>
<li>Fragment</li>
<li>Teleport</li>
<li>Suspense</li>
</ul>
</li>
<li><p>其他改变</p>
<ul>
<li>新的生命周期钩子</li>
<li>data 选项应始终被声明为一个函数</li>
<li>移除 keyCode 支持作为 v-on 的修饰符</li>
<li>……</li>
</ul>
</li>
</ol>
<h1 id="一、创建-Vue3-0-工程"><a href="#一、创建-Vue3-0-工程" class="headerlink" title="一、创建 Vue3.0 工程"></a>一、创建 Vue3.0 工程</h1><h2 id="1-使用-vue-cli-创建"><a href="#1-使用-vue-cli-创建" class="headerlink" title="1.使用 vue-cli 创建"></a>1.使用 vue-cli 创建</h2><p>官方文档：<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create" target="_blank" rel="noopener">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span></span><br><span class="line">vue --version</span><br><span class="line"><span class="comment">## 安装或者升级你的@vue/cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment">## 创建</span></span><br><span class="line">vue create vue_test</span><br><span class="line"><span class="comment">## 启动</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure>

<h2 id="2-使用-vite-创建"><a href="#2-使用-vite-创建" class="headerlink" title="2.使用 vite 创建"></a>2.使用 vite 创建</h2><p>官方文档：<a href="https://v3.cn.vuejs.org/guide/installation.html#vite" target="_blank" rel="noopener">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p>
<p>vite 官网：<a href="https://vitejs.cn" target="_blank" rel="noopener">https://vitejs.cn</a></p>
<ul>
<li>什么是 vite？—— 新一代前端构建工具。</li>
<li>优势如下：<ul>
<li>开发环境中，无需打包操作，可快速的冷启动。</li>
<li>轻量快速的热重载（HMR）。</li>
<li>真正的按需编译，不再等待整个应用编译完成。</li>
</ul>
</li>
<li>传统构建 与 vite 构建对比图</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://cn.vitejs.dev/assets/bundler.37740380.png" style="width:500px;height:280px;float:left" /><img src= "/img/loading.gif" data-src="https://cn.vitejs.dev/assets/esm.3070012d.png" style="width:480px;height:280px" /></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 创建工程</span></span><br><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line"><span class="comment">## 进入工程目录</span></span><br><span class="line"><span class="built_in">cd</span> &lt;project-name&gt;</span><br><span class="line"><span class="comment">## 安装依赖</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment">## 运行</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h1 id="二、常用-Composition-API"><a href="#二、常用-Composition-API" class="headerlink" title="二、常用 Composition API"></a>二、常用 Composition API</h1><p>官方文档: <a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html" target="_blank" rel="noopener">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a></p>
<h2 id="1-拉开序幕的-setup"><a href="#1-拉开序幕的-setup" class="headerlink" title="1.拉开序幕的 setup"></a>1.拉开序幕的 setup</h2><ol>
<li>理解：Vue3.0 中一个新的配置项，值为一个函数。</li>
<li>setup 是所有<strong style="color:#DD5145">Composition API（组合 API）</strong><i style="color:gray;font-weight:bold">“ 表演的舞台 ”</i>。</li>
<li>组件中所用到的：数据、方法等等，均要配置在 setup 中。</li>
<li>setup 函数的两种返回值：<ol>
<li>若返回一个对象，则对象中的属性、方法, 在模板中均可以直接使用。（重点关注！）</li>
<li><span style="color:#aad">若返回一个渲染函数：则可以自定义渲染内容。（了解）</span></li>
</ol>
</li>
<li>注意点：<ol>
<li>尽量不要与 Vue2.x 配置混用<ul>
<li>Vue2.x 配置（data、methos、computed…）中<strong style="color:#DD5145">可以访问到</strong>setup 中的属性、方法。</li>
<li>但在 setup 中<strong style="color:#DD5145">不能访问到</strong>Vue2.x 配置（data、methos、computed…）。</li>
<li>如果有重名, setup 优先。</li>
</ul>
</li>
<li>setup 不能是一个 async 函数，因为返回值不再是 return 的对象, 而是 promise, 模板看不到 return 对象中的属性。（后期也可以返回一个 Promise 实例，但需要 Suspense 和异步组件的配合）</li>
</ol>
</li>
</ol>
<h2 id="2-ref-函数"><a href="#2-ref-函数" class="headerlink" title="2.ref 函数"></a>2.ref 函数</h2><ul>
<li>作用: 定义一个响应式的数据</li>
<li>语法: <code>const xxx = ref(initValue)</code><ul>
<li>创建一个包含响应式数据的<strong style="color:#DD5145">引用对象（reference 对象，简称 ref 对象）</strong>。</li>
<li>JS 中操作数据： <code>xxx.value</code></li>
<li>模板中读取数据: 不需要.value，直接：<code>&lt;div&gt;{ {xxx} }&lt;/div&gt;</code></li>
</ul>
</li>
<li>备注：<ul>
<li>接收的数据可以是：基本类型、也可以是对象类型。</li>
<li>基本类型的数据：响应式依然是靠<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>完成的。</li>
<li>对象类型的数据：内部 <i style="color:gray;font-weight:bold">“ 求助 ”</i> 了 Vue3.0 中的一个新函数—— <code>reactive</code>函数。</li>
</ul>
</li>
</ul>
<h2 id="3-reactive-函数"><a href="#3-reactive-函数" class="headerlink" title="3.reactive 函数"></a>3.reactive 函数</h2><ul>
<li>作用: 定义一个<strong style="color:#DD5145">对象类型</strong>的响应式数据（基本类型不要用它，要用<code>ref</code>函数）</li>
<li>语法：<code>const 代理对象= reactive(源对象)</code>接收一个对象（或数组），返回一个<strong style="color:#DD5145">代理对象（Proxy 的实例对象，简称 proxy 对象）</strong></li>
<li>reactive 定义的响应式数据是“深层次的”。</li>
<li>内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据进行操作。</li>
</ul>
<h2 id="4-Vue3-0-中的响应式原理"><a href="#4-Vue3-0-中的响应式原理" class="headerlink" title="4.Vue3.0 中的响应式原理"></a>4.Vue3.0 中的响应式原理</h2><h3 id="vue2-x-的响应式"><a href="#vue2-x-的响应式" class="headerlink" title="vue2.x 的响应式"></a>vue2.x 的响应式</h3><ul>
<li><p>实现原理：</p>
<ul>
<li><p>对象类型：通过<code>Object.defineProperty()</code>对属性的读取、修改进行拦截（数据劫持）。</p>
</li>
<li><p>数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了包裹）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineProperty(data, <span class="string">'count'</span>, &#123;</span><br><span class="line">    <span class="keyword">get</span>() &#123;&#125;,</span><br><span class="line">    <span class="keyword">set</span>() &#123;&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>存在问题：</p>
<ul>
<li>新增属性、删除属性, 界面不会更新。</li>
<li>直接通过下标修改数组, 界面不会自动更新。</li>
</ul>
</li>
</ul>
<h3 id="Vue3-0-的响应式"><a href="#Vue3-0-的响应式" class="headerlink" title="Vue3.0 的响应式"></a>Vue3.0 的响应式</h3><ul>
<li><p>实现原理:</p>
<ul>
<li><p>通过 Proxy（代理）: 拦截对象中任意属性的变化, 包括：属性值的读写、属性的添加、属性的删除等。</p>
</li>
<li><p>通过 Reflect（反射）: 对源对象的属性进行操作。</p>
</li>
<li><p>MDN 文档中描述的 Proxy 与 Reflect：</p>
<ul>
<li><p>Proxy：<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></p>
</li>
<li><p>Reflect：<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Proxy</span>(data, &#123;</span><br><span class="line">    <span class="comment">// 拦截读取属性值</span></span><br><span class="line">    <span class="keyword">get</span>(target, prop) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, prop)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 拦截设置属性值或添加新属性</span></span><br><span class="line">    <span class="keyword">set</span>(target, prop, value) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, prop, value)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 拦截删除属性</span></span><br><span class="line">    deleteProperty(target, prop) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Reflect</span>.deleteProperty(target, prop)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">proxy.name = <span class="string">'tom'</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-reactive-对比-ref"><a href="#5-reactive-对比-ref" class="headerlink" title="5.reactive 对比 ref"></a>5.reactive 对比 ref</h2><ul>
<li>从定义数据角度对比：<ul>
<li>ref 用来定义：<strong style="color:#DD5145">基本类型数据</strong>。</li>
<li>reactive 用来定义：<strong style="color:#DD5145">对象（或数组）类型数据</strong>。</li>
<li>备注：ref 也可以用来定义<strong style="color:#DD5145">对象（或数组）类型数据</strong>, 它内部会自动通过<code>reactive</code>转为<strong style="color:#DD5145">代理对象</strong>。</li>
</ul>
</li>
<li>从原理角度对比：<ul>
<li>ref 通过<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>来实现响应式（数据劫持）。</li>
<li>reactive 通过使用<strong style="color:#DD5145">Proxy</strong>来实现响应式（数据劫持）, 并通过<strong style="color:#DD5145">Reflect</strong>操作<strong style="color:orange">源对象</strong>内部的数据。</li>
</ul>
</li>
<li>从使用角度对比：<ul>
<li>ref 定义的数据：操作数据<strong style="color:#DD5145">需要</strong><code>.value</code>，读取数据时模板中直接读取<strong style="color:#DD5145">不需要</strong><code>.value</code>。</li>
<li>reactive 定义的数据：操作数据与读取数据：<strong style="color:#DD5145">均不需要</strong><code>.value</code>。</li>
</ul>
</li>
</ul>
<h2 id="6-setup-的两个注意点"><a href="#6-setup-的两个注意点" class="headerlink" title="6.setup 的两个注意点"></a>6.setup 的两个注意点</h2><ul>
<li>setup 执行的时机<ul>
<li>在 beforeCreate 之前执行一次，this 是 undefined。</li>
</ul>
</li>
<li>setup 的参数<ul>
<li>props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性。</li>
<li>context：上下文对象<ul>
<li>attrs: 值为对象，包含：组件外部传递过来，但没有在 props 配置中声明的属性, 相当于 <code>this.$attrs</code>。</li>
<li>slots: 收到的插槽内容, 相当于 <code>this.$slots</code>。</li>
<li>emit: 分发自定义事件的函数, 相当于 <code>this.$emit</code>。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="7-计算属性与监视"><a href="#7-计算属性与监视" class="headerlink" title="7.计算属性与监视"></a>7.计算属性与监视</h2><h3 id="1-computed-函数"><a href="#1-computed-函数" class="headerlink" title="1.computed 函数"></a>1.computed 函数</h3><ul>
<li><p>与 Vue2.x 中 computed 配置功能一致</p>
</li>
<li><p>写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;computed&#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"></span><br><span class="line">setup()&#123;</span><br><span class="line">    ...</span><br><span class="line">	<span class="comment">//计算属性——简写</span></span><br><span class="line">    <span class="keyword">let</span> fullName = computed(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> person.firstName + <span class="string">'-'</span> + person.lastName</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//计算属性——完整</span></span><br><span class="line">    <span class="keyword">let</span> fullName = computed(&#123;</span><br><span class="line">        <span class="keyword">get</span>()&#123;</span><br><span class="line">            <span class="keyword">return</span> person.firstName + <span class="string">'-'</span> + person.lastName</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">set</span>(value)&#123;</span><br><span class="line">            <span class="keyword">const</span> nameArr = value.split(<span class="string">'-'</span>)</span><br><span class="line">            person.firstName = nameArr[<span class="number">0</span>]</span><br><span class="line">            person.lastName = nameArr[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-watch-函数"><a href="#2-watch-函数" class="headerlink" title="2.watch 函数"></a>2.watch 函数</h3><ul>
<li><p>与 Vue2.x 中 watch 配置功能一致</p>
</li>
<li><p>两个小“坑”：</p>
<ul>
<li>监视 reactive 定义的响应式数据时：oldValue 无法正确获取、强制开启了深度监视（deep 配置失效）。</li>
<li>监视 reactive 定义的响应式数据中某个属性时：deep 配置有效。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//情况一：监视ref定义的响应式数据</span></span><br><span class="line">watch(</span><br><span class="line">    sum,</span><br><span class="line">    (newValue, oldValue) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'sum变化了'</span>, newValue, oldValue)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//情况二：监视多个ref定义的响应式数据</span></span><br><span class="line">watch([sum, msg], (newValue, oldValue) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'sum或msg变化了'</span>, newValue, oldValue)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 情况三：监视reactive定义的响应式数据</span></span><br><span class="line"><span class="comment">	若watch监视的是reactive定义的响应式数据，则无法正确获得oldValue！！</span></span><br><span class="line"><span class="comment">	若watch监视的是reactive定义的响应式数据，则强制开启了深度监视 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">watch(</span><br><span class="line">    person,</span><br><span class="line">    (newValue, oldValue) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'person变化了'</span>, newValue, oldValue)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="attr">deep</span>: <span class="literal">false</span> &#125;</span><br><span class="line">) <span class="comment">//此处的deep配置不再奏效</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//情况四：监视reactive定义的响应式数据中的某个属性</span></span><br><span class="line">watch(</span><br><span class="line">    () =&gt; person.job,</span><br><span class="line">    (newValue, oldValue) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'person的job变化了'</span>, newValue, oldValue)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//情况五：监视reactive定义的响应式数据中的某些属性</span></span><br><span class="line">watch(</span><br><span class="line">    [<span class="function"><span class="params">()</span> =&gt;</span> person.job, () =&gt; person.name],</span><br><span class="line">    (newValue, oldValue) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'person的job变化了'</span>, newValue, oldValue)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//特殊情况</span></span><br><span class="line">watch(</span><br><span class="line">    () =&gt; person.job,</span><br><span class="line">    (newValue, oldValue) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'person的job变化了'</span>, newValue, oldValue)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">) <span class="comment">//此处由于监视的是reactive素定义的对象中的某个属性，所以deep配置有效</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="3-watchEffect-函数"><a href="#3-watchEffect-函数" class="headerlink" title="3.watchEffect 函数"></a>3.watchEffect 函数</h3><ul>
<li><p>watch 的套路是：既要指明监视的属性，也要指明监视的回调。</p>
</li>
<li><p>watchEffect 的套路是：不用指明监视哪个属性，监视的回调中用到哪个属性，那就监视哪个属性。</p>
</li>
<li><p>watchEffect 有点像 computed：</p>
<ul>
<li>但 computed 注重的计算出来的值（回调函数的返回值），所以必须要写返回值。</li>
<li>而 watchEffect 更注重的是过程（回调函数的函数体），所以不用写返回值。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调。</span></span><br><span class="line">watchEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> x1 = sum.value</span><br><span class="line">    <span class="keyword">const</span> x2 = person.age</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'watchEffect配置的回调执行了'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="8-生命周期"><a href="#8-生命周期" class="headerlink" title="8.生命周期"></a>8.生命周期</h2><ul>
<li>Vue3.0 中可以继续使用 Vue2.x 中的生命周期钩子，但有有两个被更名：<ul>
<li><code>beforeDestroy</code>改名为 <code>beforeUnmount</code></li>
<li><code>destroyed</code>改名为 <code>unmounted</code></li>
</ul>
</li>
<li>Vue3.0 也提供了 Composition API 形式的生命周期钩子，与 Vue2.x 中钩子对应关系如下：<ul>
<li><code>beforeCreate</code>===&gt;<code>setup()</code></li>
<li><code>created</code>=======&gt;<code>setup()</code></li>
<li><code>beforeMount</code> ===&gt;<code>onBeforeMount</code></li>
<li><code>mounted</code>=======&gt;<code>onMounted</code></li>
<li><code>beforeUpdate</code>===&gt;<code>onBeforeUpdate</code></li>
<li><code>updated</code> =======&gt;<code>onUpdated</code></li>
<li><code>beforeUnmount</code> ==&gt;<code>onBeforeUnmount</code></li>
<li><code>unmounted</code> =====&gt;<code>onUnmounted</code></li>
</ul>
</li>
</ul>
<h2 id="9-自定义-hook-函数"><a href="#9-自定义-hook-函数" class="headerlink" title="9.自定义 hook 函数"></a>9.自定义 hook 函数</h2><ul>
<li><p>什么是 hook？—— 本质是一个函数，把 setup 函数中使用的 Composition API 进行了封装。</p>
</li>
<li><p>类似于 vue2.x 中的 mixin。</p>
</li>
<li><p>自定义 hook 的优势: 复用代码, 让 setup 中的逻辑更清楚易懂。</p>
</li>
</ul>
<h2 id="10-toRef"><a href="#10-toRef" class="headerlink" title="10.toRef"></a>10.toRef</h2><ul>
<li><p>作用：创建一个 ref 对象，其 value 值指向另一个对象中的某个属性。</p>
</li>
<li><p>语法：<code>const name = toRef(person,&#39;name&#39;)</code></p>
</li>
<li><p>应用: 要将响应式对象中的某个属性单独提供给外部使用时。</p>
</li>
<li><p>扩展：<code>toRefs</code>与<code>toRef</code>功能一致，但可以批量创建多个 ref 对象，语法：<code>toRefs(person)</code></p>
</li>
</ul>
<h1 id="三、其它-Composition-API"><a href="#三、其它-Composition-API" class="headerlink" title="三、其它 Composition API"></a>三、其它 Composition API</h1><h2 id="1-shallowReactive-与-shallowRef"><a href="#1-shallowReactive-与-shallowRef" class="headerlink" title="1.shallowReactive 与 shallowRef"></a>1.shallowReactive 与 shallowRef</h2><ul>
<li><p>shallowReactive：只处理对象最外层属性的响应式（浅响应式）。</p>
</li>
<li><p>shallowRef：只处理基本数据类型的响应式, 不进行对象的响应式处理。</p>
</li>
<li><p>什么时候使用?</p>
<ul>
<li>如果有一个对象数据，结构比较深, 但变化时只是外层属性变化 ===&gt; shallowReactive。</li>
<li>如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换 ===&gt; shallowRef。</li>
</ul>
</li>
</ul>
<h2 id="2-readonly-与-shallowReadonly"><a href="#2-readonly-与-shallowReadonly" class="headerlink" title="2.readonly 与 shallowReadonly"></a>2.readonly 与 shallowReadonly</h2><ul>
<li>readonly: 让一个响应式数据变为只读的（深只读）。</li>
<li>shallowReadonly：让一个响应式数据变为只读的（浅只读）。</li>
<li>应用场景: 不希望数据被修改时。</li>
</ul>
<h2 id="3-toRaw-与-markRaw"><a href="#3-toRaw-与-markRaw" class="headerlink" title="3.toRaw 与 markRaw"></a>3.toRaw 与 markRaw</h2><ul>
<li>toRaw：<ul>
<li>作用：将一个由<code>reactive</code>生成的<strong style="color:orange">响应式对象</strong>转为<strong style="color:orange">普通对象</strong>。</li>
<li>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新。</li>
</ul>
</li>
<li>markRaw：<ul>
<li>作用：标记一个对象，使其永远不会再成为响应式对象。</li>
<li>应用场景:<ol>
<li>有些值不应被设置为响应式的，例如复杂的第三方类库等。</li>
<li>当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能。</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="4-customRef"><a href="#4-customRef" class="headerlink" title="4.customRef"></a>4.customRef</h2><ul>
<li><p>作用：创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制。</p>
</li>
<li><p>实现防抖效果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;input type=<span class="string">"text"</span> v-model=<span class="string">"keyword"</span>&gt;</span><br><span class="line">	&lt;h3&gt;&#123; &#123;keyword&#125; &#125;&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	<span class="keyword">import</span> &#123;ref,customRef&#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">		name:<span class="string">'Demo'</span>,</span><br><span class="line">		setup()&#123;</span><br><span class="line">			<span class="comment">// let keyword = ref('hello') //使用Vue准备好的内置ref</span></span><br><span class="line">			<span class="comment">//自定义一个myRef</span></span><br><span class="line">			<span class="function"><span class="keyword">function</span> <span class="title">myRef</span>(<span class="params">value,delay</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">let</span> timer</span><br><span class="line">				<span class="comment">//通过customRef去实现自定义</span></span><br><span class="line">				<span class="keyword">return</span> customRef(<span class="function">(<span class="params">track,trigger</span>)=&gt;</span>&#123;</span><br><span class="line">					<span class="keyword">return</span>&#123;</span><br><span class="line">						<span class="keyword">get</span>()&#123;</span><br><span class="line">							track() <span class="comment">//告诉Vue这个value值是需要被“追踪”的</span></span><br><span class="line">							<span class="keyword">return</span> value</span><br><span class="line">						&#125;,</span><br><span class="line">						<span class="keyword">set</span>(newValue)&#123;</span><br><span class="line">							clearTimeout(timer)</span><br><span class="line">							timer = setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">								value = newValue</span><br><span class="line">								trigger() <span class="comment">//告诉Vue去更新界面</span></span><br><span class="line">							&#125;,delay)</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">let</span> keyword = myRef(<span class="string">'hello'</span>,<span class="number">500</span>) <span class="comment">//使用程序员自定义的ref</span></span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				keyword</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="5-provide-与-inject"><a href="#5-provide-与-inject" class="headerlink" title="5.provide 与 inject"></a>5.provide 与 inject</h2><p><img src= "/img/loading.gif" data-src="https://img-blog.csdnimg.cn/e2ed8805bb50410895c71ba1c8b9da79.png" alt="在这里插入图片描述"></p>
<ul>
<li><p>作用：实现<strong style="color:#DD5145">祖与后代组件间</strong>通信</p>
</li>
<li><p>套路：父组件有一个 <code>provide</code> 选项来提供数据，后代组件有一个 <code>inject</code> 选项来开始使用这些数据</p>
</li>
<li><p>具体写法：</p>
<ol>
<li><p>祖组件中：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">setup()&#123;</span><br><span class="line">	......</span><br><span class="line">    <span class="keyword">let</span> car = reactive(&#123;<span class="attr">name</span>:<span class="string">'奔驰'</span>,<span class="attr">price</span>:<span class="string">'40万'</span>&#125;)</span><br><span class="line">    provide(<span class="string">'car'</span>,car)</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>后代组件中：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">setup(props,context)&#123;</span><br><span class="line">	......</span><br><span class="line">    <span class="keyword">const</span> car = inject(<span class="string">'car'</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;car&#125;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ul>
<h2 id="6-响应式数据的判断"><a href="#6-响应式数据的判断" class="headerlink" title="6.响应式数据的判断"></a>6.响应式数据的判断</h2><ul>
<li>isRef: 检查一个值是否为一个 ref 对象</li>
<li>isReactive: 检查一个对象是否是由 <code>reactive</code> 创建的响应式代理</li>
<li>isReadonly: 检查一个对象是否是由 <code>readonly</code> 创建的只读代理</li>
<li>isProxy: 检查一个对象是否是由 <code>reactive</code> 或者 <code>readonly</code> 方法创建的代理</li>
</ul>
<h1 id="四、Composition-API-的优势"><a href="#四、Composition-API-的优势" class="headerlink" title="四、Composition API 的优势"></a>四、Composition API 的优势</h1><h2 id="1-Options-API-存在的问题"><a href="#1-Options-API-存在的问题" class="headerlink" title="1.Options API 存在的问题"></a>1.Options API 存在的问题</h2><p>使用传统 OptionsAPI 中，新增或者修改一个需求，就需要分别在 data，methods，computed 里修改 。</p>
<div style="width:600px;height:370px;overflow:hidden;float:left">
    <img src= "/img/loading.gif" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image" style="width:600px;float:left" />
</div>
<div style="width:300px;height:370px;overflow:hidden;float:left">
    <img src= "/img/loading.gif" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image" style="zoom:50%;width:560px;left" /> 
</div>

<h2 id="2-Composition-API-的优势"><a href="#2-Composition-API-的优势" class="headerlink" title="2.Composition API 的优势"></a>2.Composition API 的优势</h2><p>我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起。</p>
<div style="width:500px;height:340px;overflow:hidden;float:left">
    <img src= "/img/loading.gif" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image"style="height:360px"/>
</div>
<div style="width:430px;height:340px;overflow:hidden;float:left">
    <img src= "/img/loading.gif" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image"style="height:360px"/>
</div>

<h1 id="五、新的组件"><a href="#五、新的组件" class="headerlink" title="五、新的组件"></a>五、新的组件</h1><h2 id="1-Fragment"><a href="#1-Fragment" class="headerlink" title="1.Fragment"></a>1.Fragment</h2><ul>
<li>在 Vue2 中: 组件必须有一个根标签</li>
<li>在 Vue3 中: 组件可以没有根标签, 内部会将多个标签包含在一个 Fragment 虚拟元素中</li>
<li>好处: 减少标签层级, 减小内存占用</li>
</ul>
<h2 id="2-Teleport"><a href="#2-Teleport" class="headerlink" title="2.Teleport"></a>2.Teleport</h2><ul>
<li><p>什么是 Teleport？—— <code>Teleport</code> 是一种能够将我们的<strong style="color:#DD5145">组件 html 结构</strong>移动到指定位置的技术。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport to=<span class="string">"移动位置"</span>&gt;</span><br><span class="line">	&lt;div v-<span class="keyword">if</span>=<span class="string">"isShow"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"mask"</span>&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"dialog"</span>&gt;</span><br><span class="line">			&lt;h3&gt;我是一个弹窗&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">			&lt;button @click="isShow = false"&gt;关闭弹窗&lt;/</span>button&gt;</span><br><span class="line">		&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/teleport&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="3-Suspense"><a href="#3-Suspense" class="headerlink" title="3.Suspense"></a>3.Suspense</h2><ul>
<li><p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p>
</li>
<li><p>使用步骤：</p>
<ul>
<li><p>异步引入组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">const</span> Child = defineAsyncComponent(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./components/Child.vue'</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>Suspense</code>包裹组件，并配置好<code>default</code>与 <code>fallback</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"app"</span>&gt;</span><br><span class="line">        &lt;h3&gt;我是App组件&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Suspense&gt;</span></span><br><span class="line"><span class="regexp">            &lt;template v-slot:default&gt;</span></span><br><span class="line"><span class="regexp">                &lt;Child /</span>&gt;</span><br><span class="line">            &lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">            &lt;template v-slot:fallback&gt;</span></span><br><span class="line"><span class="regexp">                &lt;h3&gt;加载中.....&lt;/</span>h3&gt;</span><br><span class="line">            &lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Suspense&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h1 id="六、其他"><a href="#六、其他" class="headerlink" title="六、其他"></a>六、其他</h1><h2 id="1-全局-API-的转移"><a href="#1-全局-API-的转移" class="headerlink" title="1.全局 API 的转移"></a>1.全局 API 的转移</h2><ul>
<li><p>Vue 2.x 有许多全局 API 和配置。</p>
<ul>
<li><p>例如：注册全局组件、注册全局指令等。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注册全局组件</span></span><br><span class="line">Vue.component(<span class="string">'MyButton'</span>, &#123;</span><br><span class="line">  data: <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">    count: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line">  template: <span class="string">'&lt;button @click="count++"&gt;Clicked &#123; &#123; count &#125; &#125; times.&lt;/button&gt;'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//注册全局指令</span></span><br><span class="line">Vue.directive(<span class="string">'focus'</span>, &#123;</span><br><span class="line">  inserted: <span class="function"><span class="params">el</span> =&gt;</span> el.focus()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Vue3.0 中对这些 API 做出了调整：</p>
<ul>
<li><p>将全局的 API，即：<code>Vue.xxx</code>调整到应用实例（<code>app</code>）上</p>
<table>
<thead>
<tr>
<th>2.x 全局 API（<code>Vue</code>）</th>
<th>3.x 实例 API (<code>app</code>)</th>
</tr>
</thead>
<tbody><tr>
<td>Vue.config.xxxx</td>
<td>app.config.xxxx</td>
</tr>
<tr>
<td>Vue.config.productionTip</td>
<td><strong style="color:#DD5145">移除</strong></td>
</tr>
<tr>
<td>Vue.component</td>
<td>app.component</td>
</tr>
<tr>
<td>Vue.directive</td>
<td>app.directive</td>
</tr>
<tr>
<td>Vue.mixin</td>
<td>app.mixin</td>
</tr>
<tr>
<td>Vue.use</td>
<td>app.use</td>
</tr>
<tr>
<td>Vue.prototype</td>
<td>app.config.globalProperties</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<h2 id="2-其他改变"><a href="#2-其他改变" class="headerlink" title="2.其他改变"></a>2.其他改变</h2><ul>
<li><p>data 选项应始终被声明为一个函数。</p>
</li>
<li><p>过度类名的更改：</p>
<ul>
<li><p>Vue2.x 写法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Vue3.x 写法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter-from</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong style="color:#DD5145">移除</strong>keyCode 作为 v-on 的修饰符，同时也不再支持<code>config.keyCodes</code></p>
</li>
<li><p><strong style="color:#DD5145">移除</strong><code>v-on.native</code>修饰符</p>
<ul>
<li><p>父组件中绑定事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component v-on:close=<span class="string">"handleComponentEvent"</span> v-on:click=<span class="string">"handleNativeClickEvent"</span> /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>子组件中声明自定义事件</p>
<figure class="highlight plain"><figcaption><span>s</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    emits: [&#39;close&#39;]</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong style="color:#DD5145">移除</strong>过滤器（filter）</p>
<blockquote>
<p>过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。</p>
</blockquote>
</li>
<li><p>……</p>
</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:1442243445@qq.com">小小王</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2022/10/16/vue/">http://yoursite.com/2022/10/16/vue/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">Wang</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue/">Vue</a></div><div class="post_share"><div class="social-share" data-image="/img/bg.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/11/20/mac/"><img class="prev-cover" data-src="/img/bg.jpg" onerror="onerror=null;src='/'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Mac</div></div></a></div><div class="next-post pull-right"><a href="/2022/03/18/jsregex/"><img class="next-cover" data-src="/img/bg.jpg" onerror="onerror=null;src='/'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JS正则表达式</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 小小王</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>粤ICP备20054751</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><script src="js/move_mouse/script.js"></script><script src="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/js/pool.min.js"></script><script src="/js/down_mouse/love.js"></script></body></html>